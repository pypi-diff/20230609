# Comparing `tmp/odoo_addon_intrastat_product-15.0.1.0.2-py3-none-any.whl.zip` & `tmp/odoo_addon_intrastat_product-16.0.1.0.0.3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,65 +1,67 @@
-Zip file size: 100408 bytes, number of entries: 63
--rw-r--r--  2.0 unx     5921 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/README.rst
--rw-r--r--  2.0 unx       97 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/__init__.py
--rw-r--r--  2.0 unx     1774 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/__manifest__.py
--rw-r--r--  2.0 unx     1157 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/hooks.py
--rw-r--r--  2.0 unx     2480 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/data/intrastat_transport_mode.xml
--rw-r--r--  2.0 unx     5530 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/data/intrastat_unit.xml
--rw-r--r--  2.0 unx      880 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/demo/intrastat_demo.xml
--rw-r--r--  2.0 unx    76152 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/i18n/es.po
--rw-r--r--  2.0 unx    77654 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/i18n/fr.po
--rw-r--r--  2.0 unx    66736 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/i18n/intrastat_product.pot
--rw-r--r--  2.0 unx      369 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/models/__init__.py
--rw-r--r--  2.0 unx     9061 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/models/account_move.py
--rw-r--r--  2.0 unx      422 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/models/hs_code.py
--rw-r--r--  2.0 unx    50417 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/models/intrastat_product_declaration.py
--rw-r--r--  2.0 unx      798 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/models/intrastat_region.py
--rw-r--r--  2.0 unx     1175 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/models/intrastat_transaction.py
--rw-r--r--  2.0 unx      869 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/models/intrastat_transport_mode.py
--rw-r--r--  2.0 unx      708 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/models/intrastat_unit.py
--rw-r--r--  2.0 unx     2874 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/models/res_company.py
--rw-r--r--  2.0 unx     1653 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/models/res_config_settings.py
--rw-r--r--  2.0 unx      448 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/models/res_partner.py
--rw-r--r--  2.0 unx      972 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/models/sale_order.py
--rw-r--r--  2.0 unx      746 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/models/stock_warehouse.py
--rw-r--r--  2.0 unx      732 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/readme/CONFIGURE.rst
--rw-r--r--  2.0 unx      221 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      473 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx       88 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/readme/INSTALL.rst
--rw-r--r--  2.0 unx      221 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/readme/ROADMAP.rst
--rw-r--r--  2.0 unx     1426 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/readme/USAGE.rst
--rw-r--r--  2.0 unx       43 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/report/__init__.py
--rw-r--r--  2.0 unx     9297 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/report/intrastat_product_report_xls.py
--rw-r--r--  2.0 unx     1666 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/security/intrastat_security.xml
--rw-r--r--  2.0 unx     2585 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/security/ir.model.access.csv
--rw-r--r--  2.0 unx     9455 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/static/description/icon.png
--rw-r--r--  2.0 unx    16982 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/static/description/index.html
--rw-r--r--  2.0 unx      231 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/tests/__init__.py
--rw-r--r--  2.0 unx     3798 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/tests/common.py
--rw-r--r--  2.0 unx     3016 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/tests/common_purchase.py
--rw-r--r--  2.0 unx     2663 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/tests/common_sale.py
--rw-r--r--  2.0 unx     5097 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/tests/test_brexit.py
--rw-r--r--  2.0 unx     1245 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/tests/test_company.py
--rw-r--r--  2.0 unx     5596 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/tests/test_intrastat_product.py
--rw-r--r--  2.0 unx     1804 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/tests/test_purchase_order.py
--rw-r--r--  2.0 unx     3084 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/tests/test_sale_order.py
--rw-r--r--  2.0 unx     2891 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/views/account_move.xml
--rw-r--r--  2.0 unx     1582 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/views/hs_code.xml
--rw-r--r--  2.0 unx    19151 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/views/intrastat_product_declaration.xml
--rw-r--r--  2.0 unx     1628 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/views/intrastat_region.xml
--rw-r--r--  2.0 unx     3010 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/views/intrastat_transaction.xml
--rw-r--r--  2.0 unx     2300 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/views/intrastat_transport_mode.xml
--rw-r--r--  2.0 unx     2865 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/views/intrastat_unit.xml
--rw-r--r--  2.0 unx     2353 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/views/report_invoice.xml
--rw-r--r--  2.0 unx     4416 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/views/res_config_settings.xml
--rw-r--r--  2.0 unx      501 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/views/res_partner_view.xml
--rw-r--r--  2.0 unx      696 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/views/sale_order.xml
--rw-r--r--  2.0 unx      474 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/views/stock_warehouse.xml
--rw-r--r--  2.0 unx       36 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/wizards/__init__.py
--rw-r--r--  2.0 unx      493 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/wizards/intrastat_result_view.py
--rw-r--r--  2.0 unx      817 b- defN 23-Feb-24 11:06 odoo/addons/intrastat_product/wizards/intrastat_result_view.xml
--rw-r--r--  2.0 unx     6748 b- defN 23-Feb-24 11:06 odoo_addon_intrastat_product-15.0.1.0.2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Feb-24 11:06 odoo_addon_intrastat_product-15.0.1.0.2.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Feb-24 11:06 odoo_addon_intrastat_product-15.0.1.0.2.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     6898 b- defN 23-Feb-24 11:06 odoo_addon_intrastat_product-15.0.1.0.2.dist-info/RECORD
-63 files, 435572 bytes uncompressed, 88824 bytes compressed:  79.6%
+Zip file size: 104327 bytes, number of entries: 65
+-rw-r--r--  2.0 unx     5921 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/README.rst
+-rw-r--r--  2.0 unx       97 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/__init__.py
+-rw-r--r--  2.0 unx     1798 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/__manifest__.py
+-rw-r--r--  2.0 unx     1157 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/hooks.py
+-rw-r--r--  2.0 unx     5344 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/data/intrastat_transaction.xml
+-rw-r--r--  2.0 unx     2480 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/data/intrastat_transport_mode.xml
+-rw-r--r--  2.0 unx     5530 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/data/intrastat_unit.xml
+-rw-r--r--  2.0 unx      880 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/demo/intrastat_demo.xml
+-rw-r--r--  2.0 unx    82024 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/i18n/es.po
+-rw-r--r--  2.0 unx    81028 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/i18n/fr.po
+-rw-r--r--  2.0 unx    66278 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/i18n/intrastat_product.pot
+-rw-r--r--  2.0 unx      335 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/models/__init__.py
+-rw-r--r--  2.0 unx     7579 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/models/account_move.py
+-rw-r--r--  2.0 unx      422 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/models/hs_code.py
+-rw-r--r--  2.0 unx    47563 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/models/intrastat_product_declaration.py
+-rw-r--r--  2.0 unx      704 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/models/intrastat_region.py
+-rw-r--r--  2.0 unx     1166 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/models/intrastat_transaction.py
+-rw-r--r--  2.0 unx      869 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/models/intrastat_transport_mode.py
+-rw-r--r--  2.0 unx      708 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/models/intrastat_unit.py
+-rw-r--r--  2.0 unx     2165 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/models/res_company.py
+-rw-r--r--  2.0 unx      448 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/models/res_partner.py
+-rw-r--r--  2.0 unx      972 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/models/sale_order.py
+-rw-r--r--  2.0 unx      746 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/models/stock_warehouse.py
+-rw-r--r--  2.0 unx      732 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/readme/CONFIGURE.rst
+-rw-r--r--  2.0 unx      221 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      473 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx       88 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/readme/INSTALL.rst
+-rw-r--r--  2.0 unx      221 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/readme/ROADMAP.rst
+-rw-r--r--  2.0 unx     1426 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/readme/USAGE.rst
+-rw-r--r--  2.0 unx       43 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/report/__init__.py
+-rw-r--r--  2.0 unx    10958 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/report/intrastat_product_report_xls.py
+-rw-r--r--  2.0 unx      895 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/report/report.xml
+-rw-r--r--  2.0 unx     1666 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/security/intrastat_security.xml
+-rw-r--r--  2.0 unx     2585 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/security/ir.model.access.csv
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/static/description/icon.png
+-rw-r--r--  2.0 unx    16982 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/static/description/index.html
+-rw-r--r--  2.0 unx      231 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/tests/__init__.py
+-rw-r--r--  2.0 unx     7242 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/tests/common.py
+-rw-r--r--  2.0 unx     3030 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/tests/common_purchase.py
+-rw-r--r--  2.0 unx     2671 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/tests/common_sale.py
+-rw-r--r--  2.0 unx     4134 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/tests/test_brexit.py
+-rw-r--r--  2.0 unx     1245 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/tests/test_company.py
+-rw-r--r--  2.0 unx     5934 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/tests/test_intrastat_product.py
+-rw-r--r--  2.0 unx     1897 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/tests/test_purchase_order.py
+-rw-r--r--  2.0 unx     3179 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/tests/test_sale_order.py
+-rw-r--r--  2.0 unx     2726 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/views/account_move.xml
+-rw-r--r--  2.0 unx     1582 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/views/hs_code.xml
+-rw-r--r--  2.0 unx    23035 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/views/intrastat_product_declaration.xml
+-rw-r--r--  2.0 unx     2523 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/views/intrastat_region.xml
+-rw-r--r--  2.0 unx     3181 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/views/intrastat_transaction.xml
+-rw-r--r--  2.0 unx     2300 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/views/intrastat_transport_mode.xml
+-rw-r--r--  2.0 unx     2865 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/views/intrastat_unit.xml
+-rw-r--r--  2.0 unx     2353 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/views/report_invoice.xml
+-rw-r--r--  2.0 unx     2927 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/views/res_config_settings.xml
+-rw-r--r--  2.0 unx      501 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/views/res_partner_view.xml
+-rw-r--r--  2.0 unx      696 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/views/sale_order.xml
+-rw-r--r--  2.0 unx      460 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/views/stock_warehouse.xml
+-rw-r--r--  2.0 unx       70 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/wizards/__init__.py
+-rw-r--r--  2.0 unx      493 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/wizards/intrastat_result_view.py
+-rw-r--r--  2.0 unx      829 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/wizards/intrastat_result_view.xml
+-rw-r--r--  2.0 unx     1093 b- defN 23-Jun-09 14:58 odoo/addons/intrastat_product/wizards/res_config_settings.py
+-rw-r--r--  2.0 unx     6751 b- defN 23-Jun-09 14:58 odoo_addon_intrastat_product-16.0.1.0.0.3.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-09 14:58 odoo_addon_intrastat_product-16.0.1.0.0.3.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jun-09 14:58 odoo_addon_intrastat_product-16.0.1.0.0.3.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     7128 b- defN 23-Jun-09 14:58 odoo_addon_intrastat_product-16.0.1.0.0.3.dist-info/RECORD
+65 files, 453132 bytes uncompressed, 92359 bytes compressed:  79.6%
```

## zipnote {}

```diff
@@ -6,14 +6,17 @@
 
 Filename: odoo/addons/intrastat_product/__manifest__.py
 Comment: 
 
 Filename: odoo/addons/intrastat_product/hooks.py
 Comment: 
 
+Filename: odoo/addons/intrastat_product/data/intrastat_transaction.xml
+Comment: 
+
 Filename: odoo/addons/intrastat_product/data/intrastat_transport_mode.xml
 Comment: 
 
 Filename: odoo/addons/intrastat_product/data/intrastat_unit.xml
 Comment: 
 
 Filename: odoo/addons/intrastat_product/demo/intrastat_demo.xml
@@ -51,17 +54,14 @@
 
 Filename: odoo/addons/intrastat_product/models/intrastat_unit.py
 Comment: 
 
 Filename: odoo/addons/intrastat_product/models/res_company.py
 Comment: 
 
-Filename: odoo/addons/intrastat_product/models/res_config_settings.py
-Comment: 
-
 Filename: odoo/addons/intrastat_product/models/res_partner.py
 Comment: 
 
 Filename: odoo/addons/intrastat_product/models/sale_order.py
 Comment: 
 
 Filename: odoo/addons/intrastat_product/models/stock_warehouse.py
@@ -87,14 +87,17 @@
 
 Filename: odoo/addons/intrastat_product/report/__init__.py
 Comment: 
 
 Filename: odoo/addons/intrastat_product/report/intrastat_product_report_xls.py
 Comment: 
 
+Filename: odoo/addons/intrastat_product/report/report.xml
+Comment: 
+
 Filename: odoo/addons/intrastat_product/security/intrastat_security.xml
 Comment: 
 
 Filename: odoo/addons/intrastat_product/security/ir.model.access.csv
 Comment: 
 
 Filename: odoo/addons/intrastat_product/static/description/icon.png
@@ -171,20 +174,23 @@
 
 Filename: odoo/addons/intrastat_product/wizards/intrastat_result_view.py
 Comment: 
 
 Filename: odoo/addons/intrastat_product/wizards/intrastat_result_view.xml
 Comment: 
 
-Filename: odoo_addon_intrastat_product-15.0.1.0.2.dist-info/METADATA
+Filename: odoo/addons/intrastat_product/wizards/res_config_settings.py
+Comment: 
+
+Filename: odoo_addon_intrastat_product-16.0.1.0.0.3.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_intrastat_product-15.0.1.0.2.dist-info/WHEEL
+Filename: odoo_addon_intrastat_product-16.0.1.0.0.3.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_intrastat_product-15.0.1.0.2.dist-info/top_level.txt
+Filename: odoo_addon_intrastat_product-16.0.1.0.0.3.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_intrastat_product-15.0.1.0.2.dist-info/RECORD
+Filename: odoo_addon_intrastat_product-16.0.1.0.0.3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/intrastat_product/README.rst

```diff
@@ -10,21 +10,21 @@
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fintrastat--extrastat-lightgray.png?logo=github
-    :target: https://github.com/OCA/intrastat-extrastat/tree/15.0/intrastat_product
+    :target: https://github.com/OCA/intrastat-extrastat/tree/16.0/intrastat_product
     :alt: OCA/intrastat-extrastat
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/intrastat-extrastat-15-0/intrastat-extrastat-15-0-intrastat_product
+    :target: https://translation.odoo-community.org/projects/intrastat-extrastat-16-0/intrastat-extrastat-16-0-intrastat_product
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
-    :target: https://runbot.odoo-community.org/runbot/227/15.0
+    :target: https://runbot.odoo-community.org/runbot/227/16.0
     :alt: Try me on Runbot
 
 |badge1| |badge2| |badge3| |badge4| |badge5| 
 
 This module contains common objects and fields for the Intrastat Product reporting.
 
 It should be used in combination with country-specific Intrastat Product reporting modules
@@ -117,15 +117,15 @@
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/intrastat-extrastat/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/intrastat-extrastat/issues/new?body=module:%20intrastat_product%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/intrastat-extrastat/issues/new?body=module:%20intrastat_product%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
@@ -156,10 +156,10 @@
    :alt: Odoo Community Association
    :target: https://odoo-community.org
 
 OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.
 
-This module is part of the `OCA/intrastat-extrastat <https://github.com/OCA/intrastat-extrastat/tree/15.0/intrastat_product>`_ project on GitHub.
+This module is part of the `OCA/intrastat-extrastat <https://github.com/OCA/intrastat-extrastat/tree/16.0/intrastat_product>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## odoo/addons/intrastat_product/__manifest__.py

```diff
@@ -1,18 +1,17 @@
 # Copyright 2011-2020 Akretion (http://www.akretion.com)
 # Copyright 2009-2020 Noviat (http://www.noviat.com)
 # Copyright 2018-2020 brain-tec AG (http://www.braintec-group.com)
-# Copyright 2022 Tecnativa - Víctor Martínez
 # @author Alexis de Lattre <alexis.delattre@akretion.com>
 # @author Luc de Meyer <info@noviat.com>
 # @author Kumar Aberer <kumar.aberer@braintec-group.com>
 
 {
     "name": "Intrastat Product",
-    "version": "15.0.1.0.2",
+    "version": "16.0.1.0.0",
     "category": "Intrastat",
     "license": "AGPL-3",
     "summary": "Base module for Intrastat Product",
     "author": "ACSONE SA/NV, brain-tec AG, Akretion, Noviat, Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/intrastat-extrastat",
     "depends": [
         "intrastat_base",
@@ -22,14 +21,15 @@
         "report_xlsx_helper",
     ],
     "excludes": ["account_intrastat"],
     "external_dependencies": {"python": ["python-stdnum>=1.16"]},
     "data": [
         "security/intrastat_security.xml",
         "security/ir.model.access.csv",
+        "report/report.xml",
         "views/hs_code.xml",
         "views/intrastat_region.xml",
         "views/intrastat_unit.xml",
         "views/intrastat_transaction.xml",
         "views/intrastat_transport_mode.xml",
         "views/intrastat_product_declaration.xml",
         "views/res_config_settings.xml",
@@ -37,12 +37,13 @@
         "views/account_move.xml",
         "views/sale_order.xml",
         "views/stock_warehouse.xml",
         "views/report_invoice.xml",
         "wizards/intrastat_result_view.xml",
         "data/intrastat_transport_mode.xml",
         "data/intrastat_unit.xml",
+        "data/intrastat_transaction.xml",
     ],
     "demo": ["demo/intrastat_demo.xml"],
     "installable": True,
     "pre_init_hook": "pre_init_hook",
 }
```

### encoding

```diff
@@ -1 +1 @@
-utf-8
+us-ascii
```

## odoo/addons/intrastat_product/i18n/es.po

```diff
@@ -2,24 +2,24 @@
 # This file contains the translation of the following modules:
 # 	* intrastat_product
 #
 msgid ""
 msgstr ""
 "Project-Id-Version: Odoo Server 14.0\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2022-08-19 06:52+0000\n"
-"PO-Revision-Date: 2022-08-19 08:55+0200\n"
+"POT-Creation-Date: 2022-08-16 06:43+0000\n"
+"PO-Revision-Date: 2022-08-16 08:56+0200\n"
 "Last-Translator: Víctor Martínez <victor.martinez@tecnativa.com>\n"
 "Language-Team: none\n"
 "Language: es\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
 "Plural-Forms: nplurals=2; plural=n != 1;\n"
-"X-Generator: Poedit 3.0.1\n"
+"X-Generator: Poedit 2.3\n"
 
 #. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.view_move_form
 msgid ""
 "(Re)compute the intrastat transaction details from the product master data."
 msgstr ""
 "(Re)calcular los detalles de la transacción intrastat a partir de los datos "
@@ -118,15 +118,15 @@
 msgstr ""
 "Código de 2 dígitos del país de origen/destino.\n"
 "Especifique \"XI\" para el Reino Unido e Irlanda del Norte."
 
 #. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_form
 msgid "<span>Intrastat Product Declaration </span>"
-msgstr "<span>Declaración de producto Intrastat </span>"
+msgstr "<span>Declaración de producto IntrastaT </span>"
 
 #. module: intrastat_product
 #: model:ir.model.constraint,message:intrastat_product.constraint_intrastat_product_declaration_date_uniq
 msgid ""
 "A declaration of the same type already exists for this month !\n"
 "You should update the existing declaration or change the revision number of "
 "this one."
@@ -146,15 +146,15 @@
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__action
 msgid "Action"
 msgstr "Acción"
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__message_needaction
 msgid "Action Needed"
-msgstr "Acción Necesaria"
+msgstr "Acción necesaria"
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_transaction__active
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_unit__active
 msgid "Active"
 msgstr "Activo"
 
@@ -162,20 +162,20 @@
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__activity_ids
 msgid "Activities"
 msgstr "Actividades"
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__activity_exception_decoration
 msgid "Activity Exception Decoration"
-msgstr "Decoración de excepción de actividad"
+msgstr "Actividad Excepción Decoración"
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__activity_state
 msgid "Activity State"
-msgstr "Estado de la actividad"
+msgstr "Estado de actividad"
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__activity_type_icon
 msgid "Activity Type Icon"
 msgstr "Icono de tipo de actividad"
 
 #. module: intrastat_product
@@ -344,30 +344,27 @@
 msgstr ""
 "La conversión de la Unidad Suplementaria Intrastat '%s' a la Unidad de "
 "Medida aún no está implementada."
 
 #. module: intrastat_product
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
-msgid ""
-"Conversion from unit of measure %(src_uom)s to %(dest_uom)s is not "
-"implemented."
+msgid "Conversion from unit of measure '%s' to '%s' is not implemented yet."
 msgstr ""
-"La conversión de la unidad de medida %(src_uom)s a %(dest_uom)s no está "
-"implementada."
+"La conversión de la unidad de medida '%s' a '%s' aún no está implementada."
 
 #. module: intrastat_product
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid ""
-"Conversion from unit of measure %(uom)s to 'Kg' is not implemented. It is "
-"needed for product %(product)s."
+"Conversion from unit of measure '%s' to 'Kg' is not implemented yet. It is "
+"needed for product '%s'."
 msgstr ""
-"La conversión de la unidad de medida %(uom)s a 'Kg' no está implementada. Se "
-"necesita para el producto %(product)s."
+"La conversión de la unidad de medida '%s' a 'Kg' aún no está implementada. "
+"Se necesita para el producto '%s'."
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__src_dest_country_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__src_dest_country_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_region__country_id
 #: model:ir.model.fields,field_description:intrastat_product.field_res_config_settings__country_id
 msgid "Country"
@@ -401,15 +398,15 @@
 msgid "Country of Origin/Destination"
 msgstr "País de origen/destino"
 
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_computation_line__product_origin_country_id
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration_line__product_origin_country_id
 msgid "Country of origin of the product i.e. product 'made in ____'"
-msgstr "País de origen del producto, como por ejemplo 'Hecho en ____'."
+msgstr "País de origen del producto, como por ejemplo 'Hecho en ____'"
 
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_account_move_intrastat_line__product_origin_country_id
 msgid "Country of origin of the product i.e. product 'made in ____'."
 msgstr "País de origen del producto, como por ejemplo 'Hecho en ____'."
 
 #. module: intrastat_product
@@ -542,25 +539,35 @@
 #: model:ir.model.fields,field_description:intrastat_product.field_res_company__intrastat_dispatches
 #: model:ir.model.fields,field_description:intrastat_product.field_res_config_settings__intrastat_dispatches
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_search
 msgid "Dispatches"
 msgstr "Despachos"
 
 #. module: intrastat_product
+#: model:ir.model.fields,field_description:intrastat_product.field_account_move__display_name
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move_intrastat_line__display_name
+#: model:ir.model.fields,field_description:intrastat_product.field_account_move_line__display_name
+#: model:ir.model.fields,field_description:intrastat_product.field_hs_code__display_name
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__display_name
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__display_name
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__display_name
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_region__display_name
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_result_view__display_name
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_transaction__display_name
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_transport_mode__display_name
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_unit__display_name
+#: model:ir.model.fields,field_description:intrastat_product.field_report_intrastat_product_product_declaration_xls__display_name
+#: model:ir.model.fields,field_description:intrastat_product.field_res_company__display_name
+#: model:ir.model.fields,field_description:intrastat_product.field_res_config_settings__display_name
+#: model:ir.model.fields,field_description:intrastat_product.field_res_partner__display_name
+#: model:ir.model.fields,field_description:intrastat_product.field_sale_order__display_name
+#: model:ir.model.fields,field_description:intrastat_product.field_stock_location__display_name
+#: model:ir.model.fields,field_description:intrastat_product.field_stock_warehouse__display_name
 msgid "Display Name"
-msgstr "Nombre mostrado"
+msgstr "Nombre a mostrar"
 
 #. module: intrastat_product
 #: model:ir.model.fields.selection,name:intrastat_product.selection__intrastat_product_declaration__state__done
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_form
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_search
 msgid "Done"
 msgstr "Hecho"
@@ -603,17 +610,22 @@
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__message_follower_ids
 msgid "Followers"
 msgstr "Seguidores"
 
 #. module: intrastat_product
+#: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__message_channel_ids
+msgid "Followers (Channels)"
+msgstr "Seguidores (Canales)"
+
+#. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__message_partner_ids
 msgid "Followers (Partners)"
-msgstr "Seguidores (Empresas)"
+msgstr "Seguidores (Contactos)"
 
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration__activity_type_icon
 msgid "Font awesome icon e.g. fa-tasks"
 msgstr "Icono de Font Awesome ej. fa-tasks"
 
 #. module: intrastat_product
@@ -668,28 +680,33 @@
 
 #. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.report_invoice_document_intrastat_product
 msgid "HS Code"
 msgstr "Código HS"
 
 #. module: intrastat_product
-#: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__has_message
-msgid "Has Message"
-msgstr "Tiene mensaje"
-
-#. module: intrastat_product
+#: model:ir.model.fields,field_description:intrastat_product.field_account_move__id
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move_intrastat_line__id
+#: model:ir.model.fields,field_description:intrastat_product.field_account_move_line__id
+#: model:ir.model.fields,field_description:intrastat_product.field_hs_code__id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_region__id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_result_view__id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_transaction__id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_transport_mode__id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_unit__id
+#: model:ir.model.fields,field_description:intrastat_product.field_report_intrastat_product_product_declaration_xls__id
+#: model:ir.model.fields,field_description:intrastat_product.field_res_company__id
+#: model:ir.model.fields,field_description:intrastat_product.field_res_config_settings__id
+#: model:ir.model.fields,field_description:intrastat_product.field_res_partner__id
+#: model:ir.model.fields,field_description:intrastat_product.field_sale_order__id
+#: model:ir.model.fields,field_description:intrastat_product.field_stock_location__id
+#: model:ir.model.fields,field_description:intrastat_product.field_stock_warehouse__id
 msgid "ID"
 msgstr "ID"
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__activity_exception_icon
 msgid "Icon"
 msgstr "Icono"
@@ -732,19 +749,14 @@
 
 #. module: intrastat_product
 #: model:intrastat.transport_mode,description:intrastat_product.intrastat_transport_8
 msgid "Inland waterway transport"
 msgstr "Transporte fluvial"
 
 #. module: intrastat_product
-#: model_terms:ir.ui.view,arch_db:intrastat_product.view_move_form
-msgid "Intrastat"
-msgstr "Intrastat"
-
-#. module: intrastat_product
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move_intrastat_line__hs_code_id
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move_line__hs_code_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__hs_code_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__hs_code_id
 #, python-format
 msgid "Intrastat Code"
@@ -760,15 +772,31 @@
 #: model:ir.model.fields,field_description:intrastat_product.field_account_bank_statement_line__intrastat
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move__intrastat
 #: model:ir.model.fields,field_description:intrastat_product.field_account_payment__intrastat
 #: model:ir.model.fields,field_description:intrastat_product.field_res_company__intrastat
 #: model:ir.model.fields,field_description:intrastat_product.field_res_config_settings__intrastat
 #: model:ir.model.fields,field_description:intrastat_product.field_sale_order__intrastat
 msgid "Intrastat Declaration"
-msgstr "Declaración Intrastat"
+msgstr "Declaración de producto Intrastat"
+
+#. module: intrastat_product
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_line_view_form
+msgid "Intrastat Declaration Line"
+msgstr "Línea de declaración Intrastat"
+
+#. module: intrastat_product
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_line_view_tree
+msgid "Intrastat Declaration Lines"
+msgstr "Líneas de declaración Intrastat"
+
+#. module: intrastat_product
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_graph
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_pivot
+msgid "Intrastat Product"
+msgstr "Buscar declaraciones de producto Intrastat españolas"
 
 #. module: intrastat_product
 #: model:ir.model,name:intrastat_product.model_intrastat_product_computation_line
 msgid "Intrastat Product Computataion Lines"
 msgstr "Líneas de cálculo de productos Intrastat"
 
 #. module: intrastat_product
@@ -783,27 +811,34 @@
 msgid "Intrastat Product Declaration"
 msgstr "Declaración de producto Intrastat"
 
 #. module: intrastat_product
 #: model:ir.model,name:intrastat_product.model_intrastat_product_declaration_line
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__declaration_line_ids
 msgid "Intrastat Product Declaration Lines"
-msgstr "Líneas de declaración de producto Intrastat"
+msgstr "Líneas de declaración Intrastat"
+
+#. module: intrastat_product
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_tree
+msgid "Intrastat Product Declarations"
+msgstr "Declaraciones de producto Intrastat"
 
 #. module: intrastat_product
 #: model:ir.model,name:intrastat_product.model_intrastat_product_declaration
 msgid "Intrastat Product Report Base Object"
 msgstr "Objeto base del informe de productos Intrastat"
 
 #. module: intrastat_product
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model,name:intrastat_product.model_intrastat_region
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__region_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__region_id
 #: model:ir.model.fields,field_description:intrastat_product.field_stock_warehouse__region_id
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_region_view_form
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_region_view_tree
 #, python-format
 msgid "Intrastat Region"
 msgstr "Región Intrastat"
 
 #. module: intrastat_product
 #: model:ir.actions.act_window,name:intrastat_product.intrastat_region_action
 #: model:ir.ui.menu,name:intrastat_product.intrastat_region_menu
@@ -815,50 +850,71 @@
 msgid "Intrastat Result View"
 msgstr "Vista de los resultados de Intrastat"
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_hs_code__intrastat_unit_id
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_computation_line__intrastat_unit_id
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration_line__intrastat_unit_id
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_unit_form
 msgid "Intrastat Supplementary Unit"
 msgstr "Unidad Suplementaria Intrastat"
 
 #. module: intrastat_product
 #: model:ir.model,name:intrastat_product.model_intrastat_unit
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_unit_tree
 msgid "Intrastat Supplementary Units"
 msgstr "Unidades suplementarias de Intrastat"
 
 #. module: intrastat_product
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model,name:intrastat_product.model_intrastat_transaction
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__transaction_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__transaction_id
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_computation_line_view_form
 #, python-format
 msgid "Intrastat Transaction"
 msgstr "Transacción Intrastat"
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_account_bank_statement_line__intrastat_transaction_id
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move__intrastat_transaction_id
 #: model:ir.model.fields,field_description:intrastat_product.field_account_payment__intrastat_transaction_id
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_transaction_form
 msgid "Intrastat Transaction Type"
 msgstr "Tipo de transacción Intrastat"
 
 #. module: intrastat_product
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_transaction_tree
+msgid "Intrastat Transaction Types"
+msgstr "Tipos de transacciones de Intrastat"
+
+#. module: intrastat_product
+#: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
+#, python-format
+msgid "Intrastat Transaction code"
+msgstr ""
+
+#. module: intrastat_product
 #: model:ir.model,name:intrastat_product.model_intrastat_transport_mode
 #: model:ir.model.fields,field_description:intrastat_product.field_account_bank_statement_line__intrastat_transport_id
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move__intrastat_transport_id
 #: model:ir.model.fields,field_description:intrastat_product.field_account_payment__intrastat_transport_id
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_transport_mode_form
 msgid "Intrastat Transport Mode"
 msgstr "Modo de transporte Intrastat"
 
 #. module: intrastat_product
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_transport_mode_tree
+msgid "Intrastat Transportat Modes"
+msgstr "Modos de transporte Intrastat"
+
+#. module: intrastat_product
 #: model:ir.model,name:intrastat_product.model_report_intrastat_product_product_declaration_xls
 msgid "Intrastat declaration"
-msgstr "Declaración Intrastat"
+msgstr "Declaración de producto Intrastat"
 
 #. module: intrastat_product
 #: model:ir.model,name:intrastat_product.model_account_move_intrastat_line
 #: model:ir.model.fields,field_description:intrastat_product.field_account_bank_statement_line__intrastat_line_ids
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move__intrastat_line_ids
 #: model:ir.model.fields,field_description:intrastat_product.field_account_payment__intrastat_line_ids
 msgid "Intrastat declaration details"
@@ -897,31 +953,31 @@
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move_intrastat_line__move_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__invoice_id
 #, python-format
 msgid "Invoice"
 msgstr "Factura"
 
 #. module: intrastat_product
+#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
+#, python-format
+msgid "Invoice %s, line %s"
+msgstr "Factura %s, línea %s"
+
+#. module: intrastat_product
 #: model:res.groups,name:intrastat_product.group_invoice_intrastat_transaction_details
 msgid "Invoice Intrastat Transaction Details"
 msgstr "Detalles de la transacción de Intrastat de la factura"
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move_intrastat_line__invoice_line_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__invoice_line_id
 msgid "Invoice Line"
 msgstr "Línea de factura"
 
 #. module: intrastat_product
-#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
-#, python-format
-msgid "Invoice {invoice}, line {line}"
-msgstr "Factura {invoice}, línea {line}"
-
-#. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__message_is_follower
 msgid "Is Follower"
 msgstr "Es seguidor"
 
 #. module: intrastat_product
 #: model:ir.model,name:intrastat_product.model_account_move
 msgid "Journal Entry"
@@ -935,38 +991,48 @@
 #. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_computation_line_view_form
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_line_view_form
 msgid "Kg"
 msgstr "Kg"
 
 #. module: intrastat_product
+#: model:ir.model.fields,field_description:intrastat_product.field_account_move____last_update
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move_intrastat_line____last_update
+#: model:ir.model.fields,field_description:intrastat_product.field_account_move_line____last_update
+#: model:ir.model.fields,field_description:intrastat_product.field_hs_code____last_update
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line____last_update
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration____last_update
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line____last_update
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_region____last_update
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_result_view____last_update
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_transaction____last_update
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_transport_mode____last_update
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_unit____last_update
+#: model:ir.model.fields,field_description:intrastat_product.field_report_intrastat_product_product_declaration_xls____last_update
+#: model:ir.model.fields,field_description:intrastat_product.field_res_company____last_update
+#: model:ir.model.fields,field_description:intrastat_product.field_res_config_settings____last_update
+#: model:ir.model.fields,field_description:intrastat_product.field_res_partner____last_update
+#: model:ir.model.fields,field_description:intrastat_product.field_sale_order____last_update
+#: model:ir.model.fields,field_description:intrastat_product.field_stock_location____last_update
+#: model:ir.model.fields,field_description:intrastat_product.field_stock_warehouse____last_update
 msgid "Last Modified on"
-msgstr "Última modificación en"
+msgstr "Última modificación el"
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move_intrastat_line__write_uid
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__write_uid
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__write_uid
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__write_uid
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_region__write_uid
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_result_view__write_uid
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_transaction__write_uid
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_transport_mode__write_uid
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_unit__write_uid
 msgid "Last Updated by"
-msgstr "Última modificación por"
+msgstr "Últ. actualización por"
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move_intrastat_line__write_date
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__write_date
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__write_date
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__write_date
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_region__write_date
@@ -981,15 +1047,15 @@
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__message_main_attachment_id
 msgid "Main Attachment"
 msgstr "Adjunto principal"
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__message_has_error
 msgid "Message Delivery error"
-msgstr "Error de Envío de Mensaje"
+msgstr "Mensaje de error de entrega"
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__message_ids
 msgid "Messages"
 msgstr "Mensajes"
 
 #. module: intrastat_product
@@ -1004,19 +1070,19 @@
 msgid "Missing VAT Number on partner '%s'"
 msgstr "Falta el NIF del contacto '%s'"
 
 #. module: intrastat_product
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid ""
-"Missing country on invoice partner '{invoice_partner}' or on the delivery "
-"address (partner '{delivery_partner}'). "
+"Missing country on invoice partner '%s' or on the delivery address (partner "
+"'%s'). "
 msgstr ""
-"Falta el país en el contacto de la factura '{invoice_partner}' o en la "
-"dirección de entrega (contacto '{delivery_partner}'). "
+"Falta el país en el contacto de la factura '%s' o en la dirección de entrega "
+"(socio '%s'). "
 
 #. module: intrastat_product
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid "Missing unit of measure."
 msgstr "Falta la unidad de medida."
 
@@ -1075,15 +1141,15 @@
 msgid "Nihil"
 msgstr "Nada"
 
 #. module: intrastat_product
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #, python-format
 msgid "No"
-msgstr "No"
+msgstr ""
 
 #. module: intrastat_product
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid "No XML File has been generated."
 msgstr "No se ha generado un fichero XML."
 
@@ -1114,73 +1180,71 @@
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__message_has_error_counter
 msgid "Number of errors"
 msgstr "Número de errores"
 
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration__message_needaction_counter
 msgid "Number of messages which requires an action"
-msgstr "Número de mensajes que requieren una acción"
+msgstr "Nº de mensajes que requieren acción"
 
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration__message_has_error_counter
 msgid "Number of messages with delivery error"
-msgstr "Número de mensajes con error de envío"
+msgstr "Nº de mensajes con error de entrega"
 
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration__message_unread_counter
 msgid "Number of unread messages"
-msgstr "Número de mensajes no leidos"
+msgstr "Número de mensajes no leídos"
 
 #. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_result_view_form
 msgid "Ok"
 msgstr "OK"
 
 #. module: intrastat_product
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid ""
-"On invoice '{invoice}', the source/destination country is '{country}' which "
-"is not part of the European Union."
+"On invoice '%s', the source/destination country is '%s' which is not part of "
+"the European Union."
 msgstr ""
-"En la factura '{invoice}', el país de origen/destino es '{country}', que no "
-"forma parte de la Unión Europea."
+"En la factura \"%s\", el país de origen/destino es \"%s\", que no forma "
+"parte de la Unión Europea."
 
 #. module: intrastat_product
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid ""
-"On invoice '{invoice}', the source/destination country is United-Kingdom and "
-"the fiscal position is '{fp}'. Make sure that the fiscal position is right. "
-"If the origin/destination is Northern Ireland, please set the VAT number of "
-"the partner '{partner}' in Odoo with its new VAT number starting with 'XI' "
-"following Brexit."
-msgstr ""
-"En la factura '{invoice}', el país de origen/destino es Reino Unido y la "
-"posición fiscal es '{fp}'. Asegúrese de que la posición fiscal es correcta. "
-"Si el origen/destino es Irlanda del Norte, por favor, establezca el NIF del "
-"contacto '{partner}' en Odoo con su nuevo NIF que comienza con 'XI' tras el "
+"On invoice '%s', the source/destination country is United-Kingdom and the "
+"fiscal position is '%s'. Make sure that the fiscal position is right. If the "
+"origin/destination is Northern Ireland, please set the VAT number of the "
+"partner '%s' in Odoo with its new VAT number starting with 'XI' following "
 "Brexit."
+msgstr ""
+"En la factura \"%s\", el país de origen/destino es Reino Unido y la posición "
+"fiscal es \"%s\". Asegúrese de que la posición fiscal es correcta. Si el "
+"origen/destino es Irlanda del Norte, establezca el NIF del contacto '%s' en "
+"Odoo con su nuevo NIF que empieza por 'XI' tras el Brexit."
 
 #. module: intrastat_product
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid ""
-"On invoice '{invoice}', the source/destination country is United-Kingdom, "
-"the fiscal position is '{fp}' and the partner's VAT number is "
-"'{partner_vat}'. Make sure that the fiscal position is right. If the origin/"
-"destination is Northern Ireland, please update the VAT number of the partner "
-"'{partner}' in Odoo with its new VAT number starting with 'XI' following "
-"Brexit."
+"On invoice '%s', the source/destination country is United-Kingdom, the "
+"fiscal position is '%s' and the partner's VAT number is '%s'. Make sure that "
+"the fiscal position is right. If the origin/destination is Northern Ireland, "
+"please update the VAT number of the partner '%s' in Odoo with its new VAT "
+"number starting with 'XI' following Brexit."
 msgstr ""
-"En la factura '{invoice}', el país de origen/destino es Reino Unido, la "
-"posición fiscal es '{fp}' y el NIF del contacto es '{partner_vat}'. "
-"Asegúrese de que la posición fiscal es correcta. Si el origen/destino es "
-"Irlanda del Norte, actualice el NIF del contacto '{partner}' en Odoo con su "
-"nuevo NIF que empieza por 'XI' tras el Brexit."
+"En la factura \"%s\", el país de origen/destino es Reino Unido, la posición "
+"fiscal es \"%s\" y el NIF del contacto es \"%s\". Asegúrese de que la "
+"posición fiscal es correcta. Si el origen/destino es Irlanda del Norte, "
+"actualice el NIF del contacto '%s' en Odoo con su nuevo NIF que empieza por "
+"'XI' tras el Brexit."
 
 #. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.view_move_form
 msgid "Origin Region"
 msgstr "Region de origen"
 
 #. module: intrastat_product
@@ -1269,14 +1333,20 @@
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_computation_line_view_tree
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_line_view_tree
 #, python-format
 msgid "Product C/O"
 msgstr "Product C/O"
 
 #. module: intrastat_product
+#: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
+#, python-format
+msgid "Product C/O Code"
+msgstr ""
+
+#. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move_intrastat_line__quantity
 msgid "Quantity"
 msgstr "Cantidad"
 
 #. module: intrastat_product
 #: model:intrastat.transport_mode,name:intrastat_product.intrastat_transport_2
 msgid "Rail"
@@ -1357,14 +1427,34 @@
 "Sea Transport (including wagons, motor vehicles, trailers, semi-trailers and "
 "lighters on board of a ship)"
 msgstr ""
 "Transporte marítimo (incluidos vagones, vehículos de motor, remolques, "
 "semirremolques y encendedores a bordo de un barco)"
 
 #. module: intrastat_product
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_search
+msgid "Search Intrastat Product Declarations"
+msgstr "Buscar declaraciones de productos Intrastat"
+
+#. module: intrastat_product
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_unit_search
+msgid "Search Intrastat Supplementary Units"
+msgstr "Buscar unidades suplementarias en Intrastat"
+
+#. module: intrastat_product
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_transaction_mode_search
+msgid "Search Intrastat Transaction Types"
+msgstr "Buscar tipos de transacciones de Intrastat"
+
+#. module: intrastat_product
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_transport_mode_search
+msgid "Search Intrastat Transport Modes"
+msgstr "Search Intrastat Transport Modes"
+
+#. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_unit__uom_id
 msgid ""
 "Select the regular Unit of Measure of Odoo that corresponds to this "
 "Intrastat Supplementary Unit."
 msgstr ""
 "Seleccione la Unidad de medida regular de Odoo que corresponda a esta Unidad "
 "suplementaria Intrastat."
@@ -1404,18 +1494,18 @@
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration__activity_state
 msgid ""
 "Status based on activities\n"
 "Overdue: Due date is already passed\n"
 "Today: Activity date is today\n"
 "Planned: Future activities."
 msgstr ""
-"Estado basado en actividades\n"
-"Vencida: la fecha tope ya ha pasado\n"
-"Hoy: La fecha tope es hoy\n"
-"Planificada: futuras actividades."
+"Estado basado en las actividades\n"
+"Atrasado: La fecha de vencimiento ya está vencida\n"
+"Hoy: La fecha de la actividad es hoy\n"
+"Planificado: Actividades futuras."
 
 #. module: intrastat_product
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__intrastat_unit_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__intrastat_unit_id
 #, python-format
 msgid "Suppl. Unit"
@@ -1429,15 +1519,15 @@
 msgid "Suppl. Unit Qty"
 msgstr "Ctd. unid. supl"
 
 #. module: intrastat_product
 #: model:ir.actions.act_window,name:intrastat_product.intrastat_unit_action
 #: model:ir.ui.menu,name:intrastat_product.intrastat_unit_menu
 msgid "Supplementary Units"
-msgstr "Unidades suplementarias"
+msgstr "Cantidad de unidades suplementarias"
 
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_computation_line__suppl_unit_qty
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration_line__suppl_unit_qty
 msgid "Supplementary Units Quantity"
 msgstr "Cantidad de unidades suplementarias"
 
@@ -1500,14 +1590,19 @@
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__total_amount
 msgid "Total Fiscal Amount"
 msgstr "Importe fiscal total"
 
 #. module: intrastat_product
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_tree
+msgid "Total amount"
+msgstr "Importe Total"
+
+#. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration__total_amount
 msgid "Total fiscal amount in company currency of the declaration."
 msgstr "Importe fiscal total de la declaración en la moneda de la compañía."
 
 #. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_computation_line_view_form
 msgid "Transaction"
@@ -1536,28 +1631,35 @@
 
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_account_move_intrastat_line__transaction_weight
 msgid "Transaction weight in Kg: Quantity x Product Weight"
 msgstr "Peso de la transacción en Kg: Cantidad x Peso del producto"
 
 #. module: intrastat_product
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_computation_line_view_tree
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_form
 msgid "Transactions"
 msgstr "Transacciones"
 
 #. module: intrastat_product
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__transport_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__transport_id
 #: model:ir.model.fields,field_description:intrastat_product.field_sale_order__intrastat_transport_id
 #, python-format
 msgid "Transport Mode"
 msgstr "Modo de transporte"
 
 #. module: intrastat_product
+#: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
+#, python-format
+msgid "Transport Mode Code"
+msgstr ""
+
+#. module: intrastat_product
 #: model:ir.actions.act_window,name:intrastat_product.intrastat_transport_action
 #: model:ir.ui.menu,name:intrastat_product.intrastat_transport_menu
 msgid "Transport Modes"
 msgstr "Modos de transporte"
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__declaration_type
@@ -1566,15 +1668,15 @@
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_search
 msgid "Type"
 msgstr "Tipo"
 
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration__activity_exception_decoration
 msgid "Type of the exception activity on record."
-msgstr "Tipo de actividad de excepción en registro."
+msgstr ""
 
 #. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.report_invoice_document_intrastat_product
 msgid "Unit Weight"
 msgstr "Peso unitario"
 
 #. module: intrastat_product
@@ -1604,25 +1706,23 @@
 msgid "VAT Number"
 msgstr "Número NIF"
 
 #. module: intrastat_product
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid ""
-"VAT number of partner %(partner)s is %(partner_vat)s. If this partner is "
-"from Northern Ireland, his VAT number should be updated to his new VAT "
-"number starting with 'XI' following Brexit. If this partner is from Great "
-"Britain, maybe the fiscal position was wrong on invoice %(invoice)s (the "
-"fiscal position was %(fp)s)."
-msgstr ""
-"El NIF del contacto %(partner)s es %(partner_vat)s. Si este contacto es de "
-"Irlanda del Norte, su NIF debe actualizarse a su nuevo NIF que empieza por "
-"\"XI\" tras el Brexit. Si este contacto es de Gran Bretaña, quizás la "
-"posición fiscal era errónea en la factura %(invoice)s (la posición fiscal "
-"era %(fp)s)."
+"VAT number of partner '%s' is '%s'. If this partner is from Northern "
+"Ireland, his VAT number should be updated to his new VAT number starting "
+"with 'XI' following Brexit. If this partner is from Great Britain, maybe the "
+"fiscal position was wrong on invoice '%s' (the fiscal position was '%s')."
+msgstr ""
+"El NIF del contacto \"%s\" es \"%s\". Si este contacto es de Irlanda del "
+"Norte, su NIF debe actualizarse a su nuevo NIF que empieza por \"XI\" tras "
+"el Brexit. Si este contacto es de Gran Bretaña, tal vez la posición fiscal "
+"era errónea en la factura '%s' (la posición fiscal era '%s')."
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__valid
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__valid
 msgid "Valid"
 msgstr "Válido"
 
@@ -1630,20 +1730,20 @@
 #: model:ir.model,name:intrastat_product.model_stock_warehouse
 msgid "Warehouse"
 msgstr "Almacén"
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__website_message_ids
 msgid "Website Messages"
-msgstr "Mensajes del sitio wew"
+msgstr "Mensajes del sitio web"
 
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration__website_message_ids
 msgid "Website communication history"
-msgstr "Historial de comunicaciones del sitio web"
+msgstr "Historial de comunicación del sitio web"
 
 #. module: intrastat_product
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__weight
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__weight
 #: model_terms:ir.ui.view,arch_db:intrastat_product.report_invoice_document_intrastat_product
 #, python-format
@@ -1680,14 +1780,14 @@
 msgid "You can add some comments here if you want."
 msgstr "Puede añadir algunos comentarios aquí si lo prefiere."
 
 #. module: intrastat_product
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid "You must set company's country !"
-msgstr "¡Debe establecer el país de la comapñía!"
+msgstr "¡Debe establecer el país de la compañía!"
 
 #. module: intrastat_product
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #, python-format
 msgid "for period %s"
 msgstr "para periodo %s"
```

## odoo/addons/intrastat_product/i18n/fr.po

```diff
@@ -872,14 +872,20 @@
 
 #. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_transaction_tree
 msgid "Intrastat Transaction Types"
 msgstr "Types de transaction DEB"
 
 #. module: intrastat_product
+#: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
+#, python-format
+msgid "Intrastat Transaction code"
+msgstr ""
+
+#. module: intrastat_product
 #: model:ir.model,name:intrastat_product.model_intrastat_transport_mode
 #: model:ir.model.fields,field_description:intrastat_product.field_account_bank_statement_line__intrastat_transport_id
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move__intrastat_transport_id
 #: model:ir.model.fields,field_description:intrastat_product.field_account_payment__intrastat_transport_id
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_transport_mode_form
 msgid "Intrastat Transport Mode"
 msgstr "Mode de transport pour la DEB"
@@ -1303,14 +1309,20 @@
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_computation_line_view_tree
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_line_view_tree
 #, python-format
 msgid "Product C/O"
 msgstr "Pays ori. article"
 
 #. module: intrastat_product
+#: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
+#, python-format
+msgid "Product C/O Code"
+msgstr ""
+
+#. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move_intrastat_line__quantity
 msgid "Quantity"
 msgstr "Quantité"
 
 #. module: intrastat_product
 #: model:intrastat.transport_mode,name:intrastat_product.intrastat_transport_2
 msgid "Rail"
@@ -1603,14 +1615,20 @@
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__transport_id
 #: model:ir.model.fields,field_description:intrastat_product.field_sale_order__intrastat_transport_id
 #, python-format
 msgid "Transport Mode"
 msgstr "Mode de transport"
 
 #. module: intrastat_product
+#: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
+#, python-format
+msgid "Transport Mode Code"
+msgstr ""
+
+#. module: intrastat_product
 #: model:ir.actions.act_window,name:intrastat_product.intrastat_transport_action
 #: model:ir.ui.menu,name:intrastat_product.intrastat_transport_menu
 msgid "Transport Modes"
 msgstr "Modes de transport"
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__declaration_type
@@ -1735,7 +1753,97 @@
 msgstr "Vous devez configurer le pays de la société !"
 
 #. module: intrastat_product
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #, python-format
 msgid "for period %s"
 msgstr ""
+
+#~ msgid "Invalid Year !"
+#~ msgstr "Année invalide !"
+
+#~ msgid "Used in views and methods of localization modules."
+#~ msgstr "Used in views and methods of localization modules."
+
+#, fuzzy
+#~ msgid "Company Country code"
+#~ msgstr "Code pays de la société"
+
+#~ msgid ""
+#~ "Intrastat Codes should contain 8 digits. This is not the case for "
+#~ "Intrastat Code '%s' which has %d digits."
+#~ msgstr ""
+#~ "Les codes pour la DEB doivent être composés de 8 chiffres. Ce n'est pas "
+#~ "le cas du code pour la DEB '%s' qui compte %d chiffres."
+
+#~ msgid ""
+#~ "Intrastat Codes should only contain digits. This is not the case for code "
+#~ "'%s'."
+#~ msgstr ""
+#~ "Les codes pour la DEB ne doivent contenir que des chiffres. Ce n'est pas "
+#~ "le cas du code '%s'."
+
+#~ msgid "Intrastat Country"
+#~ msgstr "Pays pour la DEB"
+
+#~ msgid "Journal Entries"
+#~ msgstr "Écritures comptables"
+
+#~ msgid "Select the declaration type."
+#~ msgstr "Sélectionnez le type de déclaration."
+
+#~ msgid ""
+#~ "Missing H.S. code on product %s. This product is present in invoice %s."
+#~ msgstr ""
+#~ "Code S.H. manquant sur l'article %s. Cet article est présent sur la "
+#~ "facture %s."
+
+#~ msgid ""
+#~ "Missing unit of measure on the line with %d product(s) '%s' on invoice "
+#~ "'%s'."
+#~ msgstr ""
+#~ "Unité de mesure manquante sur la ligne où figurent %d article(s) '%s' sur "
+#~ "la facture '%s'."
+
+#~ msgid "Please adjust this line manually."
+#~ msgstr "Ligne à finaliser manuellement."
+
+#~ msgid ""
+#~ "Please correct the Intrastat Supplementary Unit settings and regenerate "
+#~ "the lines or adjust the lines with Intrastat Code '%s' manually"
+#~ msgstr ""
+#~ "Corrigez le paramétrage de l'unité de mesure supplémentaire pour la DEB "
+#~ "et regénérez les lignes ou ajustez manuellement les lignes avec le code "
+#~ "pour la DEB '%s'"
+
+#~ msgid ""
+#~ "Please correct the product record and regenerate the lines or adjust the "
+#~ "impacted lines manually"
+#~ msgstr ""
+#~ "Corrigez le paramétrage de l'article et regénérez les lignes ou ajustez "
+#~ "manuellement les lignes concernées."
+
+#~ msgid ""
+#~ "Please correct the unit of measure settings and regenerate the lines or "
+#~ "adjust the impacted lines manually"
+#~ msgstr ""
+#~ "Corrigez le paramétrage de l'unité de mesure et regénérez les lignes ou "
+#~ "ajustez manuellement les lignes concernées"
+
+#~ msgid "Default Incoterm for Intrastat"
+#~ msgstr "Incoterm par défaut pour la DEB"
+
+#~ msgid "Destination Region"
+#~ msgstr "Région destination"
+
+#~ msgid ""
+#~ "International Commercial Terms are a series of predefined commercial "
+#~ "terms used in international transactions."
+#~ msgstr ""
+#~ "Les Incoterms sont une série de termes commerciaux prédéfinie utilisés "
+#~ "dans les transactions internationales."
+
+#~ msgid "Origin Country"
+#~ msgstr "Pays d'origine"
+
+#~ msgid "Quotation"
+#~ msgstr "Devis"
```

## odoo/addons/intrastat_product/i18n/intrastat_product.pot

```diff
@@ -1,23 +1,37 @@
 # Translation of Odoo Server.
 # This file contains the translation of the following modules:
 # 	* intrastat_product
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: Odoo Server 15.0\n"
+"Project-Id-Version: Odoo Server 16.0\n"
 "Report-Msgid-Bugs-To: \n"
 "Last-Translator: \n"
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
 
 #. module: intrastat_product
+#. odoo-python
+#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
+#, python-format
+msgid "%(invoice)s line %(line_nbr)s"
+msgstr ""
+
+#. module: intrastat_product
+#: model:ir.actions.report,print_report_name:intrastat_product.intrastat_product_xlsx_report
+msgid ""
+"'intrastat-%s-%s%s' % (object.year_month, object.declaration_type, "
+"object.state == 'draft' and '-draft' or '')"
+msgstr ""
+
+#. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.view_move_form
 msgid ""
 "(Re)compute the intrastat transaction details from the product master data."
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields.selection,name:intrastat_product.selection__intrastat_product_declaration__month__01
@@ -76,16 +90,21 @@
 
 #. module: intrastat_product
 #: model:ir.model.fields.selection,name:intrastat_product.selection__intrastat_product_declaration__month__12
 msgid "12"
 msgstr ""
 
 #. module: intrastat_product
-#: model:ir.model.fields,help:intrastat_product.field_account_move_intrastat_line__product_origin_country_code
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_computation_line__product_origin_country_code
+msgid ""
+"2 digit ISO code of the country of origin of the product.\n"
+"Specify 'QU' when the country of origin is unknown.\n"
+msgstr ""
+
+#. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration_line__product_origin_country_code
 msgid ""
 "2 digit code of country of origin of the product except for the UK.\n"
 "Specify 'XI' for UK Northern Ireland and 'XU' for rest of the UK.\n"
 "Specify 'QU' when the country is unknown.\n"
 msgstr ""
 
@@ -112,14 +131,15 @@
 #: model:ir.model.constraint,message:intrastat_product.constraint_intrastat_product_declaration_date_uniq
 msgid ""
 "A declaration of the same type already exists for this month !\n"
 "You should update the existing declaration or change the revision number of this one."
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__amount_accessory_cost_company_currency
 #, python-format
 msgid "Accessory Costs"
 msgstr ""
 
 #. module: intrastat_product
@@ -187,57 +207,63 @@
 msgid ""
 "Amount in company currency to write in the declaration. Amount in company "
 "currency = amount in invoice currency converted to company currency with the"
 " rate of the invoice date."
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid ""
 "An XML Export already exists for %s. To re-generate it, you must first "
 "delete it."
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid "Append"
 msgstr ""
 
 #. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_transaction_form
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_transaction_mode_search
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_unit_search
 msgid "Archived"
 msgstr ""
 
 #. module: intrastat_product
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_form
+msgid "Are you sure you want to go back to draft?"
+msgstr ""
+
+#. module: intrastat_product
+#. odoo-python
+#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #: model:ir.model.fields,field_description:intrastat_product.field_res_company__intrastat_arrivals
 #: model:ir.model.fields,field_description:intrastat_product.field_res_config_settings__intrastat_arrivals
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_search
+#, python-format
 msgid "Arrivals"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__message_attachment_count
 msgid "Attachment Count"
 msgstr ""
 
 #. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_form
 msgid "Back to Draft"
 msgstr ""
 
 #. module: intrastat_product
-#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
-#, python-format
-msgid "Before going back to draft, you must delete the XML export."
-msgstr ""
-
-#. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid "Cannot delete the declaration %s because it is in Done state."
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_region__code
@@ -270,25 +296,28 @@
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_region__company_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_transaction__company_id
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_transaction_mode_search
 msgid "Company"
 msgstr ""
 
 #. module: intrastat_product
+#: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__company_country_code
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__company_country_code
+#: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__company_country_code
 msgid "Company Country Code"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__company_currency_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__company_currency_id
 msgid "Company currency"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__computation_line_ids
 #, python-format
 msgid "Computation Lines"
 msgstr ""
 
@@ -299,81 +328,87 @@
 
 #. module: intrastat_product
 #: model:ir.model,name:intrastat_product.model_res_config_settings
 msgid "Config Settings"
 msgstr ""
 
 #. module: intrastat_product
-#: model:ir.model,name:intrastat_product.model_res_partner
-msgid "Contact"
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_form
+msgid "Confirm"
 msgstr ""
 
 #. module: intrastat_product
-#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
-#, python-format
-msgid ""
-"Conversion from Intrastat Supplementary Unit '%s' to Unit of Measure is not "
-"implemented yet."
+#: model:ir.model,name:intrastat_product.model_res_partner
+msgid "Contact"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid ""
-"Conversion from unit of measure %(src_uom)s to %(dest_uom)s is not "
-"implemented."
+"Conversion from unit of measure <em>%(source_uom)s</em> to "
+"<em>%(target_uom)s</em>, which is configured on the intrastat supplementary "
+"unit <i>%(intrastat_unit)s</i> of H.S. code <i>%(hs_code)s</i>, is not "
+"implemented yet"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid ""
-"Conversion from unit of measure %(uom)s to 'Kg' is not implemented. It is "
-"needed for product %(product)s."
+"Conversion from unit of measure <em>%(source_uom)s</em> to <em>Kg</em> "
+"cannot be done automatically. It is needed for product <i>%(product)s</i> "
+"whose unit of measure is <i>%(product_uom)s</i>"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__src_dest_country_id
-#: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__src_dest_country_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_region__country_id
 #: model:ir.model.fields,field_description:intrastat_product.field_res_config_settings__country_id
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_region_view_search
 msgid "Country"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__src_dest_country_code
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__src_dest_country_code
 msgid "Country Code"
 msgstr ""
 
 #. module: intrastat_product
-#: model:ir.model.fields,field_description:intrastat_product.field_account_move_intrastat_line__product_origin_country_id
-msgid "Country of Origin"
+#: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__product_origin_country_code
+msgid "Country Code of Origin of the Product"
 msgstr ""
 
 #. module: intrastat_product
-#: model:ir.model.fields,field_description:intrastat_product.field_account_move_intrastat_line__product_origin_country_code
-#: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__product_origin_country_code
+#. odoo-python
+#: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
+#, python-format
+msgid "Country Code of Origin/Destination"
+msgstr ""
+
+#. module: intrastat_product
+#: model:ir.model.fields,field_description:intrastat_product.field_account_move_intrastat_line__product_origin_country_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__product_origin_country_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__product_origin_country_code
-#: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__product_origin_country_id
 msgid "Country of Origin of the Product"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_computation_line__src_dest_country_id
-#: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration_line__src_dest_country_id
 #, python-format
 msgid "Country of Origin/Destination"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_computation_line__product_origin_country_id
-#: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration_line__product_origin_country_id
 msgid "Country of origin of the product i.e. product 'made in ____'"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_account_move_intrastat_line__product_origin_country_id
 msgid "Country of origin of the product i.e. product 'made in ____'."
 msgstr ""
@@ -421,75 +456,35 @@
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__declaration_line_id
 msgid "Declaration Line"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_form
 #, python-format
 msgid "Declaration Lines"
 msgstr ""
 
 #. module: intrastat_product
-#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
-#, python-format
-msgid "Declaration for Arrivals"
-msgstr ""
-
-#. module: intrastat_product
-#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
-#, python-format
-msgid "Declaration for Dispatches"
-msgstr ""
-
-#. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_res_company__intrastat_region_id
 #: model:ir.model.fields,field_description:intrastat_product.field_res_config_settings__intrastat_region_id
 msgid "Default Intrastat Region"
 msgstr ""
 
 #. module: intrastat_product
-#: model:ir.model.fields,field_description:intrastat_product.field_res_company__intrastat_transaction_out_invoice
-#: model:ir.model.fields,field_description:intrastat_product.field_res_config_settings__intrastat_transaction_out_invoice
-msgid "Default Intrastat Transaction For Customer Invoice"
-msgstr ""
-
-#. module: intrastat_product
-#: model:ir.model.fields,field_description:intrastat_product.field_res_company__intrastat_transaction_in_invoice
-#: model:ir.model.fields,field_description:intrastat_product.field_res_config_settings__intrastat_transaction_in_invoice
-msgid "Default Intrastat Transaction For Supplier Invoices"
-msgstr ""
-
-#. module: intrastat_product
-#: model:ir.model.fields,field_description:intrastat_product.field_res_company__intrastat_transaction_in_refund
-#: model:ir.model.fields,field_description:intrastat_product.field_res_config_settings__intrastat_transaction_in_refund
-msgid "Default Intrastat Transaction For Supplier Refunds"
-msgstr ""
-
-#. module: intrastat_product
-#: model:ir.model.fields,field_description:intrastat_product.field_res_company__intrastat_transaction_out_refund
-#: model:ir.model.fields,field_description:intrastat_product.field_res_config_settings__intrastat_transaction_out_refund
-msgid "Default Intrastat Transaction for Customer Refunds"
-msgstr ""
-
-#. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_res_company__intrastat_transport_id
 #: model:ir.model.fields,field_description:intrastat_product.field_res_config_settings__intrastat_transport_id
 msgid "Default Transport Mode"
 msgstr ""
 
 #. module: intrastat_product
-#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_form
-msgid "Delete XML Export"
-msgstr ""
-
-#. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_region__description
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_transaction__description
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_transport_mode__description
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_unit__description
 msgid "Description"
 msgstr ""
 
@@ -502,17 +497,20 @@
 #: model:ir.model.fields,help:intrastat_product.field_account_bank_statement_line__src_dest_country_id
 #: model:ir.model.fields,help:intrastat_product.field_account_move__src_dest_country_id
 #: model:ir.model.fields,help:intrastat_product.field_account_payment__src_dest_country_id
 msgid "Destination country for dispatches. Origin country for arrivals."
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
+#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #: model:ir.model.fields,field_description:intrastat_product.field_res_company__intrastat_dispatches
 #: model:ir.model.fields,field_description:intrastat_product.field_res_config_settings__intrastat_dispatches
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_search
+#, python-format
 msgid "Dispatches"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move_intrastat_line__display_name
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__display_name
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__display_name
@@ -523,37 +521,39 @@
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_transport_mode__display_name
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_unit__display_name
 msgid "Display Name"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields.selection,name:intrastat_product.selection__intrastat_product_declaration__state__done
-#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_form
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_search
 msgid "Done"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields.selection,name:intrastat_product.selection__intrastat_product_declaration__state__draft
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_search
 msgid "Draft"
 msgstr ""
 
 #. module: intrastat_product
+#: model:ir.actions.report,name:intrastat_product.intrastat_product_xlsx_report
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_form
 msgid "Excel Export"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid "Extended"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__amount_company_currency
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__amount_company_currency
 #, python-format
 msgid "Fiscal Value"
 msgstr ""
 
@@ -579,41 +579,44 @@
 
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration__activity_type_icon
 msgid "Font awesome icon e.g. fa-tasks"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_form
 #, python-format
-msgid "Generate Declaration Lines"
+msgid "Generate Lines from Invoices"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
-#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_form
 #, python-format
-msgid "Generate Lines from Invoices"
+msgid "Generate XML Declaration File"
 msgstr ""
 
 #. module: intrastat_product
-#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_form
-#, python-format
-msgid "Generate XML Declaration File"
+msgid ""
+"Generate declaration lines, generate XML export and set declaration to "
+"'Done'"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid "Generate lines from invoices: results"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid "Go to Accounting Configuration Settings screen"
 msgstr ""
 
 #. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_search
@@ -663,15 +666,14 @@
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration__activity_exception_icon
 msgid "Icon to indicate an exception activity."
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration__message_needaction
-#: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration__message_unread
 msgid "If checked, new messages require your attention."
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration__message_has_error
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration__message_has_sms_error
 msgid "If checked, some messages have a delivery error."
@@ -680,14 +682,15 @@
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_res_company__intrastat_accessory_costs
 #: model:ir.model.fields,field_description:intrastat_product.field_res_config_settings__intrastat_accessory_costs
 msgid "Include Accessory Costs in Fiscal Value of Product"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__incoterm_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__incoterm_id
 #, python-format
 msgid "Incoterm"
 msgstr ""
 
@@ -698,58 +701,61 @@
 
 #. module: intrastat_product
 #: model:intrastat.transport_mode,description:intrastat_product.intrastat_transport_8
 msgid "Inland waterway transport"
 msgstr ""
 
 #. module: intrastat_product
-#: model_terms:ir.ui.view,arch_db:intrastat_product.view_move_form
-msgid "Intrastat"
-msgstr ""
-
-#. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move_intrastat_line__hs_code_id
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move_line__hs_code_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__hs_code_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__hs_code_id
 #, python-format
 msgid "Intrastat Code"
 msgstr ""
 
 #. module: intrastat_product
-#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
-#, python-format
-msgid "Intrastat Code %s:"
-msgstr ""
-
-#. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_account_bank_statement_line__intrastat
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move__intrastat
 #: model:ir.model.fields,field_description:intrastat_product.field_account_payment__intrastat
 #: model:ir.model.fields,field_description:intrastat_product.field_res_company__intrastat
 #: model:ir.model.fields,field_description:intrastat_product.field_res_config_settings__intrastat
 #: model:ir.model.fields,field_description:intrastat_product.field_sale_order__intrastat
 msgid "Intrastat Declaration"
 msgstr ""
 
 #. module: intrastat_product
+#: model:ir.model.fields,field_description:intrastat_product.field_account_bank_statement_line__intrastat_line_ids
+#: model:ir.model.fields,field_description:intrastat_product.field_account_move__intrastat_line_ids
+#: model:ir.model.fields,field_description:intrastat_product.field_account_payment__intrastat_line_ids
+msgid "Intrastat Declaration Details"
+msgstr ""
+
+#. module: intrastat_product
+#: model:ir.model.fields,help:intrastat_product.field_account_bank_statement_line__intrastat_transaction_id
+#: model:ir.model.fields,help:intrastat_product.field_account_move__intrastat_transaction_id
+#: model:ir.model.fields,help:intrastat_product.field_account_payment__intrastat_transaction_id
+msgid "Intrastat Nature of Transaction"
+msgstr ""
+
+#. module: intrastat_product
 #: model:ir.model,name:intrastat_product.model_intrastat_product_computation_line
 msgid "Intrastat Product Computataion Lines"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__computation_line_ids
 msgid "Intrastat Product Computation Lines"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__parent_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__parent_id
-#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_form
 msgid "Intrastat Product Declaration"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model,name:intrastat_product.model_intrastat_product_declaration_line
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__declaration_line_ids
 msgid "Intrastat Product Declaration Lines"
@@ -757,24 +763,31 @@
 
 #. module: intrastat_product
 #: model:ir.model,name:intrastat_product.model_intrastat_product_declaration
 msgid "Intrastat Product Report Base Object"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model,name:intrastat_product.model_intrastat_region
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__region_id
-#: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__region_id
 #: model:ir.model.fields,field_description:intrastat_product.field_stock_warehouse__region_id
 #, python-format
 msgid "Intrastat Region"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
+#: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
+#, python-format
+msgid "Intrastat Region Code"
+msgstr ""
+
+#. module: intrastat_product
 #: model:ir.actions.act_window,name:intrastat_product.intrastat_region_action
 #: model:ir.ui.menu,name:intrastat_product.intrastat_region_menu
 msgid "Intrastat Regions"
 msgstr ""
 
 #. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_result_view_form
@@ -785,19 +798,23 @@
 #: model:ir.model.fields,field_description:intrastat_product.field_hs_code__intrastat_unit_id
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_computation_line__intrastat_unit_id
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration_line__intrastat_unit_id
 msgid "Intrastat Supplementary Unit"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
+#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #: model:ir.model,name:intrastat_product.model_intrastat_unit
+#, python-format
 msgid "Intrastat Supplementary Units"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model,name:intrastat_product.model_intrastat_transaction
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__transaction_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__transaction_id
 #, python-format
 msgid "Intrastat Transaction"
 msgstr ""
@@ -806,63 +823,62 @@
 #: model:ir.model.fields,field_description:intrastat_product.field_account_bank_statement_line__intrastat_transaction_id
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move__intrastat_transaction_id
 #: model:ir.model.fields,field_description:intrastat_product.field_account_payment__intrastat_transaction_id
 msgid "Intrastat Transaction Type"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
+#: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
+#, python-format
+msgid "Intrastat Transaction code"
+msgstr ""
+
+#. module: intrastat_product
 #: model:ir.model,name:intrastat_product.model_intrastat_transport_mode
 #: model:ir.model.fields,field_description:intrastat_product.field_account_bank_statement_line__intrastat_transport_id
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move__intrastat_transport_id
 #: model:ir.model.fields,field_description:intrastat_product.field_account_payment__intrastat_transport_id
 msgid "Intrastat Transport Mode"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model,name:intrastat_product.model_report_intrastat_product_product_declaration_xls
 msgid "Intrastat declaration"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model,name:intrastat_product.model_account_move_intrastat_line
-#: model:ir.model.fields,field_description:intrastat_product.field_account_bank_statement_line__intrastat_line_ids
-#: model:ir.model.fields,field_description:intrastat_product.field_account_move__intrastat_line_ids
-#: model:ir.model.fields,field_description:intrastat_product.field_account_payment__intrastat_line_ids
 msgid "Intrastat declaration details"
 msgstr ""
 
 #. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.report_invoice_document_intrastat_product
 msgid "Intrastat information"
 msgstr ""
 
 #. module: intrastat_product
-#: model:ir.model.fields,help:intrastat_product.field_account_bank_statement_line__intrastat_transaction_id
-#: model:ir.model.fields,help:intrastat_product.field_account_move__intrastat_transaction_id
-#: model:ir.model.fields,help:intrastat_product.field_account_payment__intrastat_transaction_id
-msgid "Intrastat nature of transaction"
-msgstr ""
-
-#. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.view_move_form
 msgid "Intrastat transaction details"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid "Invalid Year!"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model,name:intrastat_product.model_stock_location
 msgid "Inventory Locations"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move_intrastat_line__move_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__invoice_id
 #, python-format
 msgid "Invoice"
 msgstr ""
 
@@ -874,17 +890,18 @@
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move_intrastat_line__invoice_line_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__invoice_line_id
 msgid "Invoice Line"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
-msgid "Invoice {invoice}, line {line}"
+msgid "Invoices/Refunds"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__message_is_follower
 msgid "Is Follower"
 msgstr ""
 
@@ -955,43 +972,53 @@
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__message_ids
 msgid "Messages"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
-msgid "Missing Intrastat Code on product %s. "
+msgid "Missing <em>Country of Origin</em>"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
-msgid "Missing VAT Number on partner '%s'"
+msgid "Missing <em>Country</em>"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
-msgid ""
-"Missing country on invoice partner '{invoice_partner}' or on the delivery "
-"address (partner '{delivery_partner}'). "
+msgid "Missing <em>H.S. Code</em>"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
-msgid "Missing unit of measure."
+msgid "Missing <em>VAT Number</em>"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
-msgid "Missing weight on product %s."
+msgid "Missing link to a <em>regular unit of measure</em>"
+msgstr ""
+
+#. module: intrastat_product
+#. odoo-python
+#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
+#, python-format
+msgid "Missing unit of measure"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__month
 msgid "Month"
 msgstr ""
 
@@ -1004,14 +1031,15 @@
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_region__name
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_transport_mode__name
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_unit__name
 msgid "Name"
 msgstr ""
 
 #. module: intrastat_product
+#: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_region_view_search
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_transport_mode_search
 msgid "Name, Code or Description"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_computation_line__weight
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration_line__weight
@@ -1030,32 +1058,29 @@
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__activity_type_id
 msgid "Next Activity Type"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid "Nihil"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #, python-format
 msgid "No"
 msgstr ""
 
 #. module: intrastat_product
-#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
-#, python-format
-msgid "No XML File has been generated."
-msgstr ""
-
-#. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid "No records found for the selected period !"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__note
@@ -1086,55 +1111,19 @@
 
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration__message_has_error_counter
 msgid "Number of messages with delivery error"
 msgstr ""
 
 #. module: intrastat_product
-#: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration__message_unread_counter
-msgid "Number of unread messages"
-msgstr ""
-
-#. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_result_view_form
 msgid "Ok"
 msgstr ""
 
 #. module: intrastat_product
-#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
-#, python-format
-msgid ""
-"On invoice '{invoice}', the source/destination country is '{country}' which "
-"is not part of the European Union."
-msgstr ""
-
-#. module: intrastat_product
-#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
-#, python-format
-msgid ""
-"On invoice '{invoice}', the source/destination country is United-Kingdom and"
-" the fiscal position is '{fp}'. Make sure that the fiscal position is right."
-" If the origin/destination is Northern Ireland, please set the VAT number of"
-" the partner '{partner}' in Odoo with its new VAT number starting with 'XI' "
-"following Brexit."
-msgstr ""
-
-#. module: intrastat_product
-#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
-#, python-format
-msgid ""
-"On invoice '{invoice}', the source/destination country is United-Kingdom, "
-"the fiscal position is '{fp}' and the partner's VAT number is "
-"'{partner_vat}'. Make sure that the fiscal position is right. If the "
-"origin/destination is Northern Ireland, please update the VAT number of the "
-"partner '{partner}' in Odoo with its new VAT number starting with 'XI' "
-"following Brexit."
-msgstr ""
-
-#. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.view_move_form
 msgid "Origin Region"
 msgstr ""
 
 #. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.report_invoice_document_intrastat_product
 msgid "Origin country"
@@ -1172,21 +1161,29 @@
 #: model:intrastat.transport_mode,description:intrastat_product.intrastat_transport_9
 msgid ""
 "Own propulsion (imported or exported means of transport crossing the border "
 "under their own power, e.g. aircraft, lorries, boats, etc.)"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__partner_id
 #, python-format
 msgid "Partner"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
+#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
+#, python-format
+msgid "Partners"
+msgstr ""
+
+#. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__year_month
 msgid "Period"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model,name:intrastat_product.model_intrastat_result_view
 msgid "Pop-up to show errors on intrastat report generation"
@@ -1199,31 +1196,47 @@
 
 #. module: intrastat_product
 #: model:intrastat.transport_mode,description:intrastat_product.intrastat_transport_5
 msgid "Postal consignments"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move_intrastat_line__product_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__product_id
 #: model_terms:ir.ui.view,arch_db:intrastat_product.report_invoice_document_intrastat_product
 #, python-format
 msgid "Product"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_computation_line_view_tree
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_line_view_tree
 #, python-format
 msgid "Product C/O"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
+#: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
+#, python-format
+msgid "Product C/O Code"
+msgstr ""
+
+#. module: intrastat_product
+#. odoo-python
+#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
+#, python-format
+msgid "Products"
+msgstr ""
+
+#. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move_intrastat_line__quantity
 msgid "Quantity"
 msgstr ""
 
 #. module: intrastat_product
 #: model:intrastat.transport_mode,name:intrastat_product.intrastat_transport_2
 msgid "Rail"
@@ -1236,25 +1249,32 @@
 
 #. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.report_invoice_document_intrastat_product
 msgid "Reference"
 msgstr ""
 
 #. module: intrastat_product
+#: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__region_code
+#: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__region_code
+msgid "Region Code"
+msgstr ""
+
+#. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_unit__uom_id
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_unit_search
 msgid "Regular UoM"
 msgstr ""
 
 #. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_line_view_form
 msgid "Related Transactions"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid "Replace"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__reporting_level
@@ -1320,14 +1340,15 @@
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_res_partner__invoice_intrastat_detail
 #: model:ir.model.fields,field_description:intrastat_product.field_res_users__invoice_intrastat_detail
 msgid "Show intrastat details in invoice report"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid "Standard"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__state
@@ -1347,22 +1368,24 @@
 "Status based on activities\n"
 "Overdue: Due date is already passed\n"
 "Today: Activity date is today\n"
 "Planned: Future activities."
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__intrastat_unit_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__intrastat_unit_id
 #, python-format
 msgid "Suppl. Unit"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__suppl_unit_qty
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__suppl_unit_qty
 #, python-format
 msgid "Suppl. Unit Qty"
 msgstr ""
 
@@ -1375,60 +1398,77 @@
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_computation_line__suppl_unit_qty
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration_line__suppl_unit_qty
 msgid "Supplementary Units Quantity"
 msgstr ""
 
 #. module: intrastat_product
-#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
-#, python-format
-msgid "The Declaration Action has been set to 'nihil'."
+#: model:ir.model.fields,help:intrastat_product.field_intrastat_product_computation_line__company_country_code
+#: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration__company_country_code
+#: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration_line__company_country_code
+msgid ""
+"The ISO country code in two chars. \n"
+"You can use this field for quick search."
 msgstr ""
 
 #. module: intrastat_product
-#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid "The VAT number '%s' is invalid."
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid "The VAT number is not set for the partner '%s'."
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
+#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
+#, python-format
+msgid "The declaration Action has been set to <em>nihil</em>."
+msgstr ""
+
+#. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid ""
 "The default Incoterm of the Company is not set, please configure it first."
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid ""
 "The default Intrastat Transport Mode of the Company is not set, please "
 "configure it first."
 msgstr ""
 
 #. module: intrastat_product
-#: model:ir.model.fields,help:intrastat_product.field_intrastat_product_computation_line__invoice_id
-msgid "The move of this entry line."
-msgstr ""
-
-#. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_account_move_intrastat_line__quantity
 msgid ""
 "The optional quantity expressed by this line, eg: number of product sold. "
 "The quantity is not a legal requirement but is very useful for some reports."
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
+#: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
+#, python-format
+msgid ""
+"The source/destination country is <em>%s</em> which is not part of the "
+"European Union"
+msgstr ""
+
+#. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_sale_order__intrastat_transport_id
 msgid "This information is used in Intrastat reports"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__total_amount
 msgid "Total Fiscal Amount"
@@ -1441,14 +1481,20 @@
 
 #. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_computation_line_view_form
 msgid "Transaction"
 msgstr ""
 
 #. module: intrastat_product
+#: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__transaction_code
+#: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__transaction_code
+msgid "Transaction Code"
+msgstr ""
+
+#. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_account_move_intrastat_line__transaction_suppl_unit_qty
 msgid "Transaction Suppl Unit Qty"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.actions.act_window,name:intrastat_product.intrastat_transaction_action
 #: model:ir.ui.menu,name:intrastat_product.intrastat_transaction_menu
@@ -1472,23 +1518,31 @@
 
 #. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.intrastat_product_declaration_view_form
 msgid "Transactions"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__transport_id
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__transport_id
 #: model:ir.model.fields,field_description:intrastat_product.field_sale_order__intrastat_transport_id
 #, python-format
 msgid "Transport Mode"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
+#: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
+#, python-format
+msgid "Transport Mode Code"
+msgstr ""
+
+#. module: intrastat_product
 #: model:ir.actions.act_window,name:intrastat_product.intrastat_transport_action
 #: model:ir.ui.menu,name:intrastat_product.intrastat_transport_menu
 msgid "Transport Modes"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__declaration_type
@@ -1505,55 +1559,41 @@
 
 #. module: intrastat_product
 #: model_terms:ir.ui.view,arch_db:intrastat_product.report_invoice_document_intrastat_product
 msgid "Unit Weight"
 msgstr ""
 
 #. module: intrastat_product
-#: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__message_unread
-msgid "Unread Messages"
-msgstr ""
-
-#. module: intrastat_product
-#: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__message_unread_counter
-msgid "Unread Messages Counter"
-msgstr ""
-
-#. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration__revision
 msgid "Used to keep track of changes"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #, python-format
 msgid "VAT"
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__vat
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__vat
 msgid "VAT Number"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
 msgid ""
-"VAT number of partner %(partner)s is %(partner_vat)s. If this partner is "
-"from Northern Ireland, his VAT number should be updated to his new VAT "
-"number starting with 'XI' following Brexit. If this partner is from Great "
-"Britain, maybe the fiscal position was wrong on invoice %(invoice)s (the "
-"fiscal position was %(fp)s)."
-msgstr ""
-
-#. module: intrastat_product
-#: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__valid
-#: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration__valid
-msgid "Valid"
+"VAT number is <em>%(vat)s</em>. If this partner is from Northern Ireland, "
+"his VAT number should be updated to his new VAT number starting with "
+"<em>XI</em> following Brexit. If this partner is from Great Britain, maybe "
+"the fiscal position was wrong on the invoice (the fiscal position was "
+"<i>%(fiscal_position)s</i>)."
 msgstr ""
 
 #. module: intrastat_product
 #: model:ir.model,name:intrastat_product.model_stock_warehouse
 msgid "Warehouse"
 msgstr ""
 
@@ -1564,14 +1604,15 @@
 
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration__website_message_ids
 msgid "Website communication history"
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_computation_line__weight
 #: model:ir.model.fields,field_description:intrastat_product.field_intrastat_product_declaration_line__weight
 #: model_terms:ir.ui.view,arch_db:intrastat_product.report_invoice_document_intrastat_product
 #, python-format
 msgid "Weight"
 msgstr ""
@@ -1603,17 +1644,33 @@
 
 #. module: intrastat_product
 #: model:ir.model.fields,help:intrastat_product.field_intrastat_product_declaration__note
 msgid "You can add some comments here if you want."
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/models/intrastat_product_declaration.py:0
 #, python-format
-msgid "You must set company's country !"
+msgid "You must set the country on company '%s'."
+msgstr ""
+
+#. module: intrastat_product
+#. odoo-python
+#: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
+#, python-format
+msgid "comput."
+msgstr ""
+
+#. module: intrastat_product
+#. odoo-python
+#: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
+#, python-format
+msgid "decl."
 msgstr ""
 
 #. module: intrastat_product
+#. odoo-python
 #: code:addons/intrastat_product/report/intrastat_product_report_xls.py:0
 #, python-format
 msgid "for period %s"
 msgstr ""
```

## odoo/addons/intrastat_product/models/__init__.py

```diff
@@ -1,9 +1,8 @@
 from . import res_company
-from . import res_config_settings
 from . import res_partner
 from . import account_move
 from . import hs_code
 from . import intrastat_product_declaration
 from . import intrastat_region
 from . import intrastat_transaction
 from . import intrastat_transport_mode
```

## odoo/addons/intrastat_product/models/account_move.py

```diff
@@ -11,28 +11,28 @@
 
     intrastat_transaction_id = fields.Many2one(
         comodel_name="intrastat.transaction",
         string="Intrastat Transaction Type",
         ondelete="restrict",
         tracking=True,
         check_company=True,
-        help="Intrastat nature of transaction",
+        help="Intrastat Nature of Transaction",
         domain="['|', ('company_id', '=', False), ('company_id', '=', company_id)]",
     )
     intrastat_transport_id = fields.Many2one(
         comodel_name="intrastat.transport_mode",
         string="Intrastat Transport Mode",
         ondelete="restrict",
     )
     src_dest_country_id = fields.Many2one(
         comodel_name="res.country",
         string="Origin/Destination Country",
         compute="_compute_src_dest_country_id",
         store=True,
-        help="Destination country for dispatches. Origin country for " "arrivals.",
+        help="Destination country for dispatches. Origin country for arrivals.",
     )
     src_dest_region_id = fields.Many2one(
         comodel_name="intrastat.region",
         string="Origin/Destination Region",
         default=lambda self: self.env.company.intrastat_region_id,
         help="Origin region for dispatches, destination region for "
         "arrivals. This field is used for the Intrastat Declaration.",
@@ -40,15 +40,15 @@
     )
     intrastat = fields.Char(
         string="Intrastat Declaration", related="company_id.intrastat"
     )
     intrastat_line_ids = fields.One2many(
         comodel_name="account.move.intrastat.line",
         inverse_name="move_id",
-        string="Intrastat declaration details",
+        string="Intrastat Declaration Details",
     )
 
     @api.depends("partner_shipping_id.country_id", "partner_id.country_id")
     def _compute_src_dest_country_id(self):
         for inv in self:
             country = inv.partner_shipping_id.country_id or inv.partner_id.country_id
             if not country:
@@ -85,30 +85,21 @@
         }
         decl_model = self.env["intrastat.product.declaration"]
         if decl_model._is_product(line):
             hs_code = line.product_id.get_hs_code_recursively()
             if not hs_code:
                 return vals
             weight, qty = decl_model._get_weight_and_supplunits(line, hs_code, notedict)
-            product_country = line.product_id.origin_country_id
-            product_state = line.product_id.origin_state_id
-            country = product_country or product_state.country_id
-            product_origin_country_code = "QU"
-            if country:
-                product_origin_country_code = self.env[
-                    "res.partner"
-                ]._get_intrastat_country_code(product_country, product_state)
             vals.update(
                 {
                     "invoice_line_id": line.id,
                     "hs_code_id": hs_code.id,
                     "transaction_weight": weight,
                     "transaction_suppl_unit_qty": qty,
                     "product_origin_country_id": line.product_id.origin_country_id.id,
-                    "product_origin_country_code": product_origin_country_code,
                 }
             )
         return vals
 
     def _prepare_intrastat_line_info(self, line):
         is_intrastat_line = bool(line._name == "account.move.intrastat.line")
         product = line.product_id
@@ -200,50 +191,23 @@
         string="Intrastat Code",
         ondelete="restrict",
         required=True,
     )
     transaction_weight = fields.Integer(
         help="Transaction weight in Kg: Quantity x Product Weight"
     )
-    # product_origin_country_id is replaced by product_origin_country_code
-    # this field should be dropped once the localisation modules have been
-    # adapted accordingly
     product_origin_country_id = fields.Many2one(
         comodel_name="res.country",
-        string="Country of Origin",
-        help="Country of origin of the product i.e. product " "'made in ____'.",
-    )
-    product_origin_country_code = fields.Char(
         string="Country of Origin of the Product",
-        size=2,
-        required=True,
-        default="QU",
-        help="2 digit code of country of origin of the product except for the UK.\n"
-        "Specify 'XI' for UK Northern Ireland and 'XU' for rest of the UK.\n"
-        "Specify 'QU' when the country is unknown.\n",
+        help="Country of origin of the product i.e. product " "'made in ____'.",
     )
 
     @api.onchange("invoice_line_id")
     def _onchange_move_id(self):
         moves = self.mapped("move_id")
         dom = [
             ("exclude_from_invoice_tab", "=", False),
             ("display_type", "=", False),
             ("id", "in", moves.mapped("invoice_line_ids").ids),
             ("id", "not in", moves.mapped("intrastat_line_ids.invoice_line_id").ids),
         ]
         return {"domain": {"invoice_line_id": dom}}
-
-    @api.model
-    def create(self, vals):
-        self._format_vals(vals)
-        return super().create(vals)
-
-    def write(self, vals):
-        self._format_vals(vals)
-        return super().write(vals)
-
-    def _format_vals(self, vals):
-        if "product_origin_country_code" in vals:
-            vals["product_origin_country_code"] = (
-                vals["product_origin_country_code"].upper().strip()
-            )
```

## odoo/addons/intrastat_product/models/intrastat_product_declaration.py

```diff
@@ -1,14 +1,14 @@
 # Copyright 2011-2020 Akretion France (http://www.akretion.com)
 # Copyright 2009-2022 Noviat (http://www.noviat.com)
 # @author Alexis de Lattre <alexis.delattre@akretion.com>
 # @author Luc de Meyer <info@noviat.com>
 
 import logging
-import warnings
+from collections import defaultdict
 from datetime import date
 
 from dateutil.relativedelta import relativedelta
 from stdnum.vatin import is_valid
 
 from odoo import _, api, fields, models
 from odoo.exceptions import RedirectWarning, UserError, ValidationError
@@ -46,16 +46,16 @@
         comodel_name="res.company",
         string="Company",
         required=True,
         states={"done": [("readonly", True)]},
         default=lambda self: self.env.company,
     )
     company_country_code = fields.Char(
-        compute="_compute_company_country_code",
-        readonly=True,
+        related="company_id.partner_id.country_id.code",
+        string="Company Country Code",
         store=True,
     )
     state = fields.Selection(
         selection=[("draft", "Draft"), ("done", "Done")],
         readonly=True,
         tracking=True,
         copy=False,
@@ -84,15 +84,14 @@
         ],
         required=True,
         states={"done": [("readonly", True)]},
     )
     year_month = fields.Char(
         compute="_compute_year_month",
         string="Period",
-        readonly=True,
         tracking=True,
         store=True,
         help="Year and month of the declaration.",
     )
     declaration_type = fields.Selection(
         selection="_get_declaration_type",
         string="Type",
@@ -118,15 +117,15 @@
         string="Intrastat Product Computation Lines",
         states={"done": [("readonly", True)]},
     )
     declaration_line_ids = fields.One2many(
         comodel_name="intrastat.product.declaration.line",
         inverse_name="parent_id",
         string="Intrastat Product Declaration Lines",
-        states={"done": [("readonly", True)]},
+        readonly=True,
     )
     num_decl_lines = fields.Integer(
         compute="_compute_numbers",
         string="Number of Declaration Lines",
         store=True,
         tracking=True,
     )
@@ -137,17 +136,18 @@
         help="Total fiscal amount in company currency of the declaration.",
     )
     currency_id = fields.Many2one(
         "res.currency", related="company_id.currency_id", string="Currency"
     )
     reporting_level = fields.Selection(
         selection="_get_reporting_level",
+        compute="_compute_reporting_level",
+        readonly=False,
         states={"done": [("readonly", True)]},
     )
-    valid = fields.Boolean(compute="_compute_check_validity")
     xml_attachment_id = fields.Many2one("ir.attachment", string="XML Attachment")
     xml_attachment_datas = fields.Binary(
         related="xml_attachment_id.datas", string="XML Export"
     )
     xml_attachment_name = fields.Char(
         related="xml_attachment_id.name", string="XML Filename"
     )
@@ -155,71 +155,99 @@
     @api.model
     def _get_declaration_type(self):
         res = []
         company = self.env.company
         arrivals = company.intrastat_arrivals
         dispatches = company.intrastat_dispatches
         if arrivals != "exempt":
-            res.append(("arrivals", _("Declaration for Arrivals")))
+            res.append(("arrivals", _("Arrivals")))
         if dispatches != "exempt":
-            res.append(("dispatches", _("Declaration for Dispatches")))
+            res.append(("dispatches", _("Dispatches")))
         return res
 
     @api.model
     def _get_reporting_level(self):
         return [("standard", _("Standard")), ("extended", _("Extended"))]
 
     @api.model
     def _get_action(self):
         return [
             ("replace", _("Replace")),
             ("append", _("Append")),
             ("nihil", _("Nihil")),
         ]
 
-    @api.depends("company_id")
-    def _compute_company_country_code(self):
-        for this in self:
-            if this.company_id:
-                if not this.company_id.country_id:
-                    raise ValidationError(_("You must set company's country !"))
-                this.company_country_code = this.company_id.country_id.code.lower()
-
     @api.depends("year", "month")
     def _compute_year_month(self):
         for this in self:
             if this.year and this.month:
                 this.year_month = "-".join([this.year, this.month])
 
-    @api.depends("month")
-    def _compute_check_validity(self):
-        """TO DO: logic based upon computation lines"""
+    @api.constrains("company_id")
+    def _check_company_country(self):
+        for this in self:
+            if not this.company_id.country_id:
+                raise ValidationError(
+                    _("You must set the country on company '%s'.")
+                    % this.company_id.display_name
+                )
+
+    @api.depends("declaration_line_ids.amount_company_currency")
+    def _compute_numbers(self):
+        rg_res = self.env["intrastat.product.declaration.line"].read_group(
+            [("parent_id", "in", self.ids)],
+            ["parent_id", "amount_company_currency:sum"],
+            ["parent_id"],
+        )
+        mapped_data = {
+            x["parent_id"][0]: {
+                "num_decl_lines": x["parent_id_count"],
+                "total_amount": x["amount_company_currency"],
+            }
+            for x in rg_res
+        }
         for this in self:
-            this.valid = True
+            this.num_decl_lines = mapped_data.get(this.id, {}).get("num_decl_lines", 0)
+            this.total_amount = mapped_data.get(this.id, {}).get("total_amount", 0)
 
     @api.constrains("year")
     def _check_year(self):
         for this in self:
             if len(this.year) != 4 or this.year[0] != "2":
                 raise ValidationError(_("Invalid Year!"))
 
-    @api.onchange("declaration_type")
-    def _onchange_declaration_type(self):
-        if self.declaration_type == "arrivals":
-            self.reporting_level = (
-                self.company_id.intrastat_arrivals == "extended"
-                and "extended"
-                or "standard"
-            )
-        if self.declaration_type == "dispatches":
-            self.reporting_level = (
-                self.company_id.intrastat_dispatches == "extended"
-                and "extended"
-                or "standard"
-            )
+    @api.depends("declaration_type", "company_id")
+    def _compute_reporting_level(self):
+        for this in self:
+            reporting_level = False
+            if this.declaration_type == "arrivals":
+                reporting_level = (
+                    this.company_id.intrastat_arrivals == "extended"
+                    and "extended"
+                    or "standard"
+                )
+            elif this.declaration_type == "dispatches":
+                reporting_level = (
+                    this.company_id.intrastat_dispatches == "extended"
+                    and "extended"
+                    or "standard"
+                )
+            this.reporting_level = reporting_level
+
+    def name_get(self):
+        res = []
+        type2label = dict(
+            self.fields_get("declaration_type", "selection")["declaration_type"][
+                "selection"
+            ]
+        )
+        for rec in self:
+            name = "%s %s" % (rec.year_month, type2label.get(rec.declaration_type))
+            res.append((rec.id, name))
+        return res
 
     def copy(self, default=None):
         self.ensure_one()
         default = default or {}
         default["revision"] = self.revision + 1
         return super().copy(default)
 
@@ -240,188 +268,134 @@
                 "res_id": self.id,
                 "res_model": self._name,
                 "raw": xml_bytes,
             }
         )
         return attach.id
 
-    def _unlink_attachments(self):
-        atts = self.env["ir.attachment"].search(
-            [("res_model", "=", self._name), ("res_id", "=", self.id)]
-        )
-        atts.unlink()
-
     def unlink(self):
         for this in self:
             if this.state == "done":
                 raise UserError(
                     _("Cannot delete the declaration %s because it is in Done state.")
                     % this.display_name
                 )
         return super().unlink()
 
     def _get_partner_country(self, inv_line, notedict, eu_countries):
         inv = inv_line.move_id
-        country = inv.src_dest_country_id or inv.partner_id.country_id
+        country = inv.src_dest_country_id
         if not country:
-            line_notes = [
-                _(
-                    "Missing country on invoice partner '{invoice_partner}' "
-                    "or on the delivery address (partner '{delivery_partner}'). "
-                ).format(
-                    invoice_partner=inv.partner_id.display_name,
-                    delivery_partner=inv.partner_shipping_id
-                    and inv.partner_shipping_id.display_name
-                    or "-",
-                )
-            ]
-            self._format_line_note(inv_line, notedict, line_notes)
+            if not inv.partner_shipping_id.country_id:
+                error_partner = inv.partner_shipping_id
+            elif not inv.partner_id.country_id:
+                error_partner = inv.partner_id
+            else:
+                error_partner = inv.company_id.partner_id
+            msg = _("Missing <em>Country</em>")
+            notedict["partner"][error_partner.display_name][msg].add(
+                notedict["inv_origin"]
+            )
         else:
             if country not in eu_countries and country.code != "GB":
-                line_notes = [
-                    _(
-                        "On invoice '{invoice}', the source/destination country "
-                        "is '{country}' which is not part of the European Union."
-                    ).format(invoice=inv.display_name, country=country.display_name)
-                ]
-                self._format_line_note(inv_line, notedict, line_notes)
-        if country and country.code == "GB" and self.year >= "2021":
-            vat = inv.commercial_partner_id.vat
-            if not vat:
-                line_notes = [
+                msg = (
                     _(
-                        "On invoice '{invoice}', the source/destination country "
-                        "is United-Kingdom and the fiscal position is '{fp}'. "
-                        "Make sure that the fiscal position is right. If "
-                        "the origin/destination is Northern Ireland, please "
-                        "set the VAT number of the partner '{partner}' in Odoo with "
-                        "its new VAT number starting with 'XI' following Brexit."
-                    ).format(
-                        invoice=inv.display_name,
-                        fp=inv.fiscal_position_id.display_name,
-                        partner=inv.commercial_partner_id.display_name,
+                        "The source/destination country "
+                        "is <em>%s</em> which is not part of the European Union"
                     )
-                ]
-                self._format_line_note(inv_line, notedict, line_notes)
-            elif not vat.startswith("XI"):
-                line_notes = [
-                    _(
-                        "On invoice '{invoice}', the source/destination country "
-                        "is United-Kingdom, the fiscal position is '{fp}' and "
-                        "the partner's VAT number is '{partner_vat}'. "
-                        "Make sure that the fiscal position is right. If "
-                        "the origin/destination is Northern Ireland, please "
-                        "update the VAT number of the partner '{partner}' in Odoo with "
-                        "its new VAT number starting with 'XI' following Brexit."
-                    ).format(
-                        invoice=inv.display_name,
-                        fp=inv.fiscal_position_id.display_name,
-                        partner_vat=vat,
-                        partner=inv.commercial_partner_id.display_name,
-                    )
-                ]
-                self._format_line_note(inv_line, notedict, line_notes)
+                    % country.name
+                )
+                notedict["invoice"][notedict["inv_origin"]].add(msg)
         return country
 
     def _get_intrastat_transaction(self, inv_line, notedict):
         invoice = inv_line.move_id
-        if invoice.intrastat_transaction_id:
-            return invoice.intrastat_transaction_id
-        else:
-            company = invoice.company_id
-            if invoice.move_type == "out_invoice":
-                return company.intrastat_transaction_out_invoice
-            elif invoice.move_type == "out_refund":
-                return company.intrastat_transaction_out_refund
-            elif invoice.move_type == "in_invoice":
-                return company.intrastat_transaction_in_invoice
-            elif invoice.move_type == "in_refund":
-                return company.intrastat_transaction_in_refund
+        transaction = invoice.intrastat_transaction_id
+        fp2transaction = {
+            "b2b": self.env.ref("intrastat_product.intrastat_transaction_11"),
+            "b2c": self.env.ref("intrastat_product.intrastat_transaction_12"),
+        }
+        if not transaction:
+            # as we have searched with intrastat_fiscal_position in ('b2b', 'b2c')
+            # we should always have intrastat_fiscal_position in fp2transaction
+            transaction = fp2transaction[invoice.intrastat_fiscal_position]
+        return transaction
 
     def _get_weight_and_supplunits(self, inv_line, hs_code, notedict):
         line_qty = inv_line.quantity
         product = inv_line.product_id
         intrastat_unit_id = hs_code.intrastat_unit_id
         source_uom = inv_line.product_uom_id
-        weight_uom_categ = self._get_uom_refs("weight_uom_categ")
-        kg_uom = self._get_uom_refs("kg_uom")
-        pce_uom_categ = self._get_uom_refs("pce_uom_categ")
-        pce_uom = self._get_uom_refs("pce_uom")
+        weight_uom_categ = self.env.ref("uom.product_uom_categ_kgm")
+        kg_uom = self.env.ref("uom.product_uom_kgm")
+        self.env["decimal.precision"].precision_get("Stock Weight")
         weight = suppl_unit_qty = 0.0
 
         if not source_uom:
-            line_notes = [_("Missing unit of measure.")]
-            self._format_line_note(inv_line, notedict, line_notes)
+            msg = _("Missing unit of measure")
+            notedict["invoice"][notedict["invline_origin"]].add(msg)
             return weight, suppl_unit_qty
 
         if intrastat_unit_id:
             target_uom = intrastat_unit_id.uom_id
             if not target_uom:
-                line_notes = [
-                    _("Intrastat Code %s:") % hs_code.display_name,
-                    _(
-                        "Conversion from Intrastat Supplementary Unit '%s' to "
-                        "Unit of Measure is not implemented yet."
-                    )
-                    % intrastat_unit_id.name,
-                ]
-                self._format_line_note(inv_line, notedict, line_notes)
+                msg = _("Missing link to a <em>regular unit of measure</em>")
+                notedict["intrastat_unit"][intrastat_unit_id.display_name][msg].add(
+                    notedict["invline_origin"]
+                )
                 return weight, suppl_unit_qty
             if target_uom.category_id == source_uom.category_id:
                 suppl_unit_qty = source_uom._compute_quantity(line_qty, target_uom)
             else:
-                line_notes = [
-                    _(
-                        "Conversion from unit of measure %(src_uom)s to %(dest_uom)s "
-                        "is not implemented."
-                    )
-                    % (
-                        {
-                            "src_uom": source_uom.display_name,
-                            "dest_uom": target_uom.display_name,
-                        }
-                    )
-                ]
-                self._format_line_note(inv_line, notedict, line_notes)
+                msg = _(
+                    "Conversion from unit of measure <em>%(source_uom)s</em> to "
+                    "<em>%(target_uom)s</em>, which is configured on the intrastat "
+                    "supplementary unit <i>%(intrastat_unit)s</i> "
+                    "of H.S. code <i>%(hs_code)s</i>, "
+                    "is not implemented yet"
+                ) % {
+                    "source_uom": source_uom.name,
+                    "target_uom": target_uom.name,
+                    "intrastat_unit": intrastat_unit_id.display_name,
+                    "hs_code": hs_code.display_name,
+                }
+                notedict["invoice"][notedict["invline_origin"]].add(msg)
                 return weight, suppl_unit_qty
 
-        if weight:
-            return weight, suppl_unit_qty
-
         if source_uom == kg_uom:
             weight = line_qty
         elif source_uom.category_id == weight_uom_categ:
             weight = source_uom._compute_quantity(line_qty, kg_uom)
-        elif source_uom.category_id == pce_uom_categ:
-            if not product.weight:  # re-create weight_net ?
-                line_notes = [_("Missing weight on product %s.") % product.display_name]
-                self._format_line_note(inv_line, notedict, line_notes)
-                return weight, suppl_unit_qty
-            if source_uom == pce_uom:
-                weight = product.weight * line_qty  # product.weight_net
-            else:
-                # Here, I suppose that, on the product, the
-                # weight is per PCE and not per uom_id
-                # product.weight_net
-                weight = product.weight * source_uom._compute_quantity(
-                    line_qty, pce_uom
-                )
+        elif source_uom.category_id == product.uom_id.category_id:
+            # We suppose that, on product.template,
+            # the 'weight' field is per uom_id
+            weight = product.weight * source_uom._compute_quantity(
+                line_qty, product.uom_id
+            )
         else:
-            line_notes = [
-                _(
-                    "Conversion from unit of measure %(uom)s to 'Kg' "
-                    "is not implemented. It is needed for product %(product)s."
-                )
-                % ({"uom": source_uom.display_name, "product": product.display_name})
-            ]
-            self._format_line_note(inv_line, notedict, line_notes)
-            return weight, suppl_unit_qty
-
+            msg = _(
+                "Conversion from unit of measure <em>%(source_uom)s</em> to "
+                "<em>Kg</em> cannot be done automatically. It is needed for product "
+                "<i>%(product)s</i> whose unit of measure is "
+                "<i>%(product_uom)s</i>"
+            ) % {
+                "source_uom": source_uom.name,
+                "product": product.display_name,
+                "product_uom": product.uom_id.display_name,
+            }
+            notedict["invoice"][notedict["inv_origin"]].add(msg)
         return weight, suppl_unit_qty
 
+    def _get_region_code(self, inv_line, notedict):
+        """May be inherited by localisation modules
+        If set, Odoo will use the region code returned by this method
+        and will not call _get_region() and leave region_id empty
+        """
+        return False
+
     def _get_region(self, inv_line, notedict):
         """
         For supplier invoices/refunds: if the invoice line is linked
         to a stock move, use the destination stock location ;
         otherwise, get the PO (which is linked to a stock location)
         and then get the warehouse.
         It is important to take into account the following scenario:
@@ -461,92 +435,70 @@
     def _get_transport(self, inv_line, notedict):
         transport = (
             inv_line.move_id.intrastat_transport_id
             or self.company_id.intrastat_transport_id
         )
         if not transport:
             msg = _(
-                "The default Intrastat Transport Mode "
-                "of the Company is not set, "
+                "The default Intrastat Transport Mode of the Company is not set, "
                 "please configure it first."
             )
             self._account_config_warning(msg)
         return transport
 
     def _get_incoterm(self, inv_line, notedict):
         incoterm = inv_line.move_id.invoice_incoterm_id or self.company_id.incoterm_id
         if not incoterm:
             msg = _(
-                "The default Incoterm "
-                "of the Company is not set, "
+                "The default Incoterm of the Company is not set, "
                 "please configure it first."
             )
             self._account_config_warning(msg)
         return incoterm
 
     def _get_product_origin_country(self, inv_line, notedict):
-        warnings.warn(
-            "Method '_get_product_origin_country' is deprecated, "
-            "please use '_get_product_origin_country_code'.",
-            DeprecationWarning,
-        )
-        return inv_line.product_id.origin_country_id
-
-    def _get_product_origin_country_code(
-        self, inv_line, product_origin_country, notedict
-    ):
-        cc = "QU"
-        if product_origin_country.code:
-            cc = product_origin_country.code
-            year = self.year or str(inv_line.move_id.date.year)
-            if year >= "2021":
-                product_origin_state = getattr(
-                    inv_line.product_id,
-                    "origin_state_id",
-                    self.env["res.country.state"],
-                )
-                cc = self.env["res.partner"]._get_intrastat_country_code(
-                    product_origin_country, product_origin_state
-                )
-        return cc
+        product = inv_line.product_id
+        origin_country = product.origin_country_id
+        if not origin_country:
+            msg = _("Missing <em>Country of Origin</em>")
+            notedict["product"][product.display_name][msg].add(
+                notedict["invline_origin"]
+            )
+        return origin_country
 
     def _get_vat(self, inv_line, notedict):
         vat = False
         inv = inv_line.move_id
-        if self.declaration_type == "dispatches":
-            vat = inv.commercial_partner_id.vat
+        if (
+            self.declaration_type == "dispatches"
+            and inv_line.move_id.fiscal_position_id.vat_required
+        ):
+            partner = inv.commercial_partner_id
+            vat = partner.vat
             if vat:
                 if vat.startswith("GB"):
-                    line_notes = [
-                        _(
-                            "VAT number of partner %(partner)s is %(partner_vat)s. "
-                            "If this partner is from Northern Ireland, "
-                            "his VAT number should be "
-                            "updated to his new VAT number starting with 'XI' "
-                            "following Brexit. If this partner is from Great Britain, "
-                            "maybe the fiscal position was wrong on invoice %(invoice)s "
-                            "(the fiscal position was %(fp)s)."
-                        )
-                        % (
-                            {
-                                "partner": inv.commercial_partner_id.display_name,
-                                "partner_vat": vat,
-                                "invoice": inv.display_name,
-                                "fp": inv.fiscal_position_id.display_name,
-                            }
-                        )
-                    ]
-                    self._format_line_note(inv_line, notedict, line_notes)
-
+                    msg = _(
+                        "VAT number is <em>%(vat)s</em>. If this partner "
+                        "is from Northern Ireland, his VAT number should be "
+                        "updated to his new VAT number starting with <em>XI</em> "
+                        "following Brexit. If this partner is from Great Britain, "
+                        "maybe the fiscal position was wrong on the invoice "
+                        "(the fiscal position was <i>%(fiscal_position)s</i>)."
+                    ) % {
+                        "vat": vat,
+                        "fiscal_position": inv.fiscal_position_id.display_name,
+                    }
+                    notedict["partner"][partner.display_name][msg].add(
+                        notedict["inv_origin"]
+                    )
             else:
-                line_notes = [
-                    _("Missing VAT Number on partner '%s'")
-                    % inv.commercial_partner_id.display_name
-                ]
-                self._format_line_note(inv_line, notedict, line_notes)
+                msg = _("Missing <em>VAT Number</em>")
+                notedict["partner"][partner.display_name][msg].add(
+                    notedict["inv_origin"]
+                )
         return vat
 
     def _update_computation_line_vals(self, inv_line, line_vals, notedict):
         """placeholder for localization modules"""
 
     def _handle_invoice_accessory_cost(
         self,
@@ -598,72 +550,65 @@
         """
         start_date = date(int(self.year), int(self.month), 1)
         end_date = start_date + relativedelta(day=1, months=+1, days=-1)
         domain = [
             ("date", ">=", start_date),
             ("date", "<=", end_date),
             ("state", "=", "posted"),
-            ("intrastat_fiscal_position", "=", True),
+            ("intrastat_fiscal_position", "in", ("b2b", "b2c")),
             ("company_id", "=", self.company_id.id),
-            (
-                "move_type",
-                "in",
-                ("out_invoice", "out_refund", "in_invoice", "in_refund"),
-            ),
         ]
+        if self.declaration_type == "arrivals":
+            domain.append(("move_type", "in", ("in_invoice", "in_refund")))
+        elif self.declaration_type == "dispatches":
+            domain.append(("move_type", "in", ("out_invoice", "out_refund")))
         return domain
 
     def _is_product(self, invoice_line):
         if invoice_line.product_id and invoice_line.product_id.type in (
             "product",
             "consu",
         ):
             return True
         else:
             return False
 
     def _gather_invoices_init(self, notedict):
         """placeholder for localization modules"""
 
-    def _format_line_note(self, line, notedict, line_notes):
-        indent = 8 * " "
-        note = _("Invoice {invoice}, line {line}").format(
-            invoice=line.move_id.display_name, line=notedict["line_nbr"]
-        )
-        note += ":\n"
-        for line_note in line_notes:
-            note += indent + line_note
-            note += "\n"
-        notedict["note"] += note
-
     def _gather_invoices(self, notedict):
-
         lines = []
         qty_prec = self.env["decimal.precision"].precision_get(
             "Product Unit of Measure"
         )
         accessory_costs = self.company_id.intrastat_accessory_costs
         eu_countries = self.env.ref("base.europe").country_ids
 
         self._gather_invoices_init(notedict)
         domain = self._prepare_invoice_domain()
         order = "journal_id, name"
         invoices = self.env["account.move"].search(domain, order=order)
-        partner_model = self.env["res.partner"]
 
         for invoice in invoices:
 
             lines_current_invoice = []
             total_inv_accessory_costs_cc = 0.0  # in company currency
             total_inv_product_cc = 0.0  # in company currency
             total_inv_weight = 0.0
+            notedict["inv_origin"] = invoice.name
             for line_nbr, inv_line in enumerate(
-                invoice.invoice_line_ids.filtered(lambda x: not x.display_type), start=1
+                invoice.invoice_line_ids.filtered(
+                    lambda x: x.display_type == "product"
+                ),
+                start=1,
             ):
-                notedict["line_nbr"] = line_nbr
+                notedict["invline_origin"] = _("%(invoice)s line %(line_nbr)s") % {
+                    "invoice": invoice.name,
+                    "line_nbr": line_nbr,
+                }
                 inv_intrastat_line = invoice.intrastat_line_ids.filtered(
                     lambda r: r.invoice_line_id == inv_line
                 )
 
                 if (
                     accessory_costs
                     and inv_line.product_id
@@ -688,29 +633,31 @@
                     continue
 
                 partner_country = self._get_partner_country(
                     inv_line, notedict, eu_countries
                 )
                 # When the country is the same as the company's country must be skipped.
                 if partner_country == self.company_id.country_id:
+                    _logger.info(
+                        "Skipping invoice line %s qty %s "
+                        "of invoice %s. Reason: partner_country = "
+                        "company country"
+                        % (inv_line.name, inv_line.quantity, invoice.name)
+                    )
                     continue
-                partner_country_code = partner_model._get_intrastat_country_code(
-                    country=partner_country, state=invoice.partner_shipping_id.state_id
-                )
 
                 if inv_intrastat_line:
                     hs_code = inv_intrastat_line.hs_code_id
                 elif inv_line.product_id and self._is_product(inv_line):
                     hs_code = inv_line.product_id.get_hs_code_recursively()
                     if not hs_code:
-                        line_notes = [
-                            _("Missing Intrastat Code on product %s. ")
-                            % (inv_line.product_id.display_name)
-                        ]
-                        self._format_line_note(inv_line, notedict, line_notes)
+                        msg = _("Missing <em>H.S. Code</em>")
+                        notedict["product"][inv_line.product_id.display_name][msg].add(
+                            notedict["invline_origin"]
+                        )
                         continue
                 else:
                     _logger.info(
                         "Skipping invoice line %s qty %s "
                         "of invoice %s. Reason: no product nor Intrastat Code"
                         % (inv_line.name, inv_line.quantity, invoice.name)
                     )
@@ -733,43 +680,42 @@
                 amount_company_currency = sign * inv_line.balance
                 total_inv_product_cc += amount_company_currency
 
                 if inv_intrastat_line:
                     product_origin_country = (
                         inv_intrastat_line.product_origin_country_id
                     )
-                    product_origin_country_code = (
-                        inv_intrastat_line.product_origin_country_code
-                    )
                 else:
-                    product_origin_country = inv_line.product_id.origin_country_id
-                    product_origin_country_code = self._get_product_origin_country_code(
-                        inv_line, product_origin_country, notedict
+                    product_origin_country = self._get_product_origin_country(
+                        inv_line, notedict
                     )
 
-                region = self._get_region(inv_line, notedict)
+                region_code = self._get_region_code(inv_line, notedict)
+                region = False
+                if not region_code:
+                    region = self._get_region(inv_line, notedict)
 
                 vat = self._get_vat(inv_line, notedict)
 
                 line_vals = {
                     "parent_id": self.id,
                     "invoice_line_id": inv_line.id,
                     "src_dest_country_id": partner_country.id,
-                    "src_dest_country_code": partner_country_code,
                     "product_id": inv_line.product_id.id,
                     "hs_code_id": hs_code.id,
                     "weight": weight,
                     "suppl_unit_qty": suppl_unit_qty,
                     "amount_company_currency": amount_company_currency,
                     "amount_accessory_cost_company_currency": 0.0,
                     "transaction_id": intrastat_transaction.id,
                     "product_origin_country_id": product_origin_country.id or False,
-                    "product_origin_country_code": product_origin_country_code,
+                    "region_code": region_code,
                     "region_id": region and region.id or False,
                     "vat": vat,
+                    "partner_id": invoice.commercial_partner_id.id,
                 }
 
                 # extended declaration
                 if self.reporting_level == "extended":
                     transport = self._get_transport(inv_line, notedict)
                     line_vals.update({"transport_id": transport.id})
 
@@ -793,265 +739,217 @@
                 ):
                     inv_line = self.env["account.move.line"].browse(
                         line_vals["invoice_line_id"]
                     )
                     _logger.info(
                         "Skipping invoice line %s qty %s "
                         "of invoice %s. Reason: price_subtotal = 0 "
-                        "and accessory costs = 0"
-                        % (inv_line.name, inv_line.quantity, inv_line.move_id.name)
+                        "and accessory costs = 0",
+                        inv_line.name,
+                        inv_line.quantity,
+                        inv_line.move_id.name,
                     )
                     continue
                 lines.append(line_vals)
 
         return lines
 
-    def _get_uom_refs(self, ref):
-        uom_refs = {
-            "weight_uom_categ": self.env.ref("uom.product_uom_categ_kgm"),
-            "kg_uom": self.env.ref("uom.product_uom_kgm"),
-            "pce_uom_categ": self.env.ref("uom.product_uom_categ_unit"),
-            "pce_uom": self.env.ref("uom.product_uom_unit"),
+    def _prepare_html_note(self, notedict, key2label):
+        note = ""
+        for key, entries in notedict.items():
+            if not key.endswith("_origin") and entries:
+                note += "<h3>%s</h3><ul>" % key2label[key]
+                for obj_name, messages in entries.items():
+                    note += "<li>%s<ul>" % obj_name
+                    if isinstance(
+                        messages, dict
+                    ):  # 2 layers of dict (partner, product)
+                        for message, origins in messages.items():
+                            note += "<li>%s <small>(%s)</small></li>" % (
+                                message,
+                                ", ".join(origins),
+                            )
+                    else:  # 1st layer=dict, 2nd layer=set (invoice)
+                        for message in messages:
+                            note += "<li>%s</li>" % message
+                    note += "</ul>"
+                note += "</ul>"
+        return note
+
+    def _prepare_notedict(self):
+        notedict = {
+            "partner": defaultdict(lambda: defaultdict(set)),
+            # key = partner.display_name
+            # value = {message1: {origin1, origin2}, message2: {origin3, origin4}}
+            "product": defaultdict(lambda: defaultdict(set)),
+            "intrastat_unit": defaultdict(lambda: defaultdict(set)),
+            "invoice": defaultdict(set),  # for invoice and invoice line
+            # key = invoice.name
+            # value (set) = {message1, message2}
+            "inv_origin": "",
+            "invline_origin": "",
+        }
+        key2label = {
+            "partner": _("Partners"),
+            "product": _("Products"),
+            "intrastat_unit": _("Intrastat Supplementary Units"),
+            "invoice": _("Invoices/Refunds"),
         }
-        return uom_refs[ref]
+        return notedict, key2label
 
     def action_gather(self):
         self.ensure_one()
         self.message_post(body=_("Generate Lines from Invoices"))
-        notedict = {
-            "note": "",
-            "line_nbr": 0,
-        }
-        # TODO: implement a solution to avoid double warnings
-        # e.g. warning on invoice that is repeated for every line
-        # or warning on a product that is repeated for every invoice line
-        # with that product
-
+        notedict, key2label = self._prepare_notedict()
         self.computation_line_ids.unlink()
         self.declaration_line_ids.unlink()
         lines = self._gather_invoices(notedict)
 
-        vals = {"note": notedict["note"]}
+        vals = {"note": self._prepare_html_note(notedict, key2label)}
         if not lines:
             vals["action"] = "nihil"
-            vals["note"] += (
-                "\n"
-                + _("No records found for the selected period !")
-                + "\n"
-                + _("The Declaration Action has been set to 'nihil'.")
+            vals["note"] += "<h3>%s</h3><p>%s</p>" % (
+                _("No records found for the selected period !"),
+                _("The declaration Action has been set to <em>nihil</em>."),
             )
         else:
             vals["computation_line_ids"] = [(0, 0, x) for x in lines]
 
         self.write(vals)
         if vals["note"]:
             result_view = self.env.ref("intrastat_product.intrastat_result_view_form")
             return {
                 "name": _("Generate lines from invoices: results"),
-                "view_type": "form",
                 "view_mode": "form",
                 "res_model": "intrastat.result.view",
                 "view_id": result_view.id,
                 "target": "new",
                 "context": dict(self._context, note=vals["note"]),
                 "type": "ir.actions.act_window",
             }
 
-        return True
-
-    @api.model
-    def _group_line_hashcode_fields(self, computation_line):
-        return {
-            "country": computation_line.src_dest_country_code,
-            "hs_code_id": computation_line.hs_code_id.id or False,
-            "intrastat_unit": computation_line.intrastat_unit_id.id or False,
-            "transaction": computation_line.transaction_id.id or False,
-            "transport": computation_line.transport_id.id or False,
-            "region": computation_line.region_id.id or False,
-            "product_origin_country": computation_line.product_origin_country_code,
-            "vat": computation_line.vat or False,
-        }
-
-    def group_line_hashcode(self, computation_line):
-        hc_fields = self._group_line_hashcode_fields(computation_line)
-        hashcode = "-".join([str(f) for f in hc_fields.values()])
-        return hashcode
-
-    @api.model
-    def _prepare_grouped_fields(self, computation_line, fields_to_sum):
-        vals = {
-            "src_dest_country_id": computation_line.src_dest_country_id.id,
-            "src_dest_country_code": computation_line.src_dest_country_code,
-            "intrastat_unit_id": computation_line.intrastat_unit_id.id,
-            "hs_code_id": computation_line.hs_code_id.id,
-            "transaction_id": computation_line.transaction_id.id,
-            "transport_id": computation_line.transport_id.id,
-            "region_id": computation_line.region_id.id,
-            "parent_id": computation_line.parent_id.id,
-            "product_origin_country_id": computation_line.product_origin_country_id.id,
-            "product_origin_country_code": computation_line.product_origin_country_code,
-            "amount_company_currency": 0.0,
-            "vat": computation_line.vat,
-        }
-        for field in fields_to_sum:
-            vals[field] = 0.0
-        return vals
-
-    def _fields_to_sum(self):
-        fields_to_sum = ["weight", "suppl_unit_qty"]
-        return fields_to_sum
-
-    @api.model
-    def _prepare_declaration_line(self, computation_lines):
-        fields_to_sum = self._fields_to_sum()
-        vals = self._prepare_grouped_fields(computation_lines[0], fields_to_sum)
-        for computation_line in computation_lines:
-            for field in fields_to_sum:
-                vals[field] += computation_line[field]
-            vals["amount_company_currency"] += (
-                computation_line["amount_company_currency"]
-                + computation_line["amount_accessory_cost_company_currency"]
-            )
-        # round, otherwise odoo with truncate (6.7 -> 6... instead of 7 !)
-        for field in fields_to_sum:
-            vals[field] = int(round(vals[field]))
-        if not vals["weight"]:
-            vals["weight"] = 1
-        vals["amount_company_currency"] = int(round(vals["amount_company_currency"]))
-        return vals
-
     def generate_declaration(self):
-        """generate declaration lines"""
+        """generate declaration lines from computation lines"""
         self.ensure_one()
-        assert self.valid, "Computation lines are not valid"
-        self.message_post(body=_("Generate Declaration Lines"))
-        # Delete existing declaration lines
-        self.declaration_line_ids.unlink()
-        # Regenerate declaration lines from computation lines
+        assert not self.declaration_line_ids
         dl_group = {}
         for cl in self.computation_line_ids:
-            hashcode = self.group_line_hashcode(cl)
-            if hashcode in dl_group:
-                dl_group[hashcode].append(cl)
+            hashcode = cl.group_line_hashcode()
+            if hashcode not in dl_group:
+                dl_group[hashcode] = cl
             else:
-                dl_group[hashcode] = [cl]
+                dl_group[hashcode] |= cl
         ipdl = self.declaration_line_ids
-        for cl_lines in list(dl_group.values()):
-            vals = self._prepare_declaration_line(cl_lines)
+        for cl_lines in dl_group.values():
+            vals = cl_lines._prepare_declaration_line()
             declaration_line = ipdl.create(vals)
-            for cl in cl_lines:
-                cl.write({"declaration_line_id": declaration_line.id})
-        return True
+            cl_lines.write({"declaration_line_id": declaration_line.id})
 
     def _check_generate_xml(self):
         self.ensure_one()
         if not self.company_id.partner_id.vat:
             raise UserError(
                 _("The VAT number is not set for the partner '%s'.")
                 % self.company_id.partner_id.display_name
             )
 
+    def _generate_xml(self):
+        """Designed to be inherited in localization modules"""
+        return False
+
     def generate_xml(self):
         """generate the INTRASTAT Declaration XML file"""
         self.ensure_one()
         if self.xml_attachment_id:
             raise UserError(
                 _(
                     "An XML Export already exists for %s. "
                     "To re-generate it, you must first delete it."
                 )
                 % self.display_name
             )
         self.message_post(body=_("Generate XML Declaration File"))
         self._check_generate_xml()
-        self._unlink_attachments()
         xml_bytes = self._generate_xml()
         if xml_bytes:
             attach_id = self._attach_xml_file(
                 xml_bytes, "{}_{}".format(self.declaration_type, self.revision)
             )
             self.write({"xml_attachment_id": attach_id})
-            return
-        else:
-            raise UserError(_("No XML File has been generated."))
 
     def delete_xml(self):
         self.ensure_one()
         self.xml_attachment_id and self.xml_attachment_id.unlink()
 
-    def create_xls(self):
-        if self.env.context.get("computation_lines"):
-            report_file = "intrastat_transactions"
-        else:
-            report_file = "intrastat_declaration_lines"
-        return {
-            "type": "ir.actions.report",
-            "report_type": "xlsx",
-            "report_name": "intrastat_product.product_declaration_xls",
-            "context": dict(self.env.context, report_file=report_file),
-            "data": {"dynamic_report": True},
-        }
-
     @api.model
     def _xls_computation_line_fields(self):
         """
         Update list in custom module to add/drop columns or change order
         """
         return [
             "product",
-            "product_origin_country",
             "hs_code",
             "src_dest_country",
+            "src_dest_country_code",
             "amount_company_currency",
             "accessory_cost",
             "transaction",
             "weight",
             "suppl_unit_qty",
             "suppl_unit",
             "transport",
+            "region",
+            "region_code",
+            "product_origin_country",
+            "product_origin_country_code",
             "vat",
             "partner_id",
             "invoice",
         ]
 
     @api.model
     def _xls_declaration_line_fields(self):
         """
         Update list in custom module to add/drop columns or change order
+        Use same order as tree view by default
         """
         return [
             "hs_code",
-            "product_origin_country",
-            "src_dest_country",
+            "src_dest_country_code",
             "amount_company_currency",
+            "transaction_code",
             "transaction",
             "weight",
             "suppl_unit_qty",
             "suppl_unit",
+            "transport_code",
             "transport",
+            "region_code",
+            "product_origin_country_code",
             "vat",
         ]
 
     @api.model
     def _xls_template(self):
         """
         Placeholder for excel report template updates
 
         """
         return {}
 
     def done(self):
+        for decl in self:
+            decl.generate_declaration()
+            decl.generate_xml()
         self.write({"state": "done"})
 
     def back2draft(self):
         for decl in self:
-            if decl.xml_attachment_id:
-                raise UserError(
-                    _("Before going back to draft, you must delete the XML export.")
-                )
+            decl.delete_xml()
+            decl.declaration_line_ids.unlink()
         self.write({"state": "draft"})
 
 
 class IntrastatProductComputationLine(models.Model):
     _name = "intrastat.product.computation.line"
     _description = "Intrastat Product Computataion Lines"
 
@@ -1061,35 +959,43 @@
         ondelete="cascade",
         readonly=True,
     )
     company_id = fields.Many2one(related="parent_id.company_id")
     company_currency_id = fields.Many2one(
         related="company_id.currency_id", string="Company currency"
     )
+    company_country_code = fields.Char(
+        related="parent_id.company_id.partner_id.country_id.code",
+        string="Company Country Code",
+    )
     declaration_type = fields.Selection(related="parent_id.declaration_type")
     reporting_level = fields.Selection(related="parent_id.reporting_level")
-    valid = fields.Boolean(compute="_compute_check_validity")
     invoice_line_id = fields.Many2one(
         "account.move.line", string="Invoice Line", readonly=True
     )
     invoice_id = fields.Many2one(
         "account.move", related="invoice_line_id.move_id", string="Invoice"
     )
+    # partner_id is not a related field any more, to auto-fill the VAT
+    # number (via onchange) when you create a computation line manually
     partner_id = fields.Many2one(
-        related="invoice_line_id.move_id.commercial_partner_id", string="Partner"
+        "res.partner",
+        string="Partner",
+        domain=[("parent_id", "=", False)],
     )
     declaration_line_id = fields.Many2one(
         "intrastat.product.declaration.line", string="Declaration Line", readonly=True
     )
     src_dest_country_id = fields.Many2one(
         "res.country",
         string="Country",
         help="Country of Origin/Destination",
     )
     src_dest_country_code = fields.Char(
+        compute="_compute_src_dest_country_code",
         string="Country Code",
         required=True,
         readonly=False,
         help="2 digit code of country of origin/destination.\n"
         "Specify 'XI' for UK Northern Ireland.",
     )
     product_id = fields.Many2one(
@@ -1120,72 +1026,140 @@
         string="Accessory Costs",
         digits="Account",
         help="Amount in company currency of the accessory costs related to "
         "this invoice line (by default, these accessory costs are computed "
         "at the pro-rata of the amount of each invoice line.",
     )
     transaction_id = fields.Many2one(
-        "intrastat.transaction", string="Intrastat Transaction"
+        "intrastat.transaction",
+        string="Intrastat Transaction",
+    )
+    transaction_code = fields.Char(
+        related="transaction_id.code", store=True, string="Transaction Code"
     )
     region_id = fields.Many2one("intrastat.region", string="Intrastat Region")
-    # product_origin_country_id is replaced by product_origin_country_code
-    # this field should be dropped once the localisation modules have been
-    # adapted accordingly
+    # Note that, in l10n_fr_intrastat_product and maybe in other localization modules
+    # region_id is left empty and Odoo writes directly in region_code
+    region_code = fields.Char()
     product_origin_country_id = fields.Many2one(
         "res.country",
         string="Country of Origin of the Product",
         help="Country of origin of the product i.e. product 'made in ____'",
     )
     product_origin_country_code = fields.Char(
-        string="Country of Origin of the Product",
+        compute="_compute_product_origin_country_code",
+        string="Country Code of Origin of the Product",
         size=2,
         required=True,
-        default="QU",
-        help="2 digit code of country of origin of the product except for the UK.\n"
-        "Specify 'XI' for UK Northern Ireland and 'XU' for rest of the UK.\n"
-        "Specify 'QU' when the country is unknown.\n",
+        readonly=False,
+        help="2 digit ISO code of the country of origin of the product.\n"
+        "Specify 'QU' when the country of origin is unknown.\n",
     )
     vat = fields.Char(string="VAT Number")
 
     # extended declaration
     incoterm_id = fields.Many2one("account.incoterms", string="Incoterm")
     transport_id = fields.Many2one("intrastat.transport_mode", string="Transport Mode")
 
-    @api.onchange("src_dest_country_id")
-    def _onchange_src_dest_country_id(self):
-        self.src_dest_country_code = self.src_dest_country_id.code
-        if self.parent_id.year >= "2021" and self.src_dest_country_id:
-            self.src_dest_country_code = self.env[
-                "res.partner"
-            ]._get_intrastat_country_code(country=self.src_dest_country_id)
-
-    @api.depends("transport_id")
-    def _compute_check_validity(self):
-        """TO DO: logic based upon fields"""
+    @api.onchange("region_id")
+    def _region_id_change(self):
+        if self.region_id:
+            self.region_code = self.region_id.code
+
+    @api.depends("src_dest_country_id")
+    def _compute_src_dest_country_code(self):
+        for this in self:
+            code = this.src_dest_country_id and this.src_dest_country_id.code or False
+            if code == "GB":
+                code = "XI"  # Northern Ireland
+            this.src_dest_country_code = code
+
+    @api.depends("product_origin_country_id")
+    def _compute_product_origin_country_code(self):
         for this in self:
-            this.valid = True
+            code = (
+                this.product_origin_country_id
+                and this.product_origin_country_id.code
+                or False
+            )
+            if code == "GB":
+                code = "XU"
+                # XU can be used when you don't know if the product
+                # originate from Great-Britain or from Northern Ireland
+            this.product_origin_country_code = code
 
     @api.constrains("vat")
     def _check_vat(self):
         for this in self:
             if this.vat and not is_valid(this.vat):
                 raise ValidationError(_("The VAT number '%s' is invalid.") % this.vat)
 
-    # TODO: product_id is a readonly related field 'invoice_line_id.product_id'
-    # so the onchange is non-sense. Either we convert product_id to a regular
-    # field or we keep it a related field and we remove this onchange
-    @api.onchange("product_id")
-    def _onchange_product(self):
-        self.weight = 0.0
-        self.suppl_unit_qty = 0.0
-        if self.product_id:
-            self.intrastat_code_id = self.product_id.intrastat_id
-            self.intrastat_unit_id = self.product_id.intrastat_id.intrastat_unit_id
-            if not self.intrastat_unit_id:
-                self.weight = self.product_id.weight
+    @api.onchange("partner_id")
+    def partner_id_change(self):
+        if self.partner_id and self.partner_id.vat:
+            self.vat = self.partner_id.vat
+
+    def _group_line_hashcode_fields(self):
+        self.ensure_one()
+        return {
+            "country": self.src_dest_country_code,
+            "hs_code_id": self.hs_code_id.id or False,
+            "intrastat_unit": self.intrastat_unit_id.id or False,
+            "transaction": self.transaction_id.id or False,
+            "transport": self.transport_id.id or False,
+            "region": self.region_code or False,
+            "product_origin_country": self.product_origin_country_code,
+            "vat": self.vat or False,
+        }
+
+    def group_line_hashcode(self):
+        self.ensure_one()
+        hc_fields = self._group_line_hashcode_fields()
+        hashcode = "-".join([str(f) for f in hc_fields.values()])
+        return hashcode
+
+    def _prepare_grouped_fields(self, fields_to_sum):
+        self.ensure_one()
+        vals = {
+            "src_dest_country_code": self.src_dest_country_code,
+            "intrastat_unit_id": self.intrastat_unit_id.id,
+            "hs_code_id": self.hs_code_id.id,
+            "transaction_id": self.transaction_id.id,
+            "transport_id": self.transport_id.id,
+            "region_code": self.region_code,
+            "parent_id": self.parent_id.id,
+            "product_origin_country_code": self.product_origin_country_code,
+            "amount_company_currency": 0.0,
+            "vat": self.vat,
+        }
+        for field in fields_to_sum:
+            vals[field] = 0.0
+        return vals
+
+    def _fields_to_sum(self):
+        fields_to_sum = ["weight", "suppl_unit_qty"]
+        return fields_to_sum
+
+    def _prepare_declaration_line(self):
+        fields_to_sum = self._fields_to_sum()
+        vals = self[0]._prepare_grouped_fields(fields_to_sum)
+        for computation_line in self:
+            for field in fields_to_sum:
+                vals[field] += computation_line[field]
+            vals["amount_company_currency"] += (
+                computation_line["amount_company_currency"]
+                + computation_line["amount_accessory_cost_company_currency"]
+            )
+        # round, otherwise odoo with truncate (6.7 -> 6... instead of 7 !)
+        for field in fields_to_sum:
+            vals[field] = int(round(vals[field]))
+        if not vals["weight"]:
+            vals["weight"] = 1
+        vals["amount_company_currency"] = int(round(vals["amount_company_currency"]))
+        return vals
 
 
 class IntrastatProductDeclarationLine(models.Model):
     _name = "intrastat.product.declaration.line"
     _description = "Intrastat Product Declaration Lines"
 
     parent_id = fields.Many2one(
@@ -1194,27 +1168,26 @@
         ondelete="cascade",
         readonly=True,
     )
     company_id = fields.Many2one(related="parent_id.company_id")
     company_currency_id = fields.Many2one(
         related="company_id.currency_id", string="Company currency"
     )
+    company_country_code = fields.Char(
+        related="parent_id.company_id.partner_id.country_id.code",
+        string="Company Country Code",
+    )
     declaration_type = fields.Selection(related="parent_id.declaration_type")
     reporting_level = fields.Selection(related="parent_id.reporting_level")
     computation_line_ids = fields.One2many(
         "intrastat.product.computation.line",
         "declaration_line_id",
         string="Computation Lines",
         readonly=True,
     )
-    src_dest_country_id = fields.Many2one(
-        "res.country",
-        string="Country",
-        help="Country of Origin/Destination",
-    )
     src_dest_country_code = fields.Char(
         string="Country Code",
         required=True,
         help="2 digit code of country of origin/destination.\n"
         "Specify 'XI' for UK Northern Ireland and 'XU' for rest of the UK.",
     )
     hs_code_id = fields.Many2one("hs.code", string="Intrastat Code")
@@ -1233,43 +1206,24 @@
         help="Amount in company currency to write in the declaration. "
         "Amount in company currency = amount in invoice currency "
         "converted to company currency with the rate of the invoice date.",
     )
     transaction_id = fields.Many2one(
         "intrastat.transaction", string="Intrastat Transaction"
     )
-    region_id = fields.Many2one("intrastat.region", string="Intrastat Region")
-    # product_origin_country_id is replaced by product_origin_country_code
-    # this field should be dropped once the localisation modules have been
-    # adapted accordingly
-    product_origin_country_id = fields.Many2one(
-        "res.country",
-        string="Country of Origin of the Product",
-        help="Country of origin of the product i.e. product 'made in ____'",
+    transaction_code = fields.Char(
+        related="transaction_id.code", store=True, string="Transaction Code"
     )
+    region_code = fields.Char()
     product_origin_country_code = fields.Char(
         string="Country of Origin of the Product",
         size=2,
         required=True,
         default="QU",
         help="2 digit code of country of origin of the product except for the UK.\n"
         "Specify 'XI' for UK Northern Ireland and 'XU' for rest of the UK.\n"
         "Specify 'QU' when the country is unknown.\n",
     )
     vat = fields.Char(string="VAT Number")
     # extended declaration
     incoterm_id = fields.Many2one("account.incoterms", string="Incoterm")
     transport_id = fields.Many2one("intrastat.transport_mode", string="Transport Mode")
-
-    @api.onchange("src_dest_country_id")
-    def _onchange_src_dest_country_id(self):
-        self.src_dest_country_code = self.src_dest_country_id.code
-        if self.parent_id.year >= "2021" and self.src_dest_country_id:
-            self.src_dest_country_code = self.env[
-                "res.partner"
-            ]._get_intrastat_country_code(country=self.src_dest_country_id)
-
-    @api.constrains("vat")
-    def _check_vat(self):
-        for this in self:
-            if this.vat and not is_valid(this.vat):
-                raise ValidationError(_("The VAT number '%s' is invalid.") % this.vat)
```

## odoo/addons/intrastat_product/models/intrastat_region.py

```diff
@@ -12,17 +12,11 @@
             "intrastat_region_code_unique",
             "UNIQUE(code, country_id)",  # TODO add company_id ?
             "Code must be unique.",
         )
     ]
 
     code = fields.Char(required=True)
-    country_id = fields.Many2one(
-        comodel_name="res.country", string="Country", required=True
-    )
+    country_id = fields.Many2one(comodel_name="res.country", required=True)
     name = fields.Char(translate=True)
     description = fields.Char()
-    company_id = fields.Many2one(
-        comodel_name="res.company",
-        string="Company",
-        default=lambda self: self.env.company,
-    )
+    company_id = fields.Many2one("res.company", default=lambda self: self.env.company)
```

## odoo/addons/intrastat_product/models/intrastat_transaction.py

```diff
@@ -1,39 +1,39 @@
 # Copyright 2011-2020 Akretion France (http://www.akretion.com)
 # Copyright 2009-2020 Noviat (http://www.noviat.com)
 # @author Alexis de Lattre <alexis.delattre@akretion.com>
 # @author Luc de Meyer <info@noviat.com>
 
+from textwrap import shorten
+
 from odoo import api, fields, models
 
 
 class IntrastatTransaction(models.Model):
     _name = "intrastat.transaction"
     _description = "Intrastat Transaction"
+    _rec_name = "code"
     _order = "code"
     _sql_constraints = [
         (
             "intrastat_transaction_code_unique",
             "UNIQUE(code, company_id)",
             "Code must be unique.",
         )
     ]
 
     code = fields.Char(required=True)
     description = fields.Text()
-    company_id = fields.Many2one(
-        comodel_name="res.company",
-        string="Company",
-        default=lambda self: self.env.company,
-    )
+    # intrastat.transaction are shared among companies by default
+    company_id = fields.Many2one("res.company")
     active = fields.Boolean(default=True)
 
     @api.depends("code", "description")
     def name_get(self):
         res = []
         for this in self:
             name = this.code
             if this.description:
                 name += " " + this.description
-            name = len(name) > 55 and name[:55] + "..." or name
+            name = shorten(name, 55)
             res.append((this.id, name))
         return res
```

## odoo/addons/intrastat_product/models/res_company.py

```diff
@@ -31,30 +31,14 @@
         store=True,
         readonly=True,
         compute="_compute_intrastat",
     )
     intrastat_region_id = fields.Many2one(
         comodel_name="intrastat.region", string="Default Intrastat Region"
     )
-    intrastat_transaction_out_invoice = fields.Many2one(
-        comodel_name="intrastat.transaction",
-        string="Default Intrastat Transaction For Customer Invoice",
-    )
-    intrastat_transaction_out_refund = fields.Many2one(
-        comodel_name="intrastat.transaction",
-        string="Default Intrastat Transaction for Customer Refunds",
-    )
-    intrastat_transaction_in_invoice = fields.Many2one(
-        comodel_name="intrastat.transaction",
-        string="Default Intrastat Transaction For Supplier Invoices",
-    )
-    intrastat_transaction_in_refund = fields.Many2one(
-        comodel_name="intrastat.transaction",
-        string="Default Intrastat Transaction For Supplier Refunds",
-    )
     intrastat_accessory_costs = fields.Boolean(
         string="Include Accessory Costs in Fiscal Value of Product"
     )
 
     @api.model
     def _intrastat_arrivals(self):
         return [
```

## odoo/addons/intrastat_product/report/intrastat_product_report_xls.py

```diff
@@ -1,14 +1,13 @@
 # Copyright 2009-2022 Noviat
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 
 import logging
 
 from odoo import _, models
-from odoo.tools.translate import translate
 
 from odoo.addons.report_xlsx_helper.report.report_xlsx_format import (
     FORMATS,
     XLS_HEADERS,
 )
 
 _logger = logging.getLogger(__name__)
@@ -18,220 +17,258 @@
 
 
 class IntrastatProductDeclarationXlsx(models.AbstractModel):
     _name = "report.intrastat_product.product_declaration_xls"
     _inherit = "report.report_xlsx.abstract"
     _description = "Intrastat declaration"
 
-    def _(self, src):
-        lang = self.env.context.get("lang", "en_US")
-        val = translate(self.env.cr, IR_TRANSLATION_NAME, "report", lang, src) or src
-        return val
-
     def _get_template(self, declaration):
+        """
+        Return a dictionary that contains columns specifications
+        see: report_xlsx_helper / _write_line() method
+        """
 
         template = {
             "product": {
-                "header": {"type": "string", "value": self._("Product")},
+                "header": {"type": "string", "value": _("Product")},
                 "line": {
                     "value": self._render("line.product_id and line.product_id.name")
                 },
                 "width": 36,
             },
+            "product_origin_country_code": {
+                "header": {"type": "string", "value": _("Product C/O Code")},
+                "line": {
+                    "type": "string",
+                    "value": self._render("line.product_origin_country_code or ''"),
+                },
+                "width": 10,
+            },
             "product_origin_country": {
-                "header": {"type": "string", "value": self._("Product C/O")},
+                "header": {"type": "string", "value": _("Product C/O")},
                 "line": {
                     "type": "string",
                     "value": self._render("line.product_origin_country_id.name or ''"),
                 },
                 "width": 28,
             },
             "hs_code": {
-                "header": {"type": "string", "value": self._("Intrastat Code")},
+                "header": {"type": "string", "value": _("Intrastat Code")},
                 "line": {
                     "type": "string",
                     "value": self._render("line.hs_code_id.local_code"),
                 },
                 "width": 14,
             },
-            "src_dest_country": {
+            "src_dest_country_code": {
                 "header": {
                     "type": "string",
-                    "value": self._("Country of Origin/Destination"),
+                    "value": _("Country Code of Origin/Destination"),
                 },
                 "line": {
                     "type": "string",
                     "value": self._render("line.src_dest_country_code"),
                 },
+                "width": 10,
+            },
+            "src_dest_country": {
+                "header": {
+                    "type": "string",
+                    "value": _("Country of Origin/Destination"),
+                },
+                "line": {
+                    "type": "string",
+                    "value": self._render("line.src_dest_country_id.name"),
+                },
                 "width": 28,
             },
             "amount_company_currency": {
                 "header": {
                     "type": "string",
-                    "value": self._("Fiscal Value"),
+                    "value": _("Fiscal Value"),
                     "format": FORMATS["format_theader_yellow_right"],
                 },
                 "line": {
                     "type": "number",
                     "value": self._render("line.amount_company_currency"),
                     "format": FORMATS["format_tcell_amount_right"],
                 },
                 "width": 18,
             },
             "accessory_cost": {
                 "header": {
                     "type": "string",
-                    "value": self._("Accessory Costs"),
+                    "value": _("Accessory Costs"),
                     "format": FORMATS["format_theader_yellow_right"],
                 },
                 "line": {
                     "type": "number",
                     "value": self._render(
                         "line.amount_accessory_cost_company_currency"
                     ),
                     "format": FORMATS["format_tcell_amount_right"],
                 },
                 "width": 18,
             },
+            "transaction_code": {
+                "header": {
+                    "type": "string",
+                    "value": _("Intrastat Transaction code"),
+                },
+                "line": {"value": self._render("line.transaction_id.code")},
+                "width": 10,
+            },
             "transaction": {
-                "header": {"type": "string", "value": self._("Intrastat Transaction")},
+                "header": {"type": "string", "value": _("Intrastat Transaction")},
                 "line": {"value": self._render("line.transaction_id.display_name")},
                 "width": 36,
             },
             "weight": {
                 "header": {
                     "type": "string",
-                    "value": self._("Weight"),
+                    "value": _("Weight"),
                     "format": FORMATS["format_theader_yellow_right"],
                 },
                 "line": {
                     "type": "number",
                     "value": self._render("line.weight"),
                     "format": FORMATS["format_tcell_amount_right"],
                 },
                 "width": 18,
             },
             "suppl_unit_qty": {
                 "header": {
                     "type": "string",
-                    "value": self._("Suppl. Unit Qty"),
+                    "value": _("Suppl. Unit Qty"),
                     "format": FORMATS["format_theader_yellow_right"],
                 },
                 "line": {
                     # we don't specify a type here and rely on the
                     # report_xlsx_helper type detection to use
                     # write_string when suppl_unit_qty is zero
                     "value": self._render("line.suppl_unit_qty or ''"),
                     "format": FORMATS["format_tcell_amount_right"],
                 },
                 "width": 18,
             },
             "suppl_unit": {
-                "header": {"type": "string", "value": self._("Suppl. Unit")},
+                "header": {"type": "string", "value": _("Suppl. Unit")},
                 "line": {"value": self._render("line.intrastat_unit_id.name or ''")},
                 "width": 14,
             },
             "incoterm": {
-                "header": {"type": "string", "value": self._("Incoterm")},
+                "header": {"type": "string", "value": _("Incoterm")},
                 "line": {"value": self._render("line.incoterm_id.name or ''")},
                 "width": 14,
             },
+            "transport_code": {
+                "header": {"type": "string", "value": _("Transport Mode Code")},
+                "line": {"value": self._render("line.transport_id.code or ''")},
+                "width": 10,
+            },
             "transport": {
-                "header": {"type": "string", "value": self._("Transport Mode")},
+                "header": {"type": "string", "value": _("Transport Mode")},
                 "line": {"value": self._render("line.transport_id.name or ''")},
                 "width": 14,
             },
             "region": {
-                "header": {"type": "string", "value": self._("Intrastat Region")},
+                "header": {"type": "string", "value": _("Intrastat Region")},
                 "line": {"value": self._render("line.region_id.name or ''")},
                 "width": 28,
             },
+            "region_code": {
+                "header": {"type": "string", "value": _("Intrastat Region Code")},
+                "line": {"value": self._render("line.region_code or ''")},
+                "width": 10,
+            },
             "vat": {
-                "header": {"type": "string", "value": self._("VAT")},
+                "header": {"type": "string", "value": _("VAT")},
                 "line": {"value": self._render("line.vat or ''")},
                 "width": 20,
             },
             "partner_id": {
-                "header": {"type": "string", "value": self._("Partner")},
+                "header": {"type": "string", "value": _("Partner")},
                 "line": {"value": self._render("line.partner_id.display_name or ''")},
                 "width": 28,
             },
             "invoice": {
-                "header": {"type": "string", "value": self._("Invoice")},
+                "header": {"type": "string", "value": _("Invoice")},
                 "line": {"value": self._render("line.invoice_id.name")},
                 "width": 18,
             },
         }
         template.update(declaration._xls_template())
 
         return template
 
-    def _get_ws_params(self, wb, data, declaration):
-        template = self._get_template(declaration)
-        if self.env.context.get("computation_lines"):
-            wl = declaration._xls_computation_line_fields()
-            report = "computation"
-        else:
-            wl = declaration._xls_declaration_line_fields()
-            report = "declaration"
-
-        title = self._get_title(declaration, report, title_format="normal")
-        title_short = self._get_title(declaration, report, title_format="short")
-        sheet_name = title_short[:31].replace("/", "-")
-
-        params = {
-            "ws_name": sheet_name,
-            "generate_ws_method": "_intrastat_report",
-            "title": title,
-            "wanted_list": wl,
-            "col_specs": template,
-        }
-        return [params]
-
-    def _get_title(self, declaration, report, title_format="normal"):
-        title = declaration.year_month
-        if title_format == "normal":
-            if report == "computation":
-                title += " : " + _("Computation Lines")
-            else:
-                title += " : " + _("Declaration Lines")
-        return title
+    def _get_ws_params(self, wb, data, declarations):
+        template = self._get_template(declarations)
+        res = []
+        wanted_list_computation = declarations._xls_computation_line_fields()
+        wanted_list_declaration = declarations._xls_declaration_line_fields()
+        for declaration in declarations:
+            dname = declaration.display_name
+            res += [
+                {
+                    "ws_name": "%s %s" % (dname, _("comput.")),
+                    "generate_ws_method": "_intrastat_report_computation",
+                    "title": "%s : %s" % (dname, _("Computation Lines")),
+                    "wanted_list": wanted_list_computation,
+                    "col_specs": template,
+                },
+                {
+                    "ws_name": "%s %s" % (dname, _("decl.")),
+                    "generate_ws_method": "_intrastat_report_declaration",
+                    "title": "%s : %s" % (dname, _("Declaration Lines")),
+                    "wanted_list": wanted_list_declaration,
+                    "col_specs": template,
+                },
+            ]
+        return res
 
     def _report_title(self, ws, row_pos, ws_params, data, declaration):
         return self._write_ws_title(ws, row_pos, ws_params)
 
     def _empty_report(self, ws, row_pos, ws_params, data, declaration, report):
         if report == "computation":
             lines = _("Computation Lines")
         else:
             lines = _("Declaration Lines")
         no_entries = (
             _("No") + " " + lines + " " + _("for period %s") % declaration.year_month
         )
         ws.write_string(row_pos, 0, no_entries, FORMATS["format_left_bold"])
 
-    def _intrastat_report(self, workbook, ws, ws_params, data, declaration):
+    def _intrastat_report_computation(self, workbook, ws, ws_params, data, declaration):
+        report = "computation"
+        lines = declaration.computation_line_ids
+        self._intrastat_report(
+            workbook, ws, ws_params, data, declaration, lines, report
+        )
 
+    def _intrastat_report_declaration(self, workbook, ws, ws_params, data, declaration):
+        report = "declaration"
+        lines = declaration.declaration_line_ids
+        self._intrastat_report(
+            workbook, ws, ws_params, data, declaration, lines, report
+        )
+
+    def _intrastat_report(
+        self, workbook, ws, ws_params, data, declaration, lines, report
+    ):
         ws.set_landscape()
         ws.fit_to_pages(1, 0)
         ws.set_header(XLS_HEADERS["xls_headers"]["standard"])
         ws.set_footer(XLS_HEADERS["xls_footers"]["standard"])
 
         self._set_column_width(ws, ws_params)
 
         row_pos = 0
         row_pos = self._report_title(ws, row_pos, ws_params, data, declaration)
 
-        if self.env.context.get("computation_lines"):
-            report = "computation"
-            lines = declaration.computation_line_ids
-        else:
-            report = "declaration"
-            lines = declaration.declaration_line_ids
-
         if not lines:
             return self._empty_report(ws, row_pos, ws_params, data, declaration, report)
 
         row_pos = self._write_line(
             ws,
             row_pos,
             ws_params,
```

## odoo/addons/intrastat_product/static/description/index.html

### odoo/addons/intrastat_product/static/description/index.html

```diff
@@ -367,21 +367,21 @@
       <p>
         <a class="reference external" href="https://odoo-community.org/page/development-status">
           <img alt="Beta" src="https://img.shields.io/badge/maturity-Beta-yellow.png"/>
         </a>
         <a class="reference external" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html">
           <img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png"/>
         </a>
-        <a class="reference external" href="https://github.com/OCA/intrastat-extrastat/tree/15.0/intrastat_product">
+        <a class="reference external" href="https://github.com/OCA/intrastat-extrastat/tree/16.0/intrastat_product">
           <img alt="OCA/intrastat-extrastat" src="https://img.shields.io/badge/github-OCA%2Fintrastat--extrastat-lightgray.png?logo=github"/>
         </a>
-        <a class="reference external" href="https://translation.odoo-community.org/projects/intrastat-extrastat-15-0/intrastat-extrastat-15-0-intrastat_product">
+        <a class="reference external" href="https://translation.odoo-community.org/projects/intrastat-extrastat-16-0/intrastat-extrastat-16-0-intrastat_product">
           <img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png"/>
         </a>
-        <a class="reference external" href="https://runbot.odoo-community.org/runbot/227/15.0">
+        <a class="reference external" href="https://runbot.odoo-community.org/runbot/227/16.0">
           <img alt="Try me on Runbot" src="https://img.shields.io/badge/runbot-Try%20me-875A7B.png"/>
         </a>
       </p>
       <p>This module contains common objects and fields for the Intrastat Product reporting.</p>
       <p>It should be used in combination with country-specific Intrastat Product reporting modules
 such as:</p>
       <ul class="simple">
@@ -545,15 +545,15 @@
         </h1>
         <p>
           Bugs are tracked on
           <a class="reference external" href="https://github.com/OCA/intrastat-extrastat/issues">GitHub Issues</a>
           .
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-          <a class="reference external" href="https://github.com/OCA/intrastat-extrastat/issues/new?body=module:%20intrastat_product%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>
+          <a class="reference external" href="https://github.com/OCA/intrastat-extrastat/issues/new?body=module:%20intrastat_product%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>
           .
         </p>
         <p>Do not contact contributors directly about support or help with technical issues.</p>
       </div>
       <div class="section" id="credits">
         <h1>
           <a class="toc-backref" href="#id6">Credits</a>
@@ -615,15 +615,15 @@
             <img alt="Odoo Community Association" src="https://odoo-community.org/logo.png"/>
           </a>
           <p>OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.</p>
           <p>
             This module is part of the
-            <a class="reference external" href="https://github.com/OCA/intrastat-extrastat/tree/15.0/intrastat_product">OCA/intrastat-extrastat</a>
+            <a class="reference external" href="https://github.com/OCA/intrastat-extrastat/tree/16.0/intrastat_product">OCA/intrastat-extrastat</a>
             project on GitHub.
           </p>
           <p>
             You are welcome to contribute. To learn how please visit
             <a class="reference external" href="https://odoo-community.org/page/Contribute">https://odoo-community.org/page/Contribute</a>
             .
           </p>
```

## odoo/addons/intrastat_product/tests/common.py

```diff
@@ -1,9 +1,11 @@
 # Copyright 2021 ACSONE SA/NV
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
+import xlrd
+from werkzeug.urls import url_encode
 
 from odoo.addons.intrastat_base.tests.common import IntrastatCommon
 
 
 class IntrastatProductCommon(IntrastatCommon):
     @classmethod
     def _init_products(cls):
@@ -12,32 +14,35 @@
             "name": "Robots",
             "parent_id": cls.category_saleable.id,
         }
         cls.categ_robots = cls.category_obj.create(vals)
 
         vals = {
             "name": "C3PO",
+            "type": "consu",
             "categ_id": cls.categ_robots.id,
             "origin_country_id": cls.env.ref("base.us").id,
             "weight": 300,
             # Computer - C3PO is one of them
             "hs_code_id": cls.hs_code_computer.id,
+            "list_price": 42,
         }
         cls.product_c3po = cls.product_template_obj.create(vals)
 
     @classmethod
     def _init_company(cls):
         # Default transport for company is Road
         cls.demo_company.intrastat_transport_id = cls.transport_road
 
     @classmethod
     def _init_fiscal_position(cls):
         vals = {
             "name": "Intrastat Fiscal Position",
-            "intrastat": True,
+            "intrastat": "b2b",
+            "vat_required": True,
         }
         cls.position = cls.position_obj.create(vals)
 
     @classmethod
     def _init_regions(cls):
         # Create Region
         cls._create_region()
@@ -47,34 +52,124 @@
             "name": "Germany",
             "country_id": cls.env.ref("base.de").id,
             "description": "Germany",
         }
         cls._create_region(vals)
 
     @classmethod
+    def _init_transaction(cls):
+        vals = {
+            "code": "9X",
+            "company_id": cls.env.company.id,
+            "description": "Test 9X",
+        }
+        cls._create_transaction(vals)
+
+    @classmethod
     def setUpClass(cls):
         super().setUpClass()
         cls.region_obj = cls.env["intrastat.region"]
         cls.transaction_obj = cls.env["intrastat.transaction"]
         cls.transport_mode_obj = cls.env["intrastat.transport_mode"]
         cls.partner_obj = cls.env["res.partner"]
         cls.category_saleable = cls.env.ref("product.product_category_1")
         cls.category_obj = cls.env["product.category"]
         cls.product_template_obj = cls.env["product.template"]
         cls.declaration_obj = cls.env["intrastat.product.declaration"]
         cls.position_obj = cls.env["account.fiscal.position"]
         cls.hs_code_computer = cls.env.ref("product_harmonized_system.84715000")
+        cls.report_obj = cls.env["ir.actions.report"]
+        cls.xls_declaration = cls.env[
+            "report.intrastat_product.product_declaration_xls"
+        ]
 
         cls.transport_rail = cls.env.ref("intrastat_product.intrastat_transport_2")
         cls.transport_road = cls.env.ref("intrastat_product.intrastat_transport_3")
 
         cls._init_regions()
         cls._init_company()
         cls._init_fiscal_position()
         cls._init_products()
+        cls._init_transaction()
+
+    @classmethod
+    def _create_xls(cls, declaration=False):
+        """
+            Prepare the Excel report to be tested
+
+        :return: The Excel file
+        :rtype: bytes
+        """
+        report = cls.env.ref(
+            "intrastat_product.intrastat_product_xlsx_report"
+        ).with_context(active_ids=cls.declaration.ids)
+        report_name = report.report_name
+        cls.report = cls.report_obj._get_report_from_name(report_name)
+        datas = {
+            "context": {
+                "active_ids": [cls.declaration.id],
+            }
+        }
+        data = {}
+        encoded_data = "report/report_xlsx/" + report_name + "?" + url_encode(data)
+        datas["data"] = encoded_data
+        active_model = cls.declaration._name
+        if not declaration:
+            computation_lines = True
+        else:
+            computation_lines = False
+        file_data = cls.xls_declaration.with_context(
+            computation_lines=computation_lines, active_model=active_model
+        ).create_xlsx_report(None, datas)
+        return file_data
+
+    def check_xls(self, xls):
+        """
+            Check that the xls content correspond to computation/declaration
+            lines values
+
+        :param xls: the Excel file content
+        :type xls: bytes
+        :param declaration: By default, check computation lines, either declaration ones
+        :type declaration: bool, optional
+        """
+        book = xlrd.open_workbook(file_contents=xls)
+        # Get the template used to build the Excel file lines
+        template = self.xls_declaration._get_template(self.declaration)
+        # Get the declaration lines or the computation ones
+        to_test = [
+            (
+                book.sheet_by_index(0),
+                self.declaration.computation_line_ids,
+                self.declaration._xls_computation_line_fields(),
+            ),
+            (
+                book.sheet_by_index(1),
+                self.declaration.declaration_line_ids,
+                self.declaration._xls_declaration_line_fields(),
+            ),
+        ]
+        # Iterate on each row beginning on third one (two headers)
+        for (sheet, lines, line_fields) in to_test:
+            i = 0
+            for rx in range(3, sheet.nrows):
+                line = lines[i]
+                row = sheet.row(rx)
+                j = 0
+                dict_compare = dict()
+                for line_field in line_fields:
+                    column_spec = template.get(line_field)
+                    dict_compare.update(
+                        {row[j].value: column_spec.get("line").get("value")}
+                    )
+                    j += 1
+                for key, value in dict_compare.items():
+                    value_eval = self.xls_declaration._eval(value, {"line": line})
+                    self.assertEqual(key, value_eval)
+                i += 1
 
     @classmethod
     def _create_region(cls, vals=None):
         values = {
             "code": "2",
             "country_id": cls.env.ref("base.be").id,
             "company_id": cls.env.company.id,
```

## odoo/addons/intrastat_product/tests/common_purchase.py

```diff
@@ -12,17 +12,17 @@
     """
 
     def _get_expected_vals(self, line):
         return {
             "declaration_type": "arrivals",
             "suppl_unit_qty": line.qty_received,
             "hs_code_id": line.product_id.hs_code_id,
-            "product_origin_country_id": line.product_id.origin_country_id,
+            "product_origin_country_code": line.product_id.origin_country_id.code,
             "amount_company_currency": line.price_subtotal,
-            "src_dest_country_id": line.partner_id.country_id,
+            "src_dest_country_code": line.partner_id.country_id.code,
         }
 
     def _check_line_values(self, final=False, declaration=None, purchase=None):
         """
         This method allows to test computation lines and declaration
         lines values from original sale order line
         """
```

## odoo/addons/intrastat_product/tests/common_sale.py

```diff
@@ -12,15 +12,15 @@
     """
 
     def _get_expected_vals(self, line):
         return {
             "declaration_type": "dispatches",
             "suppl_unit_qty": line.qty_delivered,
             "hs_code_id": line.product_id.hs_code_id,
-            "product_origin_country_id": line.product_id.origin_country_id,
+            "product_origin_country_code": line.product_id.origin_country_id.code,
         }
 
     def _check_line_values(self, final=False, declaration=None, sale=None):
         """
         This method allows to test computation lines and declaration
         lines values from original sale order line
         """
@@ -43,17 +43,18 @@
                 self.assertTrue(
                     all(decl_line[key] == val for key, val in expected_vals.items())
                 )
 
     @classmethod
     def _init_customer(cls, vals=None):
         values = {
-            "name": "NL Customer",
-            "country_id": cls.env.ref("base.nl").id,
+            "name": "Akretion France",
+            "country_id": cls.env.ref("base.fr").id,
             "property_account_position_id": cls.position.id,
+            "vat": "FR86792377731",
         }
         if vals is not None:
             values.update(vals)
         cls.customer = cls.partner_obj.create(values)
 
     @classmethod
     def setUpClass(cls):
@@ -63,14 +64,13 @@
 
     @classmethod
     def _create_sale_order(cls, vals=None):
         vals = {
             "partner_id": cls.customer.id,
         }
         sale_new = cls.sale_obj.new(vals)
-        sale_new.onchange_partner_id()
         sale_vals = sale_new._convert_to_write(sale_new._cache)
         cls.sale = cls.sale_obj.create(sale_vals)
         with Form(cls.sale) as sale_form:
             with sale_form.order_line.new() as line:
                 line.product_id = cls.product_c3po.product_variant_ids[0]
                 line.product_uom_qty = 3.0
```

## odoo/addons/intrastat_product/tests/test_brexit.py

```diff
@@ -13,33 +13,21 @@
         cls.inv_obj = cls.env["account.move"]
         cls.hs_code_whiskey = cls.env["hs.code"].create(
             {
                 "description": "Whiskey",
                 "local_code": "22083000",
             }
         )
-        cls.product_xi = cls.env["product.product"].create(
+        cls.product_uk = cls.env["product.product"].create(
             {
                 "name": "Bushmills Original",
                 "weight": 1.4,
                 "list_price": 30.0,
                 "standard_price": 15.0,
                 "origin_country_id": cls.env.ref("base.uk").id,
-                "origin_state_id": cls.env.ref("base.state_uk18").id,
-                "hs_code_id": cls.hs_code_whiskey.id,
-            }
-        )
-        cls.product_xu = cls.env["product.product"].create(
-            {
-                "name": "Glenfiddich",
-                "weight": 1.4,
-                "list_price": 50.0,
-                "standard_price": 25.0,
-                "origin_country_id": cls.env.ref("base.uk").id,
-                "origin_state_id": cls.env.ref("base.state_uk6").id,
                 "hs_code_id": cls.hs_code_whiskey.id,
             }
         )
         cls.partner_xi = cls.env["res.partner"].create(
             {
                 "name": "Bushmills Distillery",
                 "country_id": cls.env.ref("base.uk").id,
@@ -49,15 +37,14 @@
             }
         )
 
     def test_brexit_sale(self):
         inv_out_xi = self.inv_obj.with_context(default_move_type="out_invoice").create(
             {
                 "partner_id": self.partner_xi.id,
-                "partner_shipping_id": self.partner_xi.id,
                 "fiscal_position_id": self.position.id,
             }
         )
         with Form(inv_out_xi) as inv_form:
             with inv_form.invoice_line_ids.new() as ail:
                 ail.product_id = self.product_c3po.product_variant_ids[0]
         inv_out_xi.action_post()
@@ -66,62 +53,56 @@
             {
                 "declaration_type": "dispatches",
                 "year": str(inv_out_xi.date.year),
                 "month": str(inv_out_xi.date.month).zfill(2),
             }
         )
         self.declaration.action_gather()
-        self.declaration.generate_declaration()
+        self.declaration.done()
         cline = self.declaration.computation_line_ids
         dline = self.declaration.declaration_line_ids
         self.assertEqual(cline.src_dest_country_code, "XI")
         self.assertEqual(dline.src_dest_country_code, "XI")
 
     def test_brexit_purchase(self):
         inv_in_xi = self.inv_obj.with_context(default_move_type="in_invoice").create(
             {
                 "partner_id": self.partner_xi.id,
                 "fiscal_position_id": self.position.id,
             }
         )
         with Form(inv_in_xi) as inv_form:
             with inv_form.invoice_line_ids.new() as ail:
-                ail.product_id = self.product_xi
-            with inv_form.invoice_line_ids.new() as ail:
-                ail.product_id = self.product_xu
+                ail.product_id = self.product_uk
         inv_in_xi.invoice_date = inv_in_xi.date
         inv_in_xi.action_post()
 
         self._create_declaration(
             {
                 "declaration_type": "arrivals",
                 "year": str(inv_in_xi.date.year),
                 "month": str(inv_in_xi.date.month).zfill(2),
             }
         )
         self.declaration.action_gather()
-        self.declaration.generate_declaration()
+        self.declaration.done()
         clines = self.declaration.computation_line_ids
-        cl_xi = clines.filtered(lambda r: r.product_id == self.product_xi)
-        cl_xu = clines.filtered(lambda r: r.product_id == self.product_xu)
+        cl_uk = clines.filtered(lambda r: r.product_id == self.product_uk)
         dlines = self.declaration.declaration_line_ids
-        dl_xi = dlines.filtered(lambda r: r.computation_line_ids == cl_xi)
-        dl_xu = dlines.filtered(lambda r: r.computation_line_ids == cl_xu)
-        self.assertEqual(cl_xi.product_origin_country_code, "XI")
-        self.assertEqual(cl_xu.product_origin_country_code, "XU")
-        self.assertEqual(dl_xi.product_origin_country_code, "XI")
-        self.assertEqual(dl_xu.product_origin_country_code, "XU")
+        dl_uk = dlines.filtered(lambda r: r.computation_line_ids == cl_uk)
+        self.assertEqual(cl_uk.product_origin_country_code, "XU")
+        self.assertEqual(dl_uk.product_origin_country_code, "XU")
 
     def test_brexit_invoice_intrastat_details(self):
         inv_in_xi = self.inv_obj.with_context(default_move_type="in_invoice").create(
             {
                 "partner_id": self.partner_xi.id,
                 "fiscal_position_id": self.position.id,
             }
         )
         with Form(inv_in_xi) as inv_form:
             with inv_form.invoice_line_ids.new() as ail:
-                ail.product_id = self.product_xi
+                ail.product_id = self.product_uk
         inv_in_xi.invoice_date = inv_in_xi.date
         inv_in_xi.compute_intrastat_lines()
         ilines = inv_in_xi.intrastat_line_ids
-        self.assertEqual(ilines.product_origin_country_code, "XI")
+        self.assertEqual(ilines.product_origin_country_id, self.env.ref("base.uk"))
```

## odoo/addons/intrastat_product/tests/test_intrastat_product.py

```diff
@@ -66,22 +66,29 @@
         """
         vals = {"declaration_type": "dispatches"}
         self._create_declaration(vals)
         decl_copy = self.declaration.copy()
         self.assertEqual(self.declaration.revision + 1, decl_copy.revision)
 
     def test_declaration_manual_lines(self):
-        vals = {"declaration_type": "dispatches"}
+        vals = {"declaration_type": "dispatches", "reporting_level": "extended"}
         self._create_declaration(vals)
         computation_line_form = Form(
             self.env["intrastat.product.computation.line"].with_context(
                 default_parent_id=self.declaration.id
             )
         )
-        computation_line_form.src_dest_country_code = "FR"
+        computation_line_form.src_dest_country_id = self.env.ref("base.fr")
+        computation_line_form.transaction_id = self.transaction
+        computation_line_form.hs_code_id = self.hs_code_computer
+        computation_line_form.region_code = "ZZ"
+        computation_line_form.product_origin_country_code = "BE"
+        computation_line_form.transport_id = self.env.ref(
+            "intrastat_product.intrastat_transport_3"
+        )
         computation_line = computation_line_form.save()
         self.assertEqual(computation_line.src_dest_country_code, "FR")
         declaration_line_form = Form(
             self.env["intrastat.product.declaration.line"].with_context(
                 default_parent_id=self.declaration.id
             )
         )
@@ -95,15 +102,14 @@
             self._create_declaration()
             self.declaration.flush()
 
     def test_declaration_no_vat(self):
         self.demo_company.partner_id.vat = False
         with self.assertRaises(UserError):
             self._create_declaration()
-            self.declaration.flush()
             self.declaration._check_generate_xml()
 
     def test_declaration_state(self):
         self._create_declaration()
         self.declaration.unlink()
 
         self._create_declaration()
@@ -119,17 +125,17 @@
         with order_form.order_line.new() as line_form:
             line_form.product_id = self.product
         return order_form.save()
 
     def _test_invoice_report(self, weight):
         """We need to check weight because if intrastat_line_ids already exist
         the weight will be different because weight field in model is integer."""
-        res = self.report_obj._get_report_from_name(
-            "account.report_invoice_with_payments"
-        )._render_qweb_text(self.invoice.ids, False)
+        res = self.report_obj._render(
+            "account.report_invoice_with_payments", self.invoice.ids
+        )
         self.assertRegex(str(res[0]), self.product.hs_code_id.hs_code)
         self.assertRegex(str(res[0]), self.product.origin_country_id.name)
         res = list(self.invoice._get_intrastat_lines_info())
         self.assertEqual(len(res), 1)
         self.assertEqual(res[0]["product_id"], self.product)
         self.assertEqual(res[0]["hs_code_id"], self.product.hs_code_id)
         self.assertEqual(res[0]["origin_country_id"], self.product.origin_country_id)
```

## odoo/addons/intrastat_product/tests/test_purchase_order.py

```diff
@@ -15,15 +15,15 @@
         date_order = "2021-09-01"
         declaration_date = "2021-10-01"
         with freeze_time(date_order):
             self._create_purchase_order()
         self.purchase.button_confirm()
         self.purchase.picking_ids.action_assign()
         for line in self.purchase.picking_ids.move_line_ids:
-            line.qty_done = line.product_uom_qty
+            line.qty_done = line.reserved_uom_qty
         self.purchase.picking_ids._action_done()
         self.assertEqual("done", self.purchase.picking_ids.state)
 
         with freeze_time(date_order):
             action = self.purchase.action_create_invoice()
         invoice_id = action["res_id"]
         invoice = self.move_obj.browse(invoice_id)
@@ -41,13 +41,17 @@
             "declaration_type": "arrivals",
         }
         with freeze_time(declaration_date):
             self._create_declaration(vals)
         self.declaration.action_gather()
 
         self._check_line_values()
-        self.declaration.generate_declaration()
+        self.declaration.done()
         self._check_line_values(final=True)
 
+        # Check the Excel file
+        file_data = self._create_xls()
+        self.check_xls(file_data[0])
+
 
 class TestIntrastatProductPurchaseCase(TestIntrastatProductPurchase, TransactionCase):
     """Test Intrastat Purchase"""
```

## odoo/addons/intrastat_product/tests/test_sale_order.py

```diff
@@ -11,15 +11,15 @@
     """Tests for this module"""
 
     def test_sale_to_invoice_default(self):
         self._create_sale_order()
         self.sale.action_confirm()
         self.sale.picking_ids.action_assign()
         for line in self.sale.picking_ids.move_line_ids:
-            line.qty_done = line.product_uom_qty
+            line.qty_done = line.reserved_uom_qty
         self.sale.picking_ids._action_done()
         self.assertEqual("done", self.sale.picking_ids.state)
 
         invoice = self.sale._create_invoices()
         invoice.action_post()
 
         # Check if transport mode has been transmitted to invoice
@@ -32,15 +32,15 @@
     def test_sale_to_invoice(self):
         self._create_sale_order()
         # Set intrastat transport mode to rail
         self.sale.intrastat_transport_id = self.transport_rail
         self.sale.action_confirm()
         self.sale.picking_ids.action_assign()
         for line in self.sale.picking_ids.move_line_ids:
-            line.qty_done = line.product_uom_qty
+            line.qty_done = line.reserved_uom_qty
         self.sale.picking_ids._action_done()
         self.assertEqual("done", self.sale.picking_ids.state)
 
         invoice = self.sale._create_invoices()
         invoice.action_post()
 
         # Check if transport mode has been transmitted to invoice
@@ -55,15 +55,15 @@
         with freeze_time(date_order):
             self._create_sale_order()
         # Set intrastat transport mode to rail
         self.sale.intrastat_transport_id = self.transport_rail
         self.sale.action_confirm()
         self.sale.picking_ids.action_assign()
         for line in self.sale.picking_ids.move_line_ids:
-            line.qty_done = line.product_uom_qty
+            line.qty_done = line.reserved_uom_qty
         self.sale.picking_ids._action_done()
         self.assertEqual("done", self.sale.picking_ids.state)
 
         with freeze_time(date_order):
             invoice = self.sale._create_invoices()
             invoice.action_post()
 
@@ -76,13 +76,17 @@
             "declaration_type": "dispatches",
         }
         with freeze_time(declaration_date):
             self._create_declaration(vals)
         self.declaration.action_gather()
 
         self._check_line_values()
-        self.declaration.generate_declaration()
+        self.declaration.done()
         self._check_line_values(final=True)
 
+        # Check the Excel file
+        file_data = self._create_xls()
+        self.check_xls(file_data[0])
+
 
 class TestIntrastatProductSaleCase(TestIntrastatProductSale, TransactionCase):
     """Test Intrastat Sale"""
```

## odoo/addons/intrastat_product/views/account_move.xml

### odoo/addons/intrastat_product/views/account_move.xml

```diff
@@ -1,37 +1,35 @@
 <?xml version="1.0" encoding="utf-8"?>
 <odoo>
   <record id="view_move_form" model="ir.ui.view">
     <field name="name">intrastat.invoice.form</field>
     <field name="model">account.move</field>
     <field name="inherit_id" ref="account.view_move_form"/>
     <field name="arch" type="xml">
-      <group name="accounting_info_group" position="after">
-        <group id="intrastat" string="Intrastat">
-          <field name="intrastat_transaction_id"/>
-          <field name="intrastat" invisible="1"/>
-          <field name="intrastat_transport_id" attrs="{'invisible': [('intrastat', '!=', 'extended')]}" widget="selection"/>
-          <field name="src_dest_country_id" string="Destination Country"/>
-          <field name="src_dest_region_id" string="Origin Region" invisible="1"/>
-        </group>
-      </group>
+      <xpath expr="//page[@name='other_info']//field[@name='invoice_incoterm_id']" position="after">
+        <field name="intrastat_transaction_id"/>
+        <field name="intrastat" invisible="1"/>
+        <field name="intrastat_transport_id" attrs="{'invisible': [('intrastat', '!=', 'extended')]}" widget="selection"/>
+        <field name="src_dest_country_id" string="Destination Country"/>
+        <field name="src_dest_region_id" string="Origin Region" invisible="1"/>
+      </xpath>
       <page id="invoice_tab" position="after">
         <page id="intrastat_lines" string="Intrastat transaction details" groups="intrastat_product.group_invoice_intrastat_transaction_details" attrs="{'invisible': [('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund'))]}">
           <div>
             <button type="object" name="compute_intrastat_lines" string="Compute" help="(Re)compute the intrastat transaction details from the product master data." icon="fa-gears"/>
           </div>
           <field name="intrastat_line_ids">
             <tree editable="bottom">
-              <field name="invoice_line_id" domain="[('exclude_from_invoice_tab', '=', False), ('move_id', '=', parent.id), ('display_type', '=', False)]" options="{'no_create': True, 'no_open': True}"/>
+              <field name="invoice_line_id" domain="[('move_id', '=', parent.id), ('display_type', '=', 'product')]" options="{'no_create': True, 'no_open': True}"/>
               <field name="product_id"/>
               <field name="quantity"/>
               <field name="transaction_suppl_unit_qty"/>
               <field name="hs_code_id"/>
               <field name="transaction_weight"/>
-              <field name="product_origin_country_code"/>
+              <field name="product_origin_country_id"/>
             </tree>
           </field>
         </page>
       </page>
     </field>
   </record>
 </odoo>
```

## odoo/addons/intrastat_product/views/intrastat_product_declaration.xml

### odoo/addons/intrastat_product/views/intrastat_product_declaration.xml

```diff
@@ -3,58 +3,54 @@
   <record id="intrastat_product_declaration_view_form" model="ir.ui.view">
     <field name="name">intrastat.product.declaration.form</field>
     <field name="model">intrastat.product.declaration</field>
     <field name="arch" type="xml">
       <form>
         <header>
           <button name="action_gather" type="object" attrs="{'invisible': ['|', ('state', '!=', 'draft'), ('action', '=', 'nihil')]}" string="Generate Lines from Invoices" class="btn-primary"/>
-          <button name="generate_declaration" type="object" attrs="{'invisible': ['|', ('state', '!=', 'draft'), ('action', '=', 'nihil')]}" string="Generate Declaration Lines"/>
-          <button name="generate_xml" string="Generate XML Declaration File" type="object" attrs="{'invisible': [('xml_attachment_id', '!=', False)]}" invisible="context.get('generic_intrastat_product_declaration')"/>
-          <button name="delete_xml" string="Delete XML Export" type="object" attrs="{'invisible': [('xml_attachment_id', '=', False)]}"/>
-          <button name="done" string="Done" type="object" class="btn-primary" states="draft"/>
-          <button name="back2draft" string="Back to Draft" type="object" states="done"/>
+          <button name="done" string="Confirm" type="object" class="btn-primary" states="draft" help="Generate declaration lines, generate XML export and set declaration to 'Done'"/>
+          <button name="back2draft" string="Back to Draft" type="object" states="done" confirm="Are you sure you want to go back to draft?"/>
+          <button name="%(intrastat_product.intrastat_product_xlsx_report)d" type="action" string="Excel Export"/>
           <field name="state" widget="statusbar"/>
         </header>
-        <sheet string="Intrastat Product Declaration">
+        <sheet>
           <div class="oe_title">
             <h1>
               <span>Intrastat Product Declaration</span>
               <field name="year_month" class="oe_inline"/>
             </h1>
           </div>
           <group name="top-block">
             <group name="properties-1">
               <field name="year"/>
               <field name="month"/>
               <field name="declaration_type"/>
+              <field name="reporting_level"/>
               <field name="xml_attachment_datas" filename="xml_attachment_name" invisible="context.get('generic_intrastat_product_declaration')"/>
               <field name="xml_attachment_name" invisible="1"/>
               <field name="xml_attachment_id" invisible="1"/>
-              <field name="reporting_level" invisible="1"/>
             </group>
             <group name="properties-2">
               <field name="action"/>
               <field name="revision"/>
               <field name="total_amount" widget="monetary" options="{'currency_field': 'currency_id'}"/>
               <field name="num_decl_lines"/>
               <field name="company_id" groups="base.group_multi_company"/>
               <field name="company_country_code" invisible="1"/>
               <field name="currency_id" invisible="1"/>
             </group>
           </group>
           <notebook>
-            <page string="Transactions">
-              <button name="create_xls" type="object" string="Excel Export" context="{'computation_lines': 1}"/>
+            <page string="Transactions" name="computation_lines">
               <field name="computation_line_ids" context="{'declaration_type': declaration_type, 'reporting_level': reporting_level}" nolabel="1"/>
             </page>
-            <page string="Declaration Lines">
-              <button name="create_xls" type="object" string="Excel Export" context="{'declaration_lines': 1}"/>
+            <page string="Declaration Lines" name="declaration_lines">
               <field name="declaration_line_ids" context="{'declaration_type': declaration_type, 'reporting_level': reporting_level}" nolabel="1"/>
             </page>
-            <page string="Notes">
+            <page string="Notes" name="note">
               <field name="note"/>
             </page>
           </notebook>
         </sheet>
         <div class="oe_chatter">
           <field name="message_follower_ids" widget="mail_followers"/>
           <field name="activity_ids" widget="mail_activity"/>
@@ -65,19 +61,21 @@
   </record>
   <record id="intrastat_product_declaration_view_tree" model="ir.ui.view">
     <field name="name">intrastat.product.declaration.tree</field>
     <field name="model">intrastat.product.declaration</field>
     <field name="arch" type="xml">
       <tree>
         <field name="year_month" decoration-bf="1"/>
-        <field name="revision"/>
         <field name="declaration_type" widget="badge" decoration-danger="declaration_type == 'arrivals'" decoration-warning="declaration_type == 'dispatches'"/>
-        <field name="num_decl_lines"/>
-        <field name="total_amount" sum="1"/>
-        <field name="currency_id"/>
+        <field name="reporting_level" optional="hide"/>
+        <field name="action" optional="hide"/>
+        <field name="revision" optional="hide"/>
+        <field name="num_decl_lines" optional="show"/>
+        <field name="total_amount" sum="1" optional="show"/>
+        <field name="currency_id" optional="show"/>
         <field name="state" decoration-success="state == 'done'" decoration-info="state == 'draft'" widget="badge"/>
       </tree>
     </field>
   </record>
   <record id="intrastat_product_declaration_view_search" model="ir.ui.view">
     <field name="name">intrastat.product.declaration.search</field>
     <field name="model">intrastat.product.declaration</field>
@@ -122,131 +120,129 @@
   <record id="intrastat_product_computation_line_view_form" model="ir.ui.view">
     <field name="name">intrastat.product.computation.line.form</field>
     <field name="model">intrastat.product.computation.line</field>
     <field name="arch" type="xml">
       <form>
         <group string="Transaction" name="transaction">
           <field name="parent_id" invisible="not context.get('intrastat_product_computation_line_main_view')"/>
+          <field name="declaration_type" invisible="1"/>
+          <field name="reporting_level" invisible="1"/>
+          <field name="company_country_code" invisible="1"/>
           <field name="product_id"/>
-          <field name="hs_code_id"/>
-          <field name="src_dest_country_id"/>
-          <field name="src_dest_country_code"/>
+          <field name="hs_code_id" attrs="{'required': [('reporting_level', '=', 'extended')], 'invisible': [('reporting_level', '!=', 'extended')]}"/>
+          <field name="src_dest_country_id" attrs="{'invisible': [('reporting_level', '!=', 'extended')]}"/>
+          <field name="src_dest_country_code" attrs="{'required': [('reporting_level', '=', 'extended')], 'invisible': [('reporting_level', '!=', 'extended')]}"/>
           <field name="amount_company_currency" widget="monetary" options="{'currency_field': 'company_currency_id'}"/>
           <field name="amount_accessory_cost_company_currency" widget="monetary" options="{'currency_field': 'company_currency_id'}"/>
           <field name="company_currency_id" invisible="1"/>
-          <field name="transaction_id"/>
-          <label for="weight"/>
-          <div name="weight">
+          <field name="transaction_id" required="1"/>
+          <label for="weight" attrs="{'required': [('reporting_level', '=', 'extended')], 'invisible': [('reporting_level', '!=', 'extended')]}"/>
+          <div name="weight" attrs="{'required': [('reporting_level', '=', 'extended')], 'invisible': [('reporting_level', '!=', 'extended')]}">
             <field name="weight" class="oe_inline"/>
             Kg
           </div>
-          <field name="suppl_unit_qty"/>
-          <field name="intrastat_unit_id"/>
-          <field name="declaration_type" invisible="1"/>
-          <field name="reporting_level" invisible="1"/>
+          <field name="suppl_unit_qty" attrs="{'required': [('reporting_level', '=', 'extended'), ('intrastat_unit_id', '!=', False)], 'invisible': ['|', ('reporting_level', '!=', 'extended'), ('intrastat_unit_id', '=', False)]}"/>
+          <field name="intrastat_unit_id" attrs="{'invisible': ['|', ('reporting_level', '!=', 'extended'), ('intrastat_unit_id', '=', False)]}"/>
           <field name="transport_id" attrs="{'required': [('reporting_level', '=', 'extended')], 'invisible': [('reporting_level', '!=', 'extended')]}"/>
           <field name="incoterm_id" invisible="1"/>
-          <field name="region_id" invisible="1"/>
-          <!-- TODO: remove product_origin_country_id after update of localization modules -->
-          <field name="product_origin_country_id" invisible="1"/>
-          <field name="product_origin_country_code" attrs="{'invisible': [('declaration_type', '!=', 'arrivals')]}"/>
-          <field name="vat"/>
+          <field name="region_id" attrs="{'invisible': [('reporting_level', '!=', 'extended')]}"/>
+          <field name="region_code" attrs="{'required': [('reporting_level', '=', 'extended')], 'invisible': [('reporting_level', '!=', 'extended')]}"/>
+          <field name="product_origin_country_id" attrs="{'invisible': [('reporting_level', '!=', 'extended')]}"/>
+          <field name="product_origin_country_code" attrs="{'invisible': [('reporting_level', '!=', 'extended')], 'required': [('reporting_level', '=', 'extended')]}"/>
           <field name="partner_id"/>
+          <field name="vat"/>
           <field name="invoice_id"/>
         </group>
         <group string="Declaration" name="declaration">
           <field name="declaration_line_id"/>
         </group>
       </form>
     </field>
   </record>
   <record id="intrastat_product_computation_line_view_tree" model="ir.ui.view">
     <field name="name">intrastat.product.computation.line.tree</field>
     <field name="model">intrastat.product.computation.line</field>
     <field name="arch" type="xml">
       <tree>
         <field name="parent_id" invisible="not context.get('intrastat_product_computation_line_main_view')"/>
-        <field name="product_id"/>
-        <field name="hs_code_id"/>
-        <field name="src_dest_country_id"/>
-        <field name="src_dest_country_code"/>
-        <field name="amount_company_currency"/>
-        <field name="amount_accessory_cost_company_currency"/>
-        <field name="transaction_id"/>
-        <field name="weight"/>
-        <field name="suppl_unit_qty" attrs="{'invisible': [('intrastat_unit_id', '=', False)], 'required': [('intrastat_unit_id', '!=', False)]}"/>
-        <field name="intrastat_unit_id"/>
-        <field name="transport_id" attrs="{'required': [('reporting_level', '=', 'extended')], 'invisible': [('reporting_level', '!=', 'extended')]}"/>
-        <field name="region_id" invisible="1"/>
-        <!-- TODO: remove product_origin_country_id after update of localization modules -->
-        <field name="product_origin_country_id" invisible="1" string="Product C/O"/>
-        <field name="product_origin_country_code" attrs="{'column_invisible': [('parent.declaration_type', '=', 'arrivals')]}" string="Product C/O"/>
-        <field name="vat"/>
-        <field name="invoice_id"/>
         <field name="declaration_type" invisible="1"/>
         <field name="reporting_level" invisible="1"/>
+        <field name="company_country_code" invisible="1"/>
+        <field name="product_id" optional="show"/>
+        <field name="hs_code_id" optional="show" attrs="{'column_invisible': [('parent.reporting_level', '!=', 'extended')]}"/>
+        <field name="src_dest_country_id" optional="hide" attrs="{'column_invisible': [('parent.reporting_level', '!=', 'extended')]}"/>
+        <field name="src_dest_country_code" optional="show" attrs="{'column_invisible': [('parent.reporting_level', '!=', 'extended')]}"/>
+        <field name="amount_company_currency" sum="1"/>
+        <field name="amount_accessory_cost_company_currency" optional="show" sum="1"/>
+        <field name="transaction_code"/>
+        <field name="weight" optional="show" attrs="{'column_invisible': [('parent.reporting_level', '!=', 'extended')]}"/>
+        <field name="suppl_unit_qty" optional="show" attrs="{'column_invisible': [('parent.reporting_level', '!=', 'extended')], 'invisible': [('intrastat_unit_id', '=', False)]}"/>
+        <field name="intrastat_unit_id" optional="show" attrs="{'column_invisible': [('parent.reporting_level', '!=', 'extended')]}"/>
+        <field name="transport_id" optional="show" attrs="{'column_invisible': [('parent.reporting_level', '!=', 'extended')]}"/>
+        <field name="region_id" optional="hide" attrs="{'column_invisible': [('parent.reporting_level', '!=', 'extended')]}"/>
+        <field name="region_code" optional="show" attrs="{'column_invisible': [('parent.reporting_level', '!=', 'extended')]}"/>
+        <field name="product_origin_country_id" optional="hide" string="Product C/O" attrs="{'column_invisible': [('parent.reporting_level', '!=', 'extended')]}"/>
+        <field name="product_origin_country_code" optional="show" string="Product C/O" attrs="{'column_invisible': [('parent.reporting_level', '!=', 'extended')]}"/>
+        <field name="vat" optional="show"/>
+        <field name="invoice_id" optional="show"/>
       </tree>
     </field>
   </record>
   <record id="intrastat_product_declaration_line_view_form" model="ir.ui.view">
     <field name="name">intrastat.product.declaration.line.form</field>
     <field name="model">intrastat.product.declaration.line</field>
     <field name="arch" type="xml">
       <form>
         <group name="declaration">
           <field name="parent_id" invisible="not context.get('intrastat_product_declaration_line_main_view')"/>
-          <field name="hs_code_id"/>
-          <field name="src_dest_country_id"/>
-          <field name="src_dest_country_code"/>
+          <field name="declaration_type" invisible="1"/>
+          <field name="reporting_level" invisible="1"/>
+          <field name="company_country_code" invisible="1"/>
+          <field name="hs_code_id" attrs="{'invisible': [('reporting_level', '!=', 'extended')]}"/>
+          <field name="src_dest_country_code" attrs="{'invisible': [('reporting_level', '!=', 'extended')]}"/>
           <field name="amount_company_currency" widget="monetary" options="{'currency_field': 'company_currency_id'}"/>
           <field name="company_currency_id" invisible="1"/>
           <field name="transaction_id"/>
-          <label for="weight"/>
-          <div name="weight">
+          <label for="weight" attrs="{'invisible': [('reporting_level', '!=', 'extended')]}"/>
+          <div name="weight" attrs="{'invisible': [('reporting_level', '!=', 'extended')]}">
             <field name="weight" class="oe_inline"/>
             Kg
           </div>
-          <field name="suppl_unit_qty"/>
-          <field name="intrastat_unit_id"/>
-          <field name="declaration_type" invisible="1"/>
-          <field name="reporting_level" invisible="1"/>
-          <field name="transport_id" attrs="{'required': [('reporting_level', '=', 'extended')], 'invisible': [('reporting_level', '!=', 'extended')]}"/>
-          <field name="region_id" invisible="1"/>
+          <field name="suppl_unit_qty" attrs="{'invisible': [('reporting_level', '!=', 'extended')]}"/>
+          <field name="intrastat_unit_id" attrs="{'invisible': [('reporting_level', '!=', 'extended')]}"/>
+          <field name="transport_id" attrs="{'invisible': [('reporting_level', '!=', 'extended')]}"/>
+          <field name="region_code" attrs="{'invisible': [('reporting_level', '!=', 'extended')]}"/>
           <field name="incoterm_id" invisible="1"/>
-          <!-- TODO: remove product_origin_country_id after update of localization modules -->
-          <field name="product_origin_country_id" invisible="1"/>
-          <field name="product_origin_country_code" attrs="{'invisible': [('declaration_type', '!=', 'arrivals')]}"/>
+          <field name="product_origin_country_code" attrs="{'invisible': [('reporting_level', '!=', 'extended')]}"/>
           <field name="vat"/>
         </group>
         <group name="computation" string="Related Transactions">
-          <field name="computation_line_ids" nolabel="1"/>
+          <field name="computation_line_ids" nolabel="1" colspan="2"/>
         </group>
       </form>
     </field>
   </record>
   <record id="intrastat_product_declaration_line_view_tree" model="ir.ui.view">
     <field name="name">intrastat.product.declaration.line.tree</field>
     <field name="model">intrastat.product.declaration.line</field>
     <field name="arch" type="xml">
       <tree>
         <field name="parent_id" invisible="not context.get('intrastat_product_declaration_line_main_view')"/>
-        <field name="hs_code_id"/>
-        <field name="src_dest_country_id" invisible="1"/>
-        <field name="src_dest_country_code"/>
-        <field name="amount_company_currency"/>
-        <field name="transaction_id"/>
-        <field name="weight"/>
-        <field name="suppl_unit_qty"/>
-        <field name="intrastat_unit_id"/>
         <field name="declaration_type" invisible="1"/>
         <field name="reporting_level" invisible="1"/>
-        <field name="transport_id" attrs="{'required': [('reporting_level', '=', 'extended')], 'invisible': [('reporting_level', '!=', 'extended')]}"/>
-        <field name="region_id" invisible="1"/>
+        <field name="company_country_code" invisible="1"/>
+        <field name="hs_code_id" attrs="{'column_invisible': [('parent.reporting_level', '!=', 'extended')]}" optional="show"/>
+        <field name="src_dest_country_code" attrs="{'column_invisible': [('parent.reporting_level', '!=', 'extended')]}" optional="show"/>
+        <field name="amount_company_currency" sum="1"/>
+        <field name="transaction_code"/>
+        <field name="weight" attrs="{'column_invisible': [('parent.reporting_level', '!=', 'extended')]}" optional="show"/>
+        <field name="suppl_unit_qty" attrs="{'column_invisible': [('parent.reporting_level', '!=', 'extended')]}" optional="show"/>
+        <field name="intrastat_unit_id" attrs="{'column_invisible': [('parent.reporting_level', '!=', 'extended')]}" optional="show"/>
+        <field name="transport_id" attrs="{'column_invisible': [('parent.reporting_level', '!=', 'extended')]}" optional="show"/>
+        <field name="region_code" attrs="{'column_invisible': [('parent.reporting_level', '!=', 'extended')]}" optional="show"/>
         <field name="incoterm_id" invisible="1"/>
-        <!-- TODO: remove product_origin_country_id after update of localization modules -->
-        <field name="product_origin_country_id" invisible="1" string="Product C/O"/>
-        <field name="product_origin_country_code" attrs="{'column_invisible': [('parent.declaration_type', '=', 'arrivals')]}" string="Product C/O"/>
+        <field name="product_origin_country_code" attrs="{'column_invisible': [('parent.reporting_level', '!=', 'extended')]}" string="Product C/O" optional="show"/>
         <field name="vat"/>
       </tree>
     </field>
   </record>
 </odoo>
```

## odoo/addons/intrastat_product/views/intrastat_region.xml

### odoo/addons/intrastat_product/views/intrastat_region.xml

```diff
@@ -24,14 +24,28 @@
         <field name="name"/>
         <field name="description" optional="show"/>
         <field name="country_id"/>
         <field name="company_id" groups="base.group_multi_company"/>
       </tree>
     </field>
   </record>
+  <record id="intrastat_region_view_search" model="ir.ui.view">
+    <field name="name">intrastat.region.search</field>
+    <field name="model">intrastat.region</field>
+    <field name="arch" type="xml">
+      <search>
+        <field name="name" string="Name, Code or Description" filter_domain="['|', '|', ('code', 'ilike', self), ('name', 'ilike', self), ('description', 'ilike', self)]"/>
+        <field name="code"/>
+        <field name="country_id"/>
+        <group name="groupby">
+          <filter name="country_groupby" string="Country" context="{'group_by': 'country_id'}"/>
+        </group>
+      </search>
+    </field>
+  </record>
   <record id="intrastat_region_action" model="ir.actions.act_window">
     <field name="name">Intrastat Regions</field>
     <field name="res_model">intrastat.region</field>
     <field name="view_mode">tree,form</field>
   </record>
   <menuitem id="intrastat_region_menu" action="intrastat_region_action" parent="intrastat_base.menu_intrastat_config_root" sequence="50"/>
 </odoo>
```

## odoo/addons/intrastat_product/views/intrastat_transaction.xml

### odoo/addons/intrastat_product/views/intrastat_transaction.xml

```diff
@@ -38,14 +38,15 @@
   </record>
   <record id="intrastat_transaction_mode_search" model="ir.ui.view">
     <field name="name">intrastat.transaction.mode.search</field>
     <field name="model">intrastat.transaction</field>
     <field name="arch" type="xml">
       <search>
         <field name="description" string="Code or Description" filter_domain="['|', ('code', 'ilike', self), ('description', 'ilike', self)]"/>
+        <filter string="Archived" name="inactive" domain="[('active', '=', False)]"/>
         <group string="Group By" name="groupby">
           <filter name="company_groupby" string="Company" context="{'group_by': 'company_id'}"/>
         </group>
       </search>
     </field>
   </record>
   <record id="intrastat_transaction_action" model="ir.actions.act_window">
```

## odoo/addons/intrastat_product/views/res_config_settings.xml

### odoo/addons/intrastat_product/views/res_config_settings.xml

```diff
@@ -22,30 +22,14 @@
             <label for="intrastat_dispatches" class="col-md-5"/>
             <field name="intrastat_dispatches"/>
           </div>
           <div class="row">
             <label for="intrastat_transport_id" class="col-md-5"/>
             <field name="intrastat_transport_id"/>
           </div>
-          <div class="row">
-            <label for="intrastat_transaction_out_invoice" class="col-md-5"/>
-            <field name="intrastat_transaction_out_invoice"/>
-          </div>
-          <div class="row">
-            <label for="intrastat_transaction_out_refund" class="col-md-5"/>
-            <field name="intrastat_transaction_out_refund"/>
-          </div>
-          <div class="row">
-            <label for="intrastat_transaction_in_invoice" class="col-md-5"/>
-            <field name="intrastat_transaction_in_invoice"/>
-          </div>
-          <div class="row" attrs="{'invisible': [('country_code', 'in', ['FR'])]}">
-            <label for="intrastat_transaction_in_refund" class="col-md-5"/>
-            <field name="intrastat_transaction_in_refund"/>
-          </div>
           <div class="row" attrs="{'invisible': [('country_code', 'not in', ['BE'])]}">
             <label for="intrastat_region_id" class="col-md-5"/>
             <field name="intrastat_region_id" domain="[('country_id','=', country_id)]"/>
           </div>
         </div>
         <div class="o_setting_left_pane">
           <field name="intrastat_accessory_costs" attrs="{'invisible': [('country_code', 'in', ['BE'])]}"/>
```

## odoo/addons/intrastat_product/views/stock_warehouse.xml

### odoo/addons/intrastat_product/views/stock_warehouse.xml

```diff
@@ -2,12 +2,12 @@
 <odoo>
   <record id="view_warehouse" model="ir.ui.view">
     <field name="name">intrastat.stock.warehouse.form</field>
     <field name="model">stock.warehouse</field>
     <field name="inherit_id" ref="stock.view_warehouse"/>
     <field name="arch" type="xml">
       <field name="partner_id" position="after">
-        <field name="region_id" invisible="1"/>
+        <field name="region_id"/>
       </field>
     </field>
   </record>
 </odoo>
```

## odoo/addons/intrastat_product/wizards/__init__.py

```diff
@@ -1 +1,2 @@
+from . import res_config_settings
 from . import intrastat_result_view
```

## odoo/addons/intrastat_product/wizards/intrastat_result_view.py

```diff
@@ -5,10 +5,10 @@
 from odoo import fields, models
 
 
 class IntrastatResultView(models.TransientModel):
     _name = "intrastat.result.view"
     _description = "Pop-up to show errors on intrastat report generation"
 
-    note = fields.Text(
+    note = fields.Html(
         string="Notes", readonly=True, default=lambda self: self._context.get("note")
     )
```

## odoo/addons/intrastat_product/wizards/intrastat_result_view.xml

### odoo/addons/intrastat_product/wizards/intrastat_result_view.xml

```diff
@@ -7,15 +7,15 @@
 <odoo>
   <record id="intrastat_result_view_form" model="ir.ui.view">
     <field name="name">intrastat.result_view_form</field>
     <field name="model">intrastat.result.view</field>
     <field name="arch" type="xml">
       <form string="Intrastat Result View">
         <group name="main">
-          <field name="note" nolabel="1"/>
+          <field name="note" nolabel="1" colspan="2"/>
         </group>
         <footer>
           <button string="Ok" class="btn-primary" special="cancel"/>
         </footer>
       </form>
     </field>
   </record>
```

## Comparing `odoo_addon_intrastat_product-15.0.1.0.2.dist-info/METADATA` & `odoo_addon_intrastat_product-16.0.1.0.0.3.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,25 +1,25 @@
 Metadata-Version: 2.1
 Name: odoo-addon-intrastat-product
-Version: 15.0.1.0.2
+Version: 16.0.1.0.0.3
 Summary: Base module for Intrastat Product
 Home-page: https://github.com/OCA/intrastat-extrastat
 Author: ACSONE SA/NV, brain-tec AG, Akretion, Noviat, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
-Classifier: Framework :: Odoo :: 15.0
+Classifier: Framework :: Odoo :: 16.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
-Requires-Python: >=3.8
-Requires-Dist: odoo-addon-intrastat-base (<15.1dev,>=15.0dev)
-Requires-Dist: odoo-addon-product-harmonized-system (<15.1dev,>=15.0dev)
-Requires-Dist: odoo-addon-report-xlsx-helper (<15.1dev,>=15.0dev)
-Requires-Dist: odoo (<15.1dev,>=15.0a)
+Requires-Python: >=3.10
+Requires-Dist: odoo-addon-intrastat-base (<16.1dev,>=16.0dev)
+Requires-Dist: odoo-addon-product-harmonized-system (<16.1dev,>=16.0dev)
+Requires-Dist: odoo-addon-report-xlsx-helper (<16.1dev,>=16.0dev)
+Requires-Dist: odoo (<16.1dev,>=16.0a)
 Requires-Dist: python-stdnum (>=1.16)
 
 =================
 Intrastat Product
 =================
 
 .. !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
@@ -30,21 +30,21 @@
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fintrastat--extrastat-lightgray.png?logo=github
-    :target: https://github.com/OCA/intrastat-extrastat/tree/15.0/intrastat_product
+    :target: https://github.com/OCA/intrastat-extrastat/tree/16.0/intrastat_product
     :alt: OCA/intrastat-extrastat
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/intrastat-extrastat-15-0/intrastat-extrastat-15-0-intrastat_product
+    :target: https://translation.odoo-community.org/projects/intrastat-extrastat-16-0/intrastat-extrastat-16-0-intrastat_product
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
-    :target: https://runbot.odoo-community.org/runbot/227/15.0
+    :target: https://runbot.odoo-community.org/runbot/227/16.0
     :alt: Try me on Runbot
 
 |badge1| |badge2| |badge3| |badge4| |badge5| 
 
 This module contains common objects and fields for the Intrastat Product reporting.
 
 It should be used in combination with country-specific Intrastat Product reporting modules
@@ -137,15 +137,15 @@
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/intrastat-extrastat/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/intrastat-extrastat/issues/new?body=module:%20intrastat_product%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/intrastat-extrastat/issues/new?body=module:%20intrastat_product%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
@@ -176,12 +176,12 @@
    :alt: Odoo Community Association
    :target: https://odoo-community.org
 
 OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.
 
-This module is part of the `OCA/intrastat-extrastat <https://github.com/OCA/intrastat-extrastat/tree/15.0/intrastat_product>`_ project on GitHub.
+This module is part of the `OCA/intrastat-extrastat <https://github.com/OCA/intrastat-extrastat/tree/16.0/intrastat_product>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## Comparing `odoo_addon_intrastat_product-15.0.1.0.2.dist-info/RECORD` & `odoo_addon_intrastat_product-16.0.1.0.0.3.dist-info/RECORD`

 * *Files 9% similar despite different names*

```diff
@@ -1,63 +1,65 @@
-odoo/addons/intrastat_product/README.rst,sha256=SkSt-HIYeDHy-gtt5uENh_QzL5Oogq9i-ojyxHoAt4k,5921
+odoo/addons/intrastat_product/README.rst,sha256=dumkAg0xh-wOPfa2IN9nL4JXI9KGPEAAsq_B6Sbj2G8,5921
 odoo/addons/intrastat_product/__init__.py,sha256=6FVqhOkzoqdwwJsCrw--oHTX9VQP8bwGcV8l-D81JZE,97
-odoo/addons/intrastat_product/__manifest__.py,sha256=1SlyiumPL2IGjVUr5hdUNehKi4gCSS8JucChBWUM1wE,1774
+odoo/addons/intrastat_product/__manifest__.py,sha256=VoMKKFrvve5Pgvc7ROjz_8JmoJU_HVxqZ4I1BxFAvGs,1798
 odoo/addons/intrastat_product/hooks.py,sha256=-i6fM9NoIEVLjjkvW7T4yz6iRtg1nk7-3pMFtZlZle8,1157
+odoo/addons/intrastat_product/data/intrastat_transaction.xml,sha256=HwJCl7JtIP2BonSPpVyn6gfkDsHU5I9rj_F-KL736GU,5344
 odoo/addons/intrastat_product/data/intrastat_transport_mode.xml,sha256=nj26RJYj20JRBGZTbXF-Zbf8g4ckIyG-XqPDEGc4VrI,2480
 odoo/addons/intrastat_product/data/intrastat_unit.xml,sha256=jjtl36YRzAP9o01amVFQONJWqrWY93zNaJDQ2UgBQCE,5530
 odoo/addons/intrastat_product/demo/intrastat_demo.xml,sha256=wDzqP0X8VwgWll58802pUv0_r9X1-U9HFM1bvfQ84SQ,880
-odoo/addons/intrastat_product/i18n/es.po,sha256=HMUobFOibKk4MMh7NCeq4HN1wfuuaUbXtusnvZILtlI,76152
-odoo/addons/intrastat_product/i18n/fr.po,sha256=7VpAPfM5-wmK90ASyzKC8syQhP5XWueC9tR0k8yisho,77654
-odoo/addons/intrastat_product/i18n/intrastat_product.pot,sha256=WTTw6jZkbnj7Hb6m5UTrnOlS-28du4iEjRN9s5aLVDY,66736
-odoo/addons/intrastat_product/models/__init__.py,sha256=r0eSzAnW-F7jKGJSEGTGcoE6wQsBhQ0a5mOhv8mJ_sA,369
-odoo/addons/intrastat_product/models/account_move.py,sha256=Tk1xm3GTA1WdjE2B9S1IR6H0IquTm34dTD0Hwt7GbaA,9061
+odoo/addons/intrastat_product/i18n/es.po,sha256=sW6sV8eb-tEzlTkkkhP6RIE8iCBBvLrZ_IoKV5Cln-A,82024
+odoo/addons/intrastat_product/i18n/fr.po,sha256=TEyTG0jk7kntY6XccMqSraTikGusfY-8zOhuWO0Y57A,81028
+odoo/addons/intrastat_product/i18n/intrastat_product.pot,sha256=KXE9-VDVaUVfdg8aO9fsg_aiZaEvRXgRtG3JXUfxBdA,66278
+odoo/addons/intrastat_product/models/__init__.py,sha256=_vBJqbpOBIG1RXXOo1fR57c6YhzyfK-rXk14WY0zSk4,335
+odoo/addons/intrastat_product/models/account_move.py,sha256=ilezYDlBXeD-9t_rhUHd9-qQu9VP-_lnjX1_AJ5C1lw,7579
 odoo/addons/intrastat_product/models/hs_code.py,sha256=OI0y_Dxr_3MRBXqLcxSa91PWMVC4qhZoDg7IiQ977U4,422
-odoo/addons/intrastat_product/models/intrastat_product_declaration.py,sha256=KyS47Q5Uds3ROejWfpEBtTu_PjWGAIPMMEAer0JHNE8,50417
-odoo/addons/intrastat_product/models/intrastat_region.py,sha256=_BUaHV97j4Ca_KCe7qkp0o82L3wX8YGN2rW1xwLNt0Y,798
-odoo/addons/intrastat_product/models/intrastat_transaction.py,sha256=7tWq353O_PkzXnoCN-i_Uzmahby8v8Y5ZV5rogjQBPY,1175
+odoo/addons/intrastat_product/models/intrastat_product_declaration.py,sha256=ZjrnCPs6eHl_dACFhyFG__WvkFYg-yhecueFkpJDvOk,47563
+odoo/addons/intrastat_product/models/intrastat_region.py,sha256=ziVSLSv0rjFnab87G61r1oTR86t_6FtU-CEDPwuV39Y,704
+odoo/addons/intrastat_product/models/intrastat_transaction.py,sha256=QQ5qkCq-K0aFFUbVEjLZPRi-xyoo0LVcEE7LxNRJpiI,1166
 odoo/addons/intrastat_product/models/intrastat_transport_mode.py,sha256=-VaQr6KtNdgWGaw7_P0uwld2ST8tMaH9gbTMlxFHr9w,869
 odoo/addons/intrastat_product/models/intrastat_unit.py,sha256=SX8xJTu9xwxAU3oCC1zrAFTA6rsZamDmpBzUSF2NR5s,708
-odoo/addons/intrastat_product/models/res_company.py,sha256=RrQhey6P5MFCijN5TxMXYVToT7OK8DV34u9oysZZ5r0,2874
-odoo/addons/intrastat_product/models/res_config_settings.py,sha256=6IGdbcXOPNXyEhfxnWIstiKTM2iqcjOcf2uJm1nBAz4,1653
+odoo/addons/intrastat_product/models/res_company.py,sha256=KZhSs-EhuBpmbqOcB8DuBhD0mWFW0XW_IKLFT5bJe9Q,2165
 odoo/addons/intrastat_product/models/res_partner.py,sha256=MSeSxXpmWP38Wz4_59K289_RM5_7g5q8YSk8J1JIIzg,448
 odoo/addons/intrastat_product/models/sale_order.py,sha256=g-A5svk5FdYU3hFbWmCB4BA3wB_Rb9YpWIeA8qm2Id8,972
 odoo/addons/intrastat_product/models/stock_warehouse.py,sha256=fRUlwjBpcQDnclh9cIvXzAQe4djvb5Eydz796I2MjJY,746
 odoo/addons/intrastat_product/readme/CONFIGURE.rst,sha256=vnOsRxsuFqrwwMEC_hHsjtQ2odQPzJXES_uRnL0-7kA,732
 odoo/addons/intrastat_product/readme/CONTRIBUTORS.rst,sha256=j5HoMXNUy7b2KcXnUGCOvZdsR8Gig4UYotNJSodFpS8,221
 odoo/addons/intrastat_product/readme/DESCRIPTION.rst,sha256=EahhzKiY6wWs_a2xCz6_f5y601-cZT7qM-Vz7632mH8,473
 odoo/addons/intrastat_product/readme/INSTALL.rst,sha256=pyUr4LDoK0UYgDvXONV5XVXV2wmBmkfVslW-yIMEEK4,88
 odoo/addons/intrastat_product/readme/ROADMAP.rst,sha256=Wynlg6-UZjJCgR7upog7LjsuoCpfHWjHiqL4iTkGYzk,221
 odoo/addons/intrastat_product/readme/USAGE.rst,sha256=KW472lTRFSLodzzBnEPgWCmNyU6QQIKTuyCpGGFoDd4,1426
 odoo/addons/intrastat_product/report/__init__.py,sha256=O7gRVRXG_9XWNvfkW4L6234f2Arml6ORMKGlr2Q7vkc,43
-odoo/addons/intrastat_product/report/intrastat_product_report_xls.py,sha256=NbXG5nRMVxh9Uw8gCNF-WMc4oa3y_873awCw8MTx2S4,9297
+odoo/addons/intrastat_product/report/intrastat_product_report_xls.py,sha256=IAFNKmUdOHdONWeO1wNrLa6DpckAcjwa1g0VNuPaKRI,10958
+odoo/addons/intrastat_product/report/report.xml,sha256=XZeZ-WcPkxXzwgHphTconC8nIa6YsZjM2rNSZYDf3Og,895
 odoo/addons/intrastat_product/security/intrastat_security.xml,sha256=NaDhXzBq2VlYNlsGI81QlJd08h7EaQ9uu4LcAQa_xGU,1666
 odoo/addons/intrastat_product/security/ir.model.access.csv,sha256=H5nAFdUCeF2UA6p95Hr1GTUlgJh1-CtOC9c9b5Uy9gA,2585
 odoo/addons/intrastat_product/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
-odoo/addons/intrastat_product/static/description/index.html,sha256=SvNJWAO2xlInRXiDinI7Z47Bjs8X5Rtj-4RGRiEIiR0,16982
+odoo/addons/intrastat_product/static/description/index.html,sha256=WuTFvNcOypsdd1s6GizJAS5jRuQ1BwbLNupenFAuPWc,16982
 odoo/addons/intrastat_product/tests/__init__.py,sha256=UBpQBiARkL-S6auPN2si7EHoP0gq7TVgzwOnEKKtVXw,231
-odoo/addons/intrastat_product/tests/common.py,sha256=ovPKFR8FHNJuKwWI2snrvNXJ9VCYCCntm4g_kmRVNoA,3798
-odoo/addons/intrastat_product/tests/common_purchase.py,sha256=mmS9YGxX3PYuO_g5I5xEB9usJkrnO2du9cng9kG6qQY,3016
-odoo/addons/intrastat_product/tests/common_sale.py,sha256=yTD-lRw72Qa_AanF2cVb5aHBk-YgsAMUXv1tyXjIeMU,2663
-odoo/addons/intrastat_product/tests/test_brexit.py,sha256=q6h-l7e2aeyXTuojteuIk8fbRMOjYKjYvCrlpnxZMF0,5097
+odoo/addons/intrastat_product/tests/common.py,sha256=Vm6aU_i8ol4E3RQeejjjpmNGUss3ToMydaCnFEnJ4b0,7242
+odoo/addons/intrastat_product/tests/common_purchase.py,sha256=Qc_DOc4SXaLVyw97vzf-_lmmIoqpfJZohYib6RuSxrg,3030
+odoo/addons/intrastat_product/tests/common_sale.py,sha256=hzK-hi7Qfv1pTezbMoRMdHMQtZNXH-yZJq2c7oFX84M,2671
+odoo/addons/intrastat_product/tests/test_brexit.py,sha256=5Ff9DRto0As1bcCho-PgmjNjCCYvGV2OxnI3ZIm17Bc,4134
 odoo/addons/intrastat_product/tests/test_company.py,sha256=XWjawTdBburQG65DzcXAxP-5JHgJWIMmxtKLEe4eux8,1245
-odoo/addons/intrastat_product/tests/test_intrastat_product.py,sha256=81gomsxpssq3LkMxcnz-k7Lcf2YIHEUfip3BJy0PTsM,5596
-odoo/addons/intrastat_product/tests/test_purchase_order.py,sha256=10y0mKYvbGuj1vVinj_E_D-Y1qVyqbIOg55gN-twQrs,1804
-odoo/addons/intrastat_product/tests/test_sale_order.py,sha256=4ZUpdD538hwta7ZURtT8whCWgeh7ZubSLGhzPTCgg70,3084
-odoo/addons/intrastat_product/views/account_move.xml,sha256=Gvvq36hFv-BK3vlyLoGXtipNf_5P__16C3jItrYFNpM,2891
+odoo/addons/intrastat_product/tests/test_intrastat_product.py,sha256=zToZnzPnmBkIkidSzCqQ6ozz_1OeR6njuXxIJKgIL3s,5934
+odoo/addons/intrastat_product/tests/test_purchase_order.py,sha256=bvy-dnTwPdS0enCdnsXjJdj6W1lgliApWAzplgp7SDQ,1897
+odoo/addons/intrastat_product/tests/test_sale_order.py,sha256=rssIHKZA-gfTscBQl8GAvnfwc9mJCjdhv1rifU-ytLs,3179
+odoo/addons/intrastat_product/views/account_move.xml,sha256=O8lxkjYr8cz3hwHRkcgDPuQ_MnVCdzyLfCLx8BH2nkg,2726
 odoo/addons/intrastat_product/views/hs_code.xml,sha256=axRZx1juOVmNe88FYNTn88UQARV8ueBnv2T2jFEfbPk,1582
-odoo/addons/intrastat_product/views/intrastat_product_declaration.xml,sha256=MVG8NPUdqcq4tNukso3Lm-xK1GC4gyV8xL37bHi-1t4,19151
-odoo/addons/intrastat_product/views/intrastat_region.xml,sha256=RnVGs_V2XvFTvhj2PCV6kXecdp_VyZHcaigw5cSbveE,1628
-odoo/addons/intrastat_product/views/intrastat_transaction.xml,sha256=vxhXIE_tkixzhyASFccN8B3xtMA6J_MnJ2GEZcgSrdM,3010
+odoo/addons/intrastat_product/views/intrastat_product_declaration.xml,sha256=piw2kjgoYImhE6wWHh7Y-8CCqj1L7P1LP9VfVF98GQ4,23035
+odoo/addons/intrastat_product/views/intrastat_region.xml,sha256=WdTRNNpCPtNSKPstdY0dayxSxTt83U733VMy0CfO3xM,2523
+odoo/addons/intrastat_product/views/intrastat_transaction.xml,sha256=8cdSUHXlx6cnsU5P2A6GopERrsOgHNS7j2-HpcalF6o,3181
 odoo/addons/intrastat_product/views/intrastat_transport_mode.xml,sha256=eux7OPamgAkMcz85rqofmGJUtZ2qGjZnQBGp5rImoxI,2300
 odoo/addons/intrastat_product/views/intrastat_unit.xml,sha256=Fo-gkf-A6fyd3damSvNaagyGXdgEHn9AhyjWx6y_bdE,2865
 odoo/addons/intrastat_product/views/report_invoice.xml,sha256=miMyYxBCp_kQ4rFfSNUSlcV48GL4MAvNSYrPmKS3jLE,2353
-odoo/addons/intrastat_product/views/res_config_settings.xml,sha256=hR9YWry6tmJ44g0-6_j22iASqBZ2K7p75BHGyxJ-dcc,4416
+odoo/addons/intrastat_product/views/res_config_settings.xml,sha256=3UDg-WY74wCuyYzvsySr8rV0hXA5PjJe7RhdjbYhWFI,2927
 odoo/addons/intrastat_product/views/res_partner_view.xml,sha256=heLBUqtCAi3HVx0kxNgZ49S3ohd9opsGyppPakbuyKA,501
 odoo/addons/intrastat_product/views/sale_order.xml,sha256=-Pua5SUC92jzTI5AH8C8juDXaftXcGmjSbmppQ0vibc,696
-odoo/addons/intrastat_product/views/stock_warehouse.xml,sha256=JtiY1SdpTAaCU7gcMY-JYeJj9RzYXtHPPSwPFTudthU,474
-odoo/addons/intrastat_product/wizards/__init__.py,sha256=LIEKkYGkkd0CSyY543TFyum5QpkhDgrSNTMHJvxrG1w,36
-odoo/addons/intrastat_product/wizards/intrastat_result_view.py,sha256=9AhrmhoEtwckC7WPA9kSFkS0utIrJkb69xkL8VYMmtk,493
-odoo/addons/intrastat_product/wizards/intrastat_result_view.xml,sha256=Edi7vPFc90_fHg7Ta-z2-FhgzG7WrxMYh4CKsAwMFy8,817
-odoo_addon_intrastat_product-15.0.1.0.2.dist-info/METADATA,sha256=6IRHp63uonQlIo-SXgxsI_ZPuX-0KpU5uxrP32dzCw4,6748
-odoo_addon_intrastat_product-15.0.1.0.2.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo_addon_intrastat_product-15.0.1.0.2.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_intrastat_product-15.0.1.0.2.dist-info/RECORD,,
+odoo/addons/intrastat_product/views/stock_warehouse.xml,sha256=7QjtzcStsTYbHNyU6TzU-x-jzYbcOQWUjwgPkl340Cc,460
+odoo/addons/intrastat_product/wizards/__init__.py,sha256=J6twJ1NW3QMLkTgB5BXdzfkb3Q5Jz_yyXYYY6Ms79Jo,70
+odoo/addons/intrastat_product/wizards/intrastat_result_view.py,sha256=q0-u9gOfsOviSKDFx_I003g-y283g0J3NMBTYUeT2g8,493
+odoo/addons/intrastat_product/wizards/intrastat_result_view.xml,sha256=dEa8Z_e77Ol5nI1TG3lm2Hpm1HiM022RML6ozSOvp8s,829
+odoo/addons/intrastat_product/wizards/res_config_settings.py,sha256=Pfm8dkHsYNMysXtV2ahAOlDl6mtGv7z14gjBSgiIUcY,1093
+odoo_addon_intrastat_product-16.0.1.0.0.3.dist-info/METADATA,sha256=gmS-lM71iXUUf6TRwce9vfwF0Ub-abxN7Qv_CrPdLn0,6751
+odoo_addon_intrastat_product-16.0.1.0.0.3.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo_addon_intrastat_product-16.0.1.0.0.3.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_intrastat_product-16.0.1.0.0.3.dist-info/RECORD,,
```

